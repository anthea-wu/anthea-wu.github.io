<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>JavaScript on Anthea's Blog</title><link>https://anthea-wu.github.io/tags/javascript/</link><description>Recent content in JavaScript on Anthea's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 29 May 2025 16:00:00 +0800</lastBuildDate><atom:link href="https://anthea-wu.github.io/tags/javascript/index.xml" rel="self" type="application/rss+xml"/><item><title>React åˆå¿ƒè€…å¤§è£œå¸–ï¼ˆ2ï¼‰</title><link>https://anthea-wu.github.io/post/react-juniors-2/</link><pubDate>Thu, 29 May 2025 16:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/react-juniors-2/</guid><description>&lt;p>æœ€è¿‘åœ¨å¹«ä¸€å€‹æœ‰ä½¿ç”¨åˆ° react-query çš„å…ƒä»¶å¯«æ¸¬è©¦æ™‚é‡åˆ°ä¸€å€‹ç‹€æ³ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-1.png"
width="1400"
height="1449"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-1_hu_b14a05e355e7b0c9.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-1_hu_33760f67a8bd424b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="96"
data-flex-basis="231px"
>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘æœ‰é‡å° error åšä¸€äº›è™•ç†ï¼Œå› æ­¤æˆ‘æƒ³å¯«å€‹æ¸¬è©¦ç¢ºèªç•¶æˆ‘çš„ API å›å‚³éŒ¯èª¤å¾Œæœ‰æ­£ç¢ºçš„è¢«è™•ç†ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-2.png"
width="1400"
height="1491"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-2_hu_71aa5c78a10743ec.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-2_hu_4031da0e6086326b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="93"
data-flex-basis="225px"
>&lt;/p>
&lt;p>ä½†ç•¶æˆ‘é€™åŸ·è¡Œæ¸¬è©¦å¾Œï¼Œå»ç™¼ç¾æ¸¬è©¦åŸ·è¡Œä¸éï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-3.png"
width="1166"
height="750"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-3_hu_504b9639f1ad70e9.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-3_hu_7aaea932c0aba0f1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="155"
data-flex-basis="373px"
>&lt;/p>
&lt;p>å¯ä»¥å¾ console ä¸­çœ‹åˆ°ï¼ŒéŒ¯èª¤æ˜¯åœ¨é©—è­‰éŒ¯èª¤è™•ç†å°±è¢«æ‹‹å‡ºäº†ï¼Œåœ¨é€™è£¡ä¸‹äº† console log ä¹‹å¾Œå¯ä»¥çœ‹åˆ°ç›®å‰çš„ result &lt;code>isLoading = true&lt;/code> ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-4.png"
width="1400"
height="2081"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-4_hu_528895f53bc200c7.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-4_hu_93f681ac9fac975.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="67"
data-flex-basis="161px"
>&lt;/p>
&lt;h2 id="ç‚ºä»€éº¼æœƒé€™æ¨£">ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ
&lt;/h2>&lt;p>æ ¹æ“š &lt;a class="link" href="https://tanstack.com/query/latest/docs/framework/react/guides/query-retries" target="_blank" rel="noopener"
>TanStack Query å®˜æ–¹æ–‡ä»¶&lt;/a> çš„èªªæ˜ï¼Œreact-query é è¨­æœƒå°å¤±æ•—çš„è«‹æ±‚é‡è©¦ä¸‰æ¬¡ï¼Œä¸¦ä½¿ç”¨æŒ‡æ•¸é€€é¿ï¼ˆexponential backoffï¼‰ç­–ç•¥ï¼Œåˆå§‹å»¶é²ç‚º 1 ç§’ï¼Œæ¯æ¬¡åŠ å€ï¼Œæœ€å¤šå»¶é² 30 ç§’ã€‚&lt;/p>
&lt;p>é€™å°±æ˜¯ç‚ºä»€éº¼æˆ‘å€‘çš„æ¸¬è©¦æœƒå™´æ‰çš„åŸå› ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-5.png"
width="1400"
height="1006"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-5_hu_566a512020fd2fb1.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-5_hu_56274ad38b882fe6.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="333px"
>&lt;/p>
&lt;h2 id="æ€éº¼ä¿®æ­£">æ€éº¼ä¿®æ­£ï¼Ÿ
&lt;/h2>&lt;p>ç‚ºäº†é¿å…åœ¨æ¸¬è©¦ä¸­å‡ºç¾éé æœŸçš„é‡è©¦è¡Œç‚ºï¼Œå¯ä»¥åœ¨å»ºç«‹ QueryClient æ™‚è¨­å®šï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-6.png"
width="1400"
height="866"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-6_hu_92d53e5463f1cfe1.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-6_hu_fb8c73782d85928a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>é€™æ¨£é™¤éåœ¨å€‹åˆ¥æŸ¥è©¢ä¸­å¦è¡Œè¨­å®šï¼Œä¸ç„¶é è¨­å°±æ˜¯ç¦ç”¨å…¨åŸŸé‡è©¦å›‰ã€‚&lt;/p></description></item><item><title>React åˆå¿ƒè€…å¤§è£œå¸–ï¼ˆ1ï¼‰</title><link>https://anthea-wu.github.io/post/react-junior-1/</link><pubDate>Fri, 23 May 2025 16:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/react-junior-1/</guid><description>&lt;p>åœ¨é–‹ç™¼ React Component æˆ– Hook æ™‚ï¼Œå¸¸æœƒçœ‹åˆ°åƒé€™æ¨£çš„ç¨‹å¼ç¢¼ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-1.png"
width="1400"
height="945"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-1_hu_6b359d5bc58ca69a.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-1_hu_4a75a3c6a48d7690.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;p>é€™çœ‹èµ·ä¾†åƒæ˜¯é•åäº† JavaScript çš„è¦å‰‡ï¼Œå› ç‚ºä½ åœ¨å®£å‘Š someStrategy ä¹‹å‰å°±ç”¨äº†å®ƒï¼Œä½†å¯¦éš›ä¸Šé€™æ˜¯åˆæ³•çš„è¡Œç‚ºï¼Œä¹Ÿæ˜¯ JavaScript çš„é æœŸè¡¨ç¾ã€‚&lt;/p>
&lt;p>ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘å€‘æœƒåœ¨å­¸ç¿’ JavaScript çš„éç¨‹ä¸­çœ‹åˆ°é€™ä»¶äº‹æƒ…ï¼šåœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ const æˆ– let å®£å‘Šçš„è®Šæ•¸ä¸èƒ½åœ¨å®£å‘Šä¹‹å‰è¢«ä½¿ç”¨ï¼Œå¦å‰‡æœƒæ‹‹å‡º ReferenceErrorï¼Œé€™æ®µæœŸé–“ç¨±ç‚º TDZï¼ˆTemporal Dead Zoneï¼Œæš«æ™‚æ€§æ­»å€ï¼‰ã€‚&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœä½ åœ¨è®Šæ•¸ã€Œåˆå§‹åŒ–ä¹‹å‰ã€å°±å˜—è©¦ä½¿ç”¨å®ƒï¼ŒJS æœƒæ‹’çµ•åŸ·è¡Œï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-2.png"
width="1400"
height="255"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-2_hu_31e457ab09524d7f.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-2_hu_2f52b61fd00fcada.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="549"
data-flex-basis="1317px"
>&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘å€‘ç›´è¦ºä¸Šæœƒèªç‚ºï¼š&lt;/p>
&lt;blockquote>
&lt;p>è®Šæ•¸å®£å‘Šåœ¨ä¸‹é¢ï¼Œä¸Šé¢å°±ä¸è©²èƒ½ç”¨äº†å§ï¼Ÿ&lt;/p>&lt;/blockquote>
&lt;p>ä½†å¯¦éš›ä¸Šï¼Œåœ¨ React å‡½å¼ï¼ˆæˆ– Hookï¼‰ä¸­é€™ç¨®çµæ§‹æ˜¯åˆæ³•çš„ï¼Œè®“æˆ‘å€‘ä¸€èµ·çœ‹ä¸‹å»å§ã€‚&lt;/p>
&lt;h2 id="react-ä¸¦æ²’æœ‰é­”æ³•">React ä¸¦æ²’æœ‰é­”æ³•
&lt;/h2>&lt;p>çœ‹èµ·ä¾†åœ¨ React ä¸­å¾ˆç¥å¥‡çš„äº‹æƒ…ï¼Œå…¶å¯¦èƒŒå¾Œé‚„æ˜¯é›¢ä¸é–‹ JavaScript åŸæœ¬çš„è¡Œç‚ºã€‚è®“æˆ‘å€‘å…ˆä¾†çœ‹çœ‹å…©ä»¶äº‹æƒ…çš„é‹ä½œï¼šHoisting &amp;amp; å‡½å¼å»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰ã€‚&lt;/p>
&lt;h3 id="1-æ¨¡çµ„å±¤ç´šçš„-hoistingæå‡">1. æ¨¡çµ„å±¤ç´šçš„ Hoistingï¼ˆæå‡ï¼‰
&lt;/h3>&lt;p>åœ¨ ES Module ä¸­ï¼Œæ‰€æœ‰é ‚å±¤çš„è®Šæ•¸ï¼ˆconstã€letã€varï¼‰ã€å‡½å¼ï¼ˆfunctionï¼‰åœ¨è§£æéšæ®µéƒ½æœƒè¢«ã€Œæå‡ï¼ˆhoistï¼‰ã€ï¼Œæ„æ€æ˜¯ï¼šJavaScript æœƒå…ˆæƒææ•´å€‹æ¨¡çµ„ï¼ŒæŠŠè®Šæ•¸åç¨±ã€å‡½å¼ç°½åéƒ½ã€Œå…ˆç™»è¨˜èµ·ä¾†ã€ã€‚&lt;/p>
&lt;p>ä¸é const/let æœƒè™•åœ¨ Temporal Dead Zoneï¼ˆæš«æ™‚æ€§æ­»å€ï¼ŒTDZï¼‰ ä¸­ï¼Œç›´åˆ°ç¨‹å¼åŸ·è¡Œåˆ°é‚£è¡Œæ‰åˆå§‹åŒ–ã€‚å› æ­¤ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-3.png"
width="1400"
height="419"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-3_hu_295000377c022f86.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-3_hu_9eada2c27593b852.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="334"
data-flex-basis="801px"
>&lt;/p>
&lt;h3 id="2-å‡½å¼æ˜¯å»¶é²åŸ·è¡Œdeferred-execution">2. å‡½å¼æ˜¯å»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰
&lt;/h3>&lt;p>åœ¨ JavaScript ä¸­ï¼Œå‡½å¼çš„ã€Œå®šç¾©ã€å’Œã€ŒåŸ·è¡Œã€æ˜¯å…©å›äº‹ã€‚&lt;/p>
&lt;p>ç•¶ JS è§£è®€ä¸€æ®µç¨‹å¼æ™‚ï¼Œå®ƒæœƒå…ˆè¨˜ä½ä½ å®šç¾©äº†å“ªäº›å‡½å¼ï¼Œä½†ä¸æœƒé¦¬ä¸ŠåŸ·è¡Œå®ƒå€‘ï¼Œç›´åˆ°ä½ ä¸»å‹•ã€Œå‘¼å«ã€å®ƒå€‘ç‚ºæ­¢ã€‚&lt;/p>
&lt;p>èˆ‰å€‹ä¾‹å­ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-4.png"
width="1400"
height="703"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-4_hu_c462b53b8410ec59.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-4_hu_51208dfcf57bf221.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="477px"
>&lt;/p>
&lt;p>åœ¨ React è£¡ä¹Ÿæ˜¯ä¸€æ¨£ï¼ŒuseHello æ˜¯ä¸€å€‹å‡½å¼ï¼Œå®ƒçš„å…§å®¹ç›´åˆ°è¢«å‘¼å«æ™‚æ‰æœƒåŸ·è¡Œã€‚å› æ­¤å³ä½¿ strategy ä½¿ç”¨äº†å°šæœªã€Œå¯«åˆ°ã€çš„ helloStrategyï¼Œåªè¦å‡½å¼å‘¼å«çš„æ™‚å€™ helloStrategy å·²ç¶“åˆå§‹åŒ–å®Œï¼Œå°±ä¸æœƒæœ‰å•é¡Œã€‚&lt;/p>
&lt;p>ç¶œåˆä»¥ä¸Šå…©é»ï¼Œæˆ‘å€‘å¯ä»¥ç†è§£åˆ° React ä¸¦æ²’æœ‰é­”æ³•ï¼Œåœ¨ const å®šç¾©å‰å…ˆå‘¼å«ä¸¦ä½¿ç”¨ const çš„å€¼æ˜¯ JavaScript è£¡æ­£å¸¸çš„è¡Œç‚ºï¼Œåªæ˜¯å› ç‚º æ¨¡çµ„å…ˆåŸ·è¡Œã€å‡½å¼å¾Œå‘¼å« æ‰€å¸¶ä¾†çš„çµæœã€‚&lt;/p></description></item><item><title>JavaScript å·¥ç¨‹å¸«çš„ä¿®è¡Œä¹‹è·¯ï¼ˆ1ï¼‰</title><link>https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/</link><pubDate>Sun, 09 Mar 2025 21:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/</guid><description>&lt;h2 id="å‰è¨€">å‰è¨€
&lt;/h2>&lt;p>å‰›æ¥è§¸ JavaScript çš„æ™‚å€™ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰çœ‹éé€™å€‹æƒ…å¢ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ è¦ºå¾—è·‘å®Œä¸Šé¢çš„ç¨‹å¼ç¢¼å¾Œï¼Œæœ€å¾Œ log å°å‡ºä¾†çš„é †åºæ˜¯ä»€éº¼å‘¢ï¼Ÿ&lt;/p>
&lt;p>å¦‚æœä½ çš„ç­”æ¡ˆæ˜¯ A â†’ B â†’ C çš„è©±ï¼Œæ­¡è¿ä½ ä¾†åˆ°æˆ‘çš„æ–‡ç« ï¼å¸Œæœ›é€™ç¯‡æ–‡ç« å¯ä»¥å¹«åŠ©ä½ æ›´ç†è§£ JavaScript çš„ç¨‹å¼åŸ·è¡Œé †åºï¼Œç†è§£ç‚ºä»€éº¼é€™æ®µç¨‹å¼ç¢¼è·‘å®Œå¾Œï¼Œé †åºæœƒæ˜¯ A â†’ C â†’ Bã€‚&lt;/p>
&lt;p>åœ¨äº†è§£åŸ·è¡Œé †åºä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦å…ˆèªè­˜ JavaScript æ˜¯å¦‚ä½•è™•ç†ç¨‹å¼ç¢¼çš„ã€‚&lt;/p>
&lt;h2 id="åŒæ­¥èˆ‡éåŒæ­¥çš„æ¦‚å¿µ">åŒæ­¥èˆ‡éåŒæ­¥çš„æ¦‚å¿µ
&lt;/h2>&lt;p>åœ¨ JavaScript ä¸­ï¼Œç¨‹å¼ç¢¼çš„åŸ·è¡Œæ–¹å¼å¯ä»¥åˆ†ç‚ºåŒæ­¥ï¼ˆSynchronousï¼‰å’ŒéåŒæ­¥ï¼ˆAsynchronousï¼‰å…©ç¨®ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼ï¼ˆSynchronousï¼‰&lt;/strong>ï¼šç¨‹å¼ç¢¼æœƒæŒ‰ç…§æ’°å¯«çš„é †åºé€è¡ŒåŸ·è¡Œï¼Œç•¶ä¸€å€‹å‡½å¼æ­£åœ¨åŸ·è¡Œæ™‚ï¼Œå…¶ä»–ç¨‹å¼ç¢¼å¿…é ˆç­‰å®ƒåŸ·è¡Œå®Œç•¢å¾Œæ‰èƒ½ç¹¼çºŒã€‚&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼ï¼ˆAsynchronousï¼‰&lt;/strong>ï¼šæŸäº›æ“ä½œå¯èƒ½æœƒèŠ±è²»è¼ƒé•·çš„æ™‚é–“ï¼ˆä¾‹å¦‚ I/O æ“ä½œã€ç¶²è·¯è«‹æ±‚ã€è¨ˆæ™‚å™¨ç­‰ï¼‰ï¼Œé€™äº›æ“ä½œä¸æœƒé˜»å¡ä¸»åŸ·è¡Œç·’ï¼Œè€Œæ˜¯æœƒåœ¨èƒŒæ™¯åŸ·è¡Œï¼Œç­‰åˆ°å®Œæˆå¾Œæ‰é€šçŸ¥ JavaScript åŸ·è¡Œå°æ‡‰çš„å›èª¿å‡½å¼ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æƒ³åƒä½ å»ä¸€å®¶æ—©é¤åº—é»é¤">æƒ³åƒä½ å»ä¸€å®¶æ—©é¤åº—é»é¤
&lt;/h3>&lt;p>åŒæ­¥å°±æ˜¯ä½ æ’éšŠé»äº†ä¸€ä»½ä¸‰æ˜æ²»ï¼Œç„¶å¾Œç«™åœ¨æ«ƒæª¯å‰ç­‰è€é—†åšå¥½æ‰é›¢é–‹ã€‚é€™æ™‚å€™è€é—†åªèƒ½è™•ç†ä½ çš„è¨‚å–®ï¼Œç„¡æ³•åŒæ™‚å¹«å…¶ä»–å®¢äººåšé¤é»ã€‚å¦‚æœé¤é»éœ€è¦ 5 åˆ†é˜ï¼Œæ‰€æœ‰å…¶ä»–å®¢äººéƒ½å¾—ç­‰ä½ å…ˆæ‹¿åˆ°æ‰è¼ªåˆ°ä»–å€‘ã€‚&lt;/p>
&lt;p>è€ŒéåŒæ­¥å‰‡æ˜¯ä½ å…ˆé»äº†ä¸‰æ˜æ²»ï¼Œè€é—†å‘Šè¨´ä½ ã€Œç­‰ä¸€ä¸‹ï¼Œæˆ‘åšå¥½æœƒå«ä½ ã€ï¼Œç„¶å¾Œç¹¼çºŒå¹«å…¶ä»–å®¢äººé»é¤ã€‚ç•¶ä½ çš„ä¸‰æ˜æ²»åšå¥½æ™‚ï¼Œè€é—†æ‰å–Šä½ çš„è™Ÿç¢¼ï¼Œä½ å†éå»æ‹¿é¤ã€‚é€™å€‹æƒ…å¢ƒä¸‹ï¼Œå…¶ä»–å®¢äººä¸éœ€è¦ç­‰ä½ æ‹¿åˆ°é¤é»ï¼Œå¤§å®¶çš„æœå‹™è®Šå¾—æ›´æœ‰æ•ˆç‡ã€‚&lt;/p>
&lt;p>åœ¨ JavaScript ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å°±åƒã€Œç«™åœ¨æ«ƒæª¯ç­‰è€é—†åšå¥½ä¸‰æ˜æ²»ã€ï¼Œæ‰€æœ‰ç¨‹å¼ç¢¼æœƒæŒ‰ç…§é †åºåŸ·è¡Œï¼Œç›´åˆ°ç•¶å‰çš„åŸ·è¡Œå®Œæˆï¼Œæ‰èƒ½ç¹¼çºŒä¸‹ä¸€æ­¥ã€‚&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å‰‡åƒã€Œé»å®Œé¤å¾Œå…ˆå»åšåˆ¥çš„äº‹ï¼Œç­‰ä¸‰æ˜æ²»åšå¥½äº†å†ä¾†æ‹¿ã€ï¼Œé€™æ¨£ JavaScript å¯ä»¥è™•ç†æ›´å¤šè«‹æ±‚ï¼Œè€Œä¸æœƒå› ç‚ºç­‰å¾…æŸå€‹çµæœè€Œå¡ä½ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="call-stackå‘¼å«å †ç–Š">Call Stackï¼ˆå‘¼å«å †ç–Šï¼‰
&lt;/h2>&lt;p>JavaScript æ¡ç”¨å–®ç·šç¨‹ï¼ˆsingle-threadedï¼‰æ¨¡å‹ï¼Œä»£è¡¨å®ƒä¸€æ¬¡åªèƒ½åŸ·è¡Œä¸€å€‹ä»»å‹™ã€‚å¦‚æœæœ‰å¤šå€‹ä»»å‹™è¦åŸ·è¡Œæ™‚ï¼Œé€™äº›ä»»å‹™å€‘å°±å¿…é ˆè¦æ’éšŠï¼Œç­‰å¾… JavaScript åŸ·è¡Œåˆ°ä»–å€‘ã€‚&lt;/p>
&lt;p>é‚£é€™äº›ä»»å‹™æœƒåœ¨å“ªè£¡æ’éšŠå‘¢ï¼Ÿé€šå¸¸ä¾†èªªï¼ŒåŒæ­¥ç¨‹å¼ç¢¼éƒ½æœƒè¢«æ”¾åˆ°ä¸€å€‹å« Call Stackï¼ˆå‘¼å«å †ç–Šï¼‰çš„åœ°æ–¹ç­‰å¾…è¢«åŸ·è¡Œã€‚èˆ‰ä¸€å€‹ç°¡å–®çš„ä¾‹å­ä¾†èªªï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ™‚å€™ç¨‹å¼ç¢¼çš„é‹ä½œæœƒåƒæ˜¯é€™æ¨£ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1.png"
width="508"
height="223"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1_hu_aead4749a130395.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1_hu_a267e5f2c27b208a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="546px"
>&lt;/p>
&lt;p>å¦‚æœç¨‹å¼ç¢¼éƒ½æ˜¯é€™æ¨£åŸ·è¡Œçš„è©±ï¼Œç‚ºä»€éº¼ä¸€é–‹å§‹çš„ä¾‹å­ï¼ŒsetTimeout è£¡çš„å…§å®¹æœƒæ˜¯æœ€å¾Œæ‰å‡ºç¾å‘¢ï¼Ÿ&lt;/p>
&lt;h2 id="task-queueä»»å‹™ä½‡åˆ—">Task Queueï¼ˆä»»å‹™ä½‡åˆ—ï¼‰
&lt;/h2>&lt;p>é€™æ˜¯å› ç‚ºéåŒæ­¥çš„ç¨‹å¼ç¢¼æ’éšŠçš„åœ°æ–¹å’ŒåŒæ­¥çš„ç¨‹å¼ç¢¼ä¸åŒã€‚éåŒæ­¥çš„ç¨‹å¼ç¢¼é€šå¸¸æœƒæœ‰ä¸€å€‹ callback functionï¼Œè€Œä»–æœƒè¢«æ”¾åˆ° Task Queueï¼ˆä»»å‹™ä½‡åˆ—ï¼‰è£¡ç­‰å¾…ï¼Œç•¶ Call Stack æ²’æœ‰ä»»å‹™è¦åŸ·è¡Œæ™‚ï¼Œä»–æ‰æœƒè¢«å–å‡ºä¾†ï¼Œæ”¾åˆ° Call Stack è£¡è¢«åŸ·è¡Œã€‚èˆ‰ä¾‹ä¾†èªªï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;D&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸ·è¡Œé †åºæœƒæ˜¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2.png"
width="573"
height="327"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2_hu_ac2a383c6bda83d1.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2_hu_d069358997c4e9f0.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;p>é‚£èª°æœƒè² è²¬è™•ç† Call Stack è£¡é¢çš„ä»»å‹™ï¼Ÿåˆæ˜¯èª°è² è²¬æŠŠ Task Queue è£¡é¢çš„ä»»å‹™ç§»å‹•åˆ° Call Stack å…§è®“ä»–å€‘è¢«åŸ·è¡Œçš„ï¼Ÿ&lt;/p>
&lt;h2 id="event-loopäº‹ä»¶è¿´åœˆ">Event Loopï¼ˆäº‹ä»¶è¿´åœˆï¼‰
&lt;/h2>&lt;p>Event Loopï¼ˆäº‹ä»¶è¿´åœˆï¼‰æ˜¯ JavaScript çš„æ ¸å¿ƒæ©Ÿåˆ¶ä¹‹ä¸€ï¼Œè² è²¬ç›£æ§ Call Stack å’Œ Task Queueï¼Œç¢ºä¿éåŒæ­¥ç¨‹å¼ç¢¼èƒ½å¤ æ­£ç¢ºåŸ·è¡Œã€‚&lt;/p>
&lt;p>è€Œ Event Loop æœƒå¹«å¿™åšé€™äº›äº‹æƒ…ï¼š&lt;/p>
&lt;ol>
&lt;li>å…ˆåŸ·è¡Œ Call Stack è£¡çš„æ‰€æœ‰åŒæ­¥ç¨‹å¼ç¢¼&lt;/li>
&lt;li>å¦‚æœ Call Stack æ¸…ç©ºäº†ï¼ŒEvent Loop æœƒæª¢æŸ¥ Microtask Queueï¼ˆä¾‹å¦‚ &lt;code>Promise.then()&lt;/code>ï¼‰ï¼Œå¦‚æœæœ‰ï¼Œå‰‡åŸ·è¡Œ&lt;/li>
&lt;li>ç•¶ Microtask Queue æ¸…ç©ºå¾Œï¼ŒEvent Loop æœƒæª¢æŸ¥ Task Queueï¼Œä¸¦å°‡ç¬¬ä¸€å€‹ç­‰å¾…çš„å›èª¿å‡½å¼æ¨å…¥ Call Stack åŸ·è¡Œ&lt;/li>
&lt;li>é‡è¤‡é€™å€‹éç¨‹ï¼Œç¢ºä¿æ‰€æœ‰ç¨‹å¼ç¢¼ä¾ç…§é©ç•¶çš„é †åºåŸ·è¡Œ&lt;/li>
&lt;/ol>
&lt;p>æˆ‘å€‘åœ¨ä¸Šé¢æœ‰æåˆ° Call Stack å’Œ Task Queueï¼Œé‚£ Microtask Queue åˆæ˜¯ä»€éº¼ï¼Ÿ&lt;/p>
&lt;h2 id="microtask-queueå¾®ä»»å‹™ä½‡åˆ—">Microtask Queueï¼ˆå¾®ä»»å‹™ä½‡åˆ—ï¼‰
&lt;/h2>&lt;p>é™¤äº† Task Queue ä¹‹å¤–ï¼Œé‚„æœ‰ä¸€å€‹å„ªå…ˆç´šåˆ¥æ›´é«˜çš„ä½‡åˆ—ï¼šMicrotask Queueï¼ˆå¾®ä»»å‹™ä½‡åˆ—ï¼‰ã€‚æœƒåœ¨é€™è£¡æ’éšŠçš„ä»»å‹™ä¹Ÿéƒ½æ˜¯éåŒæ­¥ç¨‹å¼ç¢¼ï¼Œåœ¨é€™ä¹‹ä¸­æœƒæœ‰æˆ‘å€‘å¾ˆå¸¸ä½¿ç”¨åˆ°çš„ä¸€å€‹äººï¼š&lt;code>Promise.then()&lt;/code>ã€‚ä¸€æ¨£è®“æˆ‘å€‘ç”¨ä¸€å€‹ç°¡å–®çš„ä¾‹å­ä¾†çœ‹ä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;D&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3.png"
width="714"
height="340"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3_hu_bb8cb776ac0836ea.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3_hu_89b9c09a120e8d46.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="210"
data-flex-basis="504px"
>&lt;/p>
&lt;h2 id="ç¸½çµ">ç¸½çµ
&lt;/h2>&lt;p>è®“æˆ‘å€‘ä¾†å›é¡§ä¸€ä¸‹é€™ç¯‡æ–‡ç« æˆ‘å€‘å­¸åˆ°äº†ä»€éº¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å°±åƒåœ¨éšŠä¼è£¡æ’éšŠçµå¸³ï¼Œä¸€è¡Œä¸€è¡Œåœ°åŸ·è¡Œï¼Œé€²å…¥ Call Stackï¼Œè·‘å®Œå¾Œæ‰æ›ä¸‹ä¸€å€‹&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼&lt;/strong>ï¼ˆåƒ &lt;code>setTimeout&lt;/code>ï¼‰æœƒè¢«äº¤çµ¦ Web API è™•ç†ï¼Œç­‰å®ƒå€‘æº–å‚™å¥½ï¼Œæ‰æœƒè¢«æ”¾å›ä¾†ï¼Œæ’éšŠç­‰è‘—åŸ·è¡Œ&lt;/li>
&lt;li>&lt;strong>Microtask Queue&lt;/strong>ï¼ˆåƒ &lt;code>Promise.then()&lt;/code>ï¼‰çš„å„ªå…ˆç´šæ¯” Task Queue é«˜ï¼Œæœƒå…ˆåŸ·è¡Œï¼Œæ‰€ä»¥ &lt;code>Promise.then()&lt;/code> æœƒæ¯” &lt;code>setTimeout(..., 0)&lt;/code> å…ˆè·‘&lt;/li>
&lt;li>&lt;strong>Event Loop&lt;/strong> å°±åƒ JavaScript çš„èª¿åº¦å“¡ï¼Œè² è²¬ç›£æ§ Call Stack å’Œ Task Queueï¼Œç¢ºä¿å¤§å®¶æŒ‰é †åºåŸ·è¡Œï¼Œä¸æœƒäº‚æ‰&lt;/li>
&lt;/ul>
&lt;p>é‚£éº¼ç¾åœ¨ï¼Œä½ å¯ä»¥ç†è§£ç‚ºä»€éº¼é€™æ®µç¨‹å¼ç¢¼è¢«å°å‡ºä¾†çš„é †åºæ˜¯ A â†’ C â†’ B äº†å—ï¼ŸğŸ˜‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>JavaScript å·¥ç¨‹å¸«çš„ä¿®è¡Œä¹‹è·¯ï¼ˆ2ï¼‰</title><link>https://anthea-wu.github.io/post/javascript-journey-2/</link><pubDate>Sun, 09 Mar 2025 15:30:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/javascript-journey-2/</guid><description>&lt;p>åœ¨ JavaScript çš„ä¸–ç•Œè£¡ï¼Œè™•ç†ç•°æ­¥æ“ä½œçš„æ–¹æ³•æœ‰å¤šç¨®ï¼Œå…¶ä¸­æœ€å¸¸è¢«è¨è«–çš„å°±æ˜¯ async/await èˆ‡ &lt;code>Promise.then()&lt;/code>ã€‚é€™å…©è€…å„æœ‰ç‰¹è‰²èˆ‡é©ç”¨å ´æ™¯ï¼Œç†è§£å®ƒå€‘çš„å·®ç•°ï¼Œæœ‰åŠ©æ–¼æˆ‘å€‘åœ¨é–‹ç™¼ä¸­åšå‡ºæ›´æ˜æ™ºçš„é¸æ“‡ã€‚&lt;/p>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å°‡æœƒå¾èªæ³•é¢¨æ ¼ã€éŒ¯èª¤è™•ç†ã€åŸ·è¡Œé †åºé€™ä¸‰å€‹é¢å‘èªªæ˜ä¸€ä¸‹å…©è€…çš„å·®ç•°ã€‚&lt;/p>
&lt;h2 id="èªæ³•é¢¨æ ¼èˆ‡å¯è®€æ€§">èªæ³•é¢¨æ ¼èˆ‡å¯è®€æ€§
&lt;/h2>&lt;p>async/await çš„å‡ºç¾ï¼Œè®“æˆ‘å€‘å¯ä»¥ç”¨é¡ä¼¼åŒæ­¥çš„æ–¹å¼ä¾†æ’°å¯«ç•°æ­¥ç¨‹å¼ç¢¼ï¼Œæå‡äº†ç¨‹å¼çš„å¯è®€æ€§ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨ &lt;code>Promise.then()&lt;/code> çš„å¯«æ³•å‰‡æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œasync/await è®“ç¨‹å¼ç¢¼çµæ§‹æ›´æ¥è¿‘åŒæ­¥é‚è¼¯ï¼Œæ¸›å°‘äº†å·¢ç‹€çµæ§‹ï¼Œæå‡äº†å¯è®€æ€§ã€‚ç„¶è€Œï¼Œ&lt;code>Promise.then()&lt;/code> åœ¨é async çš„ç’°å¢ƒä¸­ä»ç„¶é©ç”¨ï¼Œä¸”åœ¨æŸäº›æƒ…å¢ƒä¸‹å¯èƒ½æ›´ç‚ºç›´è§€ã€‚&lt;/p>
&lt;h2 id="callback-hell-å•é¡Œ">Callback Hell å•é¡Œ
&lt;/h2>&lt;p>åœ¨ä½¿ç”¨ &lt;code>Promise.then()&lt;/code> æ™‚ï¼Œå¦‚æœå¤šå€‹ç•°æ­¥æ“ä½œæœ‰ä¾è³´é—œä¿‚ï¼Œå¯èƒ½æœƒå°è‡´ Callback Hellï¼ˆå›èª¿åœ°ç„ï¼‰ã€‚ç•¶å›èª¿å‡½å¼éåº¦å·¢ç‹€æ™‚ï¼Œç¨‹å¼ç¢¼è®Šå¾—é›£ä»¥é–±è®€èˆ‡ç¶­è­·ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/orders/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">orders&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/order-details/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">orders&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">orderDetails&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¨‚å–®è©³ç´°è³‡æ–™:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">orderDetails&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–è¨‚å–®è©³æƒ…å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–è¨‚å–®å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–ä½¿ç”¨è€…å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™ç¨®åµŒå¥—çš„ &lt;code>.then()&lt;/code> çµæ§‹æœƒå°è‡´ï¼š&lt;/p>
&lt;ul>
&lt;li>é›£ä»¥é–±è®€èˆ‡ç¶­è­·ï¼šæ¯å€‹ç•°æ­¥æ“ä½œéƒ½å·¢ç‹€åœ¨å‰ä¸€å€‹ &lt;code>.then()&lt;/code> å…§éƒ¨ï¼Œå¢åŠ äº†ç†è§£æˆæœ¬ã€‚&lt;/li>
&lt;li>éŒ¯èª¤è™•ç†è¤‡é›œï¼šæ¯ä¸€å±¤ &lt;code>.then()&lt;/code> éƒ½å¯èƒ½ç™¼ç”ŸéŒ¯èª¤ï¼Œè™•ç†èµ·ä¾†ç›¸ç•¶éº»ç…©ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å¦‚ä½•ç”¨-asyncawait-è§£æ±º-callback-hell">å¦‚ä½•ç”¨ async/await è§£æ±º Callback Hellï¼Ÿ
&lt;/h3>&lt;p>async/await å¯ä»¥è®“ç¨‹å¼ç¢¼è®Šå¾—æ›´ç›´è¦ºï¼Œé¿å…éåº¦å·¢ç‹€ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">userResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">userResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">ordersResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/orders/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orders&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">ordersResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orderDetailsResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/order-details/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">orders&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orderDetails&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">orderDetailsResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¨‚å–®è©³ç´°è³‡æ–™:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">orderDetails&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ¨£çš„å¯«æ³•è®“ç¨‹å¼ç¢¼çµæ§‹æ›´æ¸…æ™°ï¼Œä¸”å¯ä»¥é€é &lt;code>tryâ€¦catch&lt;/code> çµ±ä¸€è™•ç†éŒ¯èª¤ï¼Œæ¸›å°‘ Callback Hell çš„å•é¡Œã€‚&lt;/p>
&lt;h2 id="éŒ¯èª¤è™•ç†">éŒ¯èª¤è™•ç†
&lt;/h2>&lt;p>åœ¨ä½¿ç”¨ async/await æ™‚ï¼Œæˆ‘å€‘é€šå¸¸é€é &lt;code>tryâ€¦catch&lt;/code> ä¾†é€²è¡ŒéŒ¯èª¤è™•ç†ï¼Œé€™ä½¿å¾—éŒ¯èª¤è™•ç†é‚è¼¯æ›´ç‚ºé›†ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œä½¿ç”¨ &lt;code>Promise.then()&lt;/code> æ™‚ï¼Œå‰‡æ˜¯é€é &lt;code>.catch()&lt;/code> ä¾†æ•æ‰éŒ¯èª¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œawait æœƒç­‰å¾… Promise è§£æ±ºå¾Œå†ç¹¼çºŒåŸ·è¡Œï¼Œé€™æ„å‘³è‘—å®ƒæœƒæš«åœæ‰€åœ¨çš„ async å‡½å¼çš„åŸ·è¡Œï¼›è€Œ &lt;code>Promise.then()&lt;/code> å‰‡æ˜¯åœ¨å°‡å›èª¿å‡½å¼åŠ å…¥å›èª¿éˆå¾Œï¼Œç¹¼çºŒåŸ·è¡Œç•¶å‰å‡½å¼ã€‚&lt;/p>
&lt;h2 id="åŸ·è¡Œé †åº">åŸ·è¡Œé †åº
&lt;/h2>&lt;p>ä½¿ç”¨ await æ™‚ï¼Œéœ€è¦æ³¨æ„å¯èƒ½å°è‡´çš„é †åºåŸ·è¡Œå•é¡Œã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¨‹å¼ç¢¼æœƒä¾æ¬¡ç­‰å¾…æ¯å€‹ fetch å®Œæˆï¼Œå°è‡´ç¸½è€—æ™‚å¢åŠ ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç† data1 å’Œ data2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç‚ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;code>Promise.all&lt;/code> ä¾†ä¸¦è¡ŒåŸ·è¡Œå¤šå€‹ç•°æ­¥æ“ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">data1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">all&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url2&lt;/span>&lt;span class="p">)]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç† data1 å’Œ data2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ¨£å¯ä»¥åŒæ™‚ç™¼é€å¤šå€‹è«‹æ±‚ï¼Œç¸®çŸ­ç¸½çš„åŸ·è¡Œæ™‚é–“ã€‚&lt;/p>
&lt;h2 id="ç¸½çµ">ç¸½çµ
&lt;/h2>&lt;p>ç‚ºäº†æ›´æ¸…æ¥šåœ°æ¯”è¼ƒ async/await èˆ‡ Promise çš„å·®ç•°ï¼Œæˆ‘å€‘å¯ä»¥ç”¨è¡¨æ ¼ä¾†æ•´ç†å®ƒå€‘çš„å„ªç¼ºé»ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-journey-2/js-1.png"
width="687"
height="188"
srcset="https://anthea-wu.github.io/post/javascript-journey-2/js-1_hu_2ee42537377fcf32.png 480w, https://anthea-wu.github.io/post/javascript-journey-2/js-1_hu_9780bf9e9883413.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="365"
data-flex-basis="877px"
>&lt;/p>
&lt;p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„åˆ†äº«ï¼Œæˆ‘å€‘ä¸‹ç¯‡æ–‡ç« è¦‹ ğŸ‘‹ğŸ»&lt;/p></description></item></channel></rss>