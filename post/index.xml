<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Anthea's Blog</title><link>https://anthea-wu.github.io/post/</link><description>Recent content in Posts on Anthea's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Fri, 06 Jun 2025 15:30:00 +0800</lastBuildDate><atom:link href="https://anthea-wu.github.io/post/index.xml" rel="self" type="application/rss+xml"/><item><title>React åˆå¿ƒè€…å¤§è£œå¸–ï¼ˆ3ï¼‰</title><link>https://anthea-wu.github.io/post/react-june-3/</link><pubDate>Fri, 06 Jun 2025 15:30:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/react-june-3/</guid><description>&lt;p>åœ¨ React è£¡ï¼Œçˆ¶å…ƒä»¶é€šå¸¸ ç„¡æ³•ç›´æ¥æ§åˆ¶å­å…ƒä»¶çš„å…§éƒ¨ç‹€æ…‹æˆ–è¡Œç‚ºã€‚ä½†æœ‰æ™‚å€™ï¼Œæˆ‘å€‘å¸Œæœ› çˆ¶å…ƒä»¶å¯ä»¥é€éæŸäº›æ–¹æ³•æ“ä½œå­å…ƒä»¶ï¼Œä¾‹å¦‚ï¼šé‡ç½®ç‹€æ…‹ã€è®€å–è³‡æ–™æˆ–è§¸ç™¼æŸäº›äº‹ä»¶â€”â€”é€™æ™‚å€™ï¼Œ&lt;code>useImperativeHandle&lt;/code> å°±èƒ½æ´¾ä¸Šç”¨å ´ã€‚&lt;/p>
&lt;p>é€™ç¯‡æ–‡ç« å°‡é€éä¸€å€‹ã€Œè‡ªå‹•è²©è³£æ©Ÿã€çš„ç¯„ä¾‹ï¼Œä¸€æ­¥æ­¥äº†è§£ï¼š&lt;/p>
&lt;ul>
&lt;li>ä»€éº¼æ˜¯ &lt;code>useImperativeHandle&lt;/code>&lt;/li>
&lt;li>å®ƒç‚ºä»€éº¼éœ€è¦æ­é… forwardRef&lt;/li>
&lt;li>å¦‚ä½•åœ¨å¯¦å‹™ä¸­é‹ç”¨å®ƒä¾†å»ºç«‹ä¸€å€‹ã€Œå¯ç”±çˆ¶å…ƒä»¶é™æ§çš„å­å…ƒä»¶ã€&lt;/li>
&lt;/ul>
&lt;h2 id="-ä»€éº¼æ˜¯-useimperativehandle">ğŸ’¡ ä»€éº¼æ˜¯ &lt;code>useImperativeHandle&lt;/code>
&lt;/h2>&lt;p>&lt;code>useImperativeHandle&lt;/code> æ˜¯ä¸€å€‹ React Hookï¼Œè®“ä½ å¯ä»¥ è‡ªè¨‚ä¸€å€‹ ref å°æ‡‰çš„ç‰©ä»¶å…§å®¹ã€‚é€™æ¨£çˆ¶å…ƒä»¶åœ¨é€é ref å–å¾—å­å…ƒä»¶æ™‚ï¼Œä¸æœƒæ‹¿åˆ°æ•´å€‹ DOM æˆ–å…ƒä»¶å¯¦ä¾‹ï¼Œè€Œæ˜¯å–å¾—ä½ ã€Œæƒ³è¦æš´éœ²å‡ºå»çš„åŠŸèƒ½ã€ã€‚&lt;/p>
&lt;p>å®ƒé€šå¸¸è¦å’Œ &lt;code>forwardRef&lt;/code> ä¸€èµ·ä½¿ç”¨ï¼Œæ‰èƒ½è®“å‡½å¼å‹å…ƒä»¶æ”¯æ´ refã€‚&lt;/p>
&lt;h2 id="-ç¯„ä¾‹ä»‹ç´¹ä¸€å°è‡ªå‹•è²©è³£æ©Ÿ">ğŸ§ª ç¯„ä¾‹ä»‹ç´¹ï¼šä¸€å°è‡ªå‹•è²©è³£æ©Ÿ
&lt;/h2>&lt;p>å‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹ VendingMachine å…ƒä»¶ï¼Œä»–æœ‰è‡ªå·±çš„å…§éƒ¨ç‹€æ…‹ï¼ŒåŒ…å«å·²é¸æ“‡çš„å•†å“ã€æŠ•å…¥çš„é‡‘é¡ç­‰ç­‰ã€‚ä½†é€šå¸¸ä¾†èªªï¼Œæˆ‘å€‘é‚„æœƒéœ€è¦ä¸€äº›å…¶ä»–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å®¢äººç™¼ç¾ä»–é¸éŒ¯é£²æ–™äº†ï¼Œæƒ³è¦å–æ¶ˆè³¼è²·ï¼›æˆ–æ˜¯è²©è³£æ©Ÿç•°å¸¸äº†ï¼Œå·¥ç¨‹å¸«ä¾†ç¶­ä¿®çš„æ™‚å€™æƒ³è¦é‡ç½®æ•´å€‹é£²æ–™æ©Ÿçš„ç‹€æ…‹ï¼Œé€™å…©å€‹è¡Œç‚ºéƒ½æœƒç‰½æ¶‰åˆ° VendingMachine çš„å…§éƒ¨ç‹€æ…‹ï¼Œä½†å› ç‚º é€™äº›æ“ä½œæ˜¯åœ¨çˆ¶å…ƒä»¶ä¸­è§¸ç™¼çš„è¡Œç‚ºï¼Œå­å…ƒä»¶è‡ªå·±ç„¡æ³•é æ¸¬ï¼Œä¹Ÿä¸æ‡‰è©²è‡ªè¡Œè™•ç†ã€‚&lt;/p>
&lt;p>é€™æ¨£åšæœ‰å¹¾å€‹å¥½è™•ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¿æŒå°è£æ€§&lt;/strong>ï¼šå­å…ƒä»¶ä»ç„¶æ§åˆ¶è‡ªå·±çš„ stateï¼Œå¤–éƒ¨åªèƒ½é€éã€ŒæŒ‡å®šçš„ä»‹é¢ã€ä¾†æ“ä½œå®ƒã€‚&lt;/li>
&lt;li>&lt;strong>æä¾›æ˜ç¢º API&lt;/strong>ï¼šè®“å…ƒä»¶çš„ä½¿ç”¨è€…çŸ¥é“æœ‰å“ªäº›åŠŸèƒ½å¯ä»¥ç”¨ï¼Œä¸æœƒäº‚æ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>æ‡‰ä»˜è¤‡é›œäº¤äº’é‚è¼¯&lt;/strong>ï¼šåƒæ˜¯ã€Œå–æ¶ˆäº¤æ˜“ã€ã€ã€Œé‡ç½®ç³»çµ±ã€é€™é¡è·¨å…ƒä»¶æ“ä½œå°±èƒ½è¢«å¦¥å–„è™•ç†ã€‚&lt;/li>
&lt;/ul>
&lt;p>å› æ­¤ï¼Œåœ¨æˆ‘å€‘çš„è‡ªå‹•è²©è³£æ©Ÿç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘é¸æ“‡å°‡ä»¥ä¸‹ä¸‰å€‹åŠŸèƒ½é€é &lt;code>useImperativeHandle&lt;/code> æä¾›çµ¦å¤–éƒ¨å…ƒä»¶ä½¿ç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>cancelSelection&lt;/code>: å®¢äººå–æ¶ˆäº¤æ˜“&lt;/li>
&lt;li>&lt;code>resetMachine&lt;/code>: å·¥ç¨‹å¸«é‡ç½®æ©Ÿå™¨&lt;/li>
&lt;li>&lt;code>getCurrentStatus&lt;/code>: æŸ¥è©¢ç›®å‰è²©è³£æ©Ÿçš„ç‹€æ…‹&lt;/li>
&lt;/ul>
&lt;p>ä¸‹ä¸€æ­¥å°±è®“æˆ‘å€‘ä¾†çœ‹è¦æ€éº¼ä½¿ç”¨ &lt;code>useImperativeHandle&lt;/code> å§ã€‚&lt;/p>
&lt;h2 id="-å»ºç«‹å¯æ§åˆ¶çš„å­å…ƒä»¶vendingmachine">ğŸ‘· å»ºç«‹å¯æ§åˆ¶çš„å­å…ƒä»¶ï¼šVendingMachine
&lt;/h2>&lt;h3 id="ç¬¬ä¸€æ­¥ä½¿ç”¨-forwardref-åŒ…è£å…ƒä»¶">ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ &lt;code>forwardRef&lt;/code> åŒ…è£å…ƒä»¶
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">VendingMachine&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">forwardRef&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">VendingMachineRef&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">VendingMachineProps&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// component
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç¬¬äºŒæ­¥å®šç¾©è¦æš´éœ²çµ¦å¤–éƒ¨çš„åŠŸèƒ½">ç¬¬äºŒæ­¥ï¼šå®šç¾©è¦æš´éœ²çµ¦å¤–éƒ¨çš„åŠŸèƒ½
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">useImperativeHandle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ref&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cancelSelection&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ¸…é™¤ç‹€æ…‹ä¸¦é€šçŸ¥å–æ¶ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resetMachine&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å°‡ç‹€æ…‹é‡ç½®ç‚ºåˆå§‹ç‹€æ…‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getCurrentStatus&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å›å‚³ç›®å‰çš„ç‹€æ…‹æè¿°å­—ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}),&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">selectedItem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">insertedMoney&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">status&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onCancel&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="-çˆ¶å…ƒä»¶é€é-ref-å‘¼å«å­å…ƒä»¶æ–¹æ³•">ğŸ‘¨â€ğŸ”§ çˆ¶å…ƒä»¶ï¼šé€é ref å‘¼å«å­å…ƒä»¶æ–¹æ³•
&lt;/h2>&lt;h3 id="ç¬¬ä¸‰æ­¥ä½¿ç”¨-useref-å»ºç«‹-ref">ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ &lt;code>useRef&lt;/code> å»ºç«‹ ref
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">vendingMachineRef&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">useRef&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">VendingMachineRef&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç¬¬å››æ­¥åœ¨çˆ¶å…ƒä»¶ä¸­å‘¼å«å­å…ƒä»¶æ–¹æ³•">ç¬¬å››æ­¥ï¼šåœ¨çˆ¶å…ƒä»¶ä¸­å‘¼å«å­å…ƒä»¶æ–¹æ³•
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">customerCancel&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vendingMachineRef&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cancelSelection&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">technicianReset&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vendingMachineRef&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resetMachine&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">checkStatus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vendingMachineRef&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">current&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCurrentStatus&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setMachineStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">??&lt;/span> &lt;span class="s2">&amp;#34;ç„¡æ³•ç²å–ç‹€æ…‹&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="-useimperativehandle-çš„æ‡‰ç”¨æƒ…å¢ƒ">âœ… &lt;code>useImperativeHandle&lt;/code> çš„æ‡‰ç”¨æƒ…å¢ƒ
&lt;/h2>&lt;p>é€™ç¨®åšæ³•ç‰¹åˆ¥é©åˆç”¨åœ¨ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è¡¨å–®æ§åˆ¶&lt;/strong>ï¼šä¾‹å¦‚è®“çˆ¶å…ƒä»¶è§¸ç™¼è¡¨å–®é©—è­‰ã€é‡ç½®æ¬„ä½&lt;/li>
&lt;li>&lt;strong>å¤–éƒ¨æ§åˆ¶å…ƒä»¶&lt;/strong>ï¼šåƒ modalã€canvasã€åœ–è¡¨ã€éŸ³æ¨‚æ’­æ”¾å™¨ç­‰éœ€è¦æ§åˆ¶çš„ UI&lt;/li>
&lt;li>&lt;strong>è¨­è¨ˆå¯è¤‡ç”¨å…ƒä»¶ API&lt;/strong>ï¼šæŠŠå…§éƒ¨é‚è¼¯åŒ…åœ¨å…ƒä»¶ä¸­ï¼Œåªæš´éœ²å¿…è¦çš„ API çµ¦ä½¿ç”¨è€…&lt;/li>
&lt;/ul>
&lt;p>ä¸éè¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code>useImperativeHandle&lt;/code> ä¸æœƒè®“ä½ ç¹é React çš„ã€Œå–®å‘è³‡æ–™æµã€åŸå‰‡ï¼Œå› ç‚ºä½ åªèƒ½æ“ä½œå­å…ƒä»¶ã€Œå…è¨±ã€çš„éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>è‹¥çˆ¶å…ƒä»¶å¯ä»¥ç›´æ¥æ§åˆ¶å…¨éƒ¨ç‹€æ…‹ï¼Œé‚£å°±ä¸éœ€è¦é€™å€‹ hookï¼Œåªæœ‰åœ¨å­å…ƒä»¶å…§éƒ¨é‚è¼¯è¤‡é›œã€ä½†åˆéœ€è¦æä¾›éƒ¨åˆ†æ§åˆ¶çµ¦å¤–éƒ¨æ™‚æ‰ç”¨å¾—åˆ°ã€‚&lt;/p>
&lt;h2 id="-çµèª">ğŸ“ çµèª
&lt;/h2>&lt;p>&lt;code>useImperativeHandle&lt;/code> åœ¨å¯¦å‹™ä¸­é›–ç„¶ä½¿ç”¨é »ç‡ä¸é«˜ï¼Œä½†åœ¨è™•ç†ä¸€äº›é€²éšçš„äº’å‹•å ´æ™¯ï¼ˆä¾‹å¦‚é€™å€‹è‡ªå‹•è²©è³£æ©Ÿï¼‰æ™‚ï¼Œå¯ä»¥å¹«ä½ å»ºç«‹ä¹¾æ·¨åˆå¯æ§åˆ¶çš„å…ƒä»¶ APIï¼Œè®“å…ƒä»¶è¨­è¨ˆæ›´å½ˆæ€§ã€æ›´æ¨¡çµ„åŒ–ã€‚&lt;/p>
&lt;p>å¸Œæœ›ä½ å–œæ­¡ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘å€‘ä¸‹æ¬¡å†è¦‹ ğŸ‘‹ğŸ»&lt;/p></description></item><item><title>React åˆå¿ƒè€…å¤§è£œå¸–ï¼ˆ2ï¼‰</title><link>https://anthea-wu.github.io/post/react-juniors-2/</link><pubDate>Thu, 29 May 2025 16:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/react-juniors-2/</guid><description>&lt;p>æœ€è¿‘åœ¨å¹«ä¸€å€‹æœ‰ä½¿ç”¨åˆ° react-query çš„å…ƒä»¶å¯«æ¸¬è©¦æ™‚é‡åˆ°ä¸€å€‹ç‹€æ³ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-1.png"
width="1400"
height="1449"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-1_hu_b14a05e355e7b0c9.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-1_hu_33760f67a8bd424b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="96"
data-flex-basis="231px"
>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘æœ‰é‡å° error åšä¸€äº›è™•ç†ï¼Œå› æ­¤æˆ‘æƒ³å¯«å€‹æ¸¬è©¦ç¢ºèªç•¶æˆ‘çš„ API å›å‚³éŒ¯èª¤å¾Œæœ‰æ­£ç¢ºçš„è¢«è™•ç†ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-2.png"
width="1400"
height="1491"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-2_hu_71aa5c78a10743ec.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-2_hu_4031da0e6086326b.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="93"
data-flex-basis="225px"
>&lt;/p>
&lt;p>ä½†ç•¶æˆ‘é€™åŸ·è¡Œæ¸¬è©¦å¾Œï¼Œå»ç™¼ç¾æ¸¬è©¦åŸ·è¡Œä¸éï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-3.png"
width="1166"
height="750"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-3_hu_504b9639f1ad70e9.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-3_hu_7aaea932c0aba0f1.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="155"
data-flex-basis="373px"
>&lt;/p>
&lt;p>å¯ä»¥å¾ console ä¸­çœ‹åˆ°ï¼ŒéŒ¯èª¤æ˜¯åœ¨é©—è­‰éŒ¯èª¤è™•ç†å°±è¢«æ‹‹å‡ºäº†ï¼Œåœ¨é€™è£¡ä¸‹äº† console log ä¹‹å¾Œå¯ä»¥çœ‹åˆ°ç›®å‰çš„ result &lt;code>isLoading = true&lt;/code> ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-4.png"
width="1400"
height="2081"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-4_hu_528895f53bc200c7.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-4_hu_93f681ac9fac975.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="67"
data-flex-basis="161px"
>&lt;/p>
&lt;h2 id="ç‚ºä»€éº¼æœƒé€™æ¨£">ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ
&lt;/h2>&lt;p>æ ¹æ“š &lt;a class="link" href="https://tanstack.com/query/latest/docs/framework/react/guides/query-retries" target="_blank" rel="noopener"
>TanStack Query å®˜æ–¹æ–‡ä»¶&lt;/a> çš„èªªæ˜ï¼Œreact-query é è¨­æœƒå°å¤±æ•—çš„è«‹æ±‚é‡è©¦ä¸‰æ¬¡ï¼Œä¸¦ä½¿ç”¨æŒ‡æ•¸é€€é¿ï¼ˆexponential backoffï¼‰ç­–ç•¥ï¼Œåˆå§‹å»¶é²ç‚º 1 ç§’ï¼Œæ¯æ¬¡åŠ å€ï¼Œæœ€å¤šå»¶é² 30 ç§’ã€‚&lt;/p>
&lt;p>é€™å°±æ˜¯ç‚ºä»€éº¼æˆ‘å€‘çš„æ¸¬è©¦æœƒå™´æ‰çš„åŸå› ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-5.png"
width="1400"
height="1006"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-5_hu_566a512020fd2fb1.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-5_hu_56274ad38b882fe6.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="333px"
>&lt;/p>
&lt;h2 id="æ€éº¼ä¿®æ­£">æ€éº¼ä¿®æ­£ï¼Ÿ
&lt;/h2>&lt;p>ç‚ºäº†é¿å…åœ¨æ¸¬è©¦ä¸­å‡ºç¾éé æœŸçš„é‡è©¦è¡Œç‚ºï¼Œå¯ä»¥åœ¨å»ºç«‹ QueryClient æ™‚è¨­å®šï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-juniors-2/react-6.png"
width="1400"
height="866"
srcset="https://anthea-wu.github.io/post/react-juniors-2/react-6_hu_92d53e5463f1cfe1.png 480w, https://anthea-wu.github.io/post/react-juniors-2/react-6_hu_fb8c73782d85928a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="387px"
>&lt;/p>
&lt;p>é€™æ¨£é™¤éåœ¨å€‹åˆ¥æŸ¥è©¢ä¸­å¦è¡Œè¨­å®šï¼Œä¸ç„¶é è¨­å°±æ˜¯ç¦ç”¨å…¨åŸŸé‡è©¦å›‰ã€‚&lt;/p></description></item><item><title>React åˆå¿ƒè€…å¤§è£œå¸–ï¼ˆ1ï¼‰</title><link>https://anthea-wu.github.io/post/react-junior-1/</link><pubDate>Fri, 23 May 2025 16:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/react-junior-1/</guid><description>&lt;p>åœ¨é–‹ç™¼ React Component æˆ– Hook æ™‚ï¼Œå¸¸æœƒçœ‹åˆ°åƒé€™æ¨£çš„ç¨‹å¼ç¢¼ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-1.png"
width="1400"
height="945"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-1_hu_6b359d5bc58ca69a.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-1_hu_4a75a3c6a48d7690.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="148"
data-flex-basis="355px"
>&lt;/p>
&lt;p>é€™çœ‹èµ·ä¾†åƒæ˜¯é•åäº† JavaScript çš„è¦å‰‡ï¼Œå› ç‚ºä½ åœ¨å®£å‘Š someStrategy ä¹‹å‰å°±ç”¨äº†å®ƒï¼Œä½†å¯¦éš›ä¸Šé€™æ˜¯åˆæ³•çš„è¡Œç‚ºï¼Œä¹Ÿæ˜¯ JavaScript çš„é æœŸè¡¨ç¾ã€‚&lt;/p>
&lt;p>ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘å€‘æœƒåœ¨å­¸ç¿’ JavaScript çš„éç¨‹ä¸­çœ‹åˆ°é€™ä»¶äº‹æƒ…ï¼šåœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ const æˆ– let å®£å‘Šçš„è®Šæ•¸ä¸èƒ½åœ¨å®£å‘Šä¹‹å‰è¢«ä½¿ç”¨ï¼Œå¦å‰‡æœƒæ‹‹å‡º ReferenceErrorï¼Œé€™æ®µæœŸé–“ç¨±ç‚º TDZï¼ˆTemporal Dead Zoneï¼Œæš«æ™‚æ€§æ­»å€ï¼‰ã€‚&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœä½ åœ¨è®Šæ•¸ã€Œåˆå§‹åŒ–ä¹‹å‰ã€å°±å˜—è©¦ä½¿ç”¨å®ƒï¼ŒJS æœƒæ‹’çµ•åŸ·è¡Œï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-2.png"
width="1400"
height="255"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-2_hu_31e457ab09524d7f.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-2_hu_2f52b61fd00fcada.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="549"
data-flex-basis="1317px"
>&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘å€‘ç›´è¦ºä¸Šæœƒèªç‚ºï¼š&lt;/p>
&lt;blockquote>
&lt;p>è®Šæ•¸å®£å‘Šåœ¨ä¸‹é¢ï¼Œä¸Šé¢å°±ä¸è©²èƒ½ç”¨äº†å§ï¼Ÿ&lt;/p>&lt;/blockquote>
&lt;p>ä½†å¯¦éš›ä¸Šï¼Œåœ¨ React å‡½å¼ï¼ˆæˆ– Hookï¼‰ä¸­é€™ç¨®çµæ§‹æ˜¯åˆæ³•çš„ï¼Œè®“æˆ‘å€‘ä¸€èµ·çœ‹ä¸‹å»å§ã€‚&lt;/p>
&lt;h2 id="react-ä¸¦æ²’æœ‰é­”æ³•">React ä¸¦æ²’æœ‰é­”æ³•
&lt;/h2>&lt;p>çœ‹èµ·ä¾†åœ¨ React ä¸­å¾ˆç¥å¥‡çš„äº‹æƒ…ï¼Œå…¶å¯¦èƒŒå¾Œé‚„æ˜¯é›¢ä¸é–‹ JavaScript åŸæœ¬çš„è¡Œç‚ºã€‚è®“æˆ‘å€‘å…ˆä¾†çœ‹çœ‹å…©ä»¶äº‹æƒ…çš„é‹ä½œï¼šHoisting &amp;amp; å‡½å¼å»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰ã€‚&lt;/p>
&lt;h3 id="1-æ¨¡çµ„å±¤ç´šçš„-hoistingæå‡">1. æ¨¡çµ„å±¤ç´šçš„ Hoistingï¼ˆæå‡ï¼‰
&lt;/h3>&lt;p>åœ¨ ES Module ä¸­ï¼Œæ‰€æœ‰é ‚å±¤çš„è®Šæ•¸ï¼ˆconstã€letã€varï¼‰ã€å‡½å¼ï¼ˆfunctionï¼‰åœ¨è§£æéšæ®µéƒ½æœƒè¢«ã€Œæå‡ï¼ˆhoistï¼‰ã€ï¼Œæ„æ€æ˜¯ï¼šJavaScript æœƒå…ˆæƒææ•´å€‹æ¨¡çµ„ï¼ŒæŠŠè®Šæ•¸åç¨±ã€å‡½å¼ç°½åéƒ½ã€Œå…ˆç™»è¨˜èµ·ä¾†ã€ã€‚&lt;/p>
&lt;p>ä¸é const/let æœƒè™•åœ¨ Temporal Dead Zoneï¼ˆæš«æ™‚æ€§æ­»å€ï¼ŒTDZï¼‰ ä¸­ï¼Œç›´åˆ°ç¨‹å¼åŸ·è¡Œåˆ°é‚£è¡Œæ‰åˆå§‹åŒ–ã€‚å› æ­¤ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-3.png"
width="1400"
height="419"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-3_hu_295000377c022f86.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-3_hu_9eada2c27593b852.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="334"
data-flex-basis="801px"
>&lt;/p>
&lt;h3 id="2-å‡½å¼æ˜¯å»¶é²åŸ·è¡Œdeferred-execution">2. å‡½å¼æ˜¯å»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰
&lt;/h3>&lt;p>åœ¨ JavaScript ä¸­ï¼Œå‡½å¼çš„ã€Œå®šç¾©ã€å’Œã€ŒåŸ·è¡Œã€æ˜¯å…©å›äº‹ã€‚&lt;/p>
&lt;p>ç•¶ JS è§£è®€ä¸€æ®µç¨‹å¼æ™‚ï¼Œå®ƒæœƒå…ˆè¨˜ä½ä½ å®šç¾©äº†å“ªäº›å‡½å¼ï¼Œä½†ä¸æœƒé¦¬ä¸ŠåŸ·è¡Œå®ƒå€‘ï¼Œç›´åˆ°ä½ ä¸»å‹•ã€Œå‘¼å«ã€å®ƒå€‘ç‚ºæ­¢ã€‚&lt;/p>
&lt;p>èˆ‰å€‹ä¾‹å­ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/react-junior-1/react-4.png"
width="1400"
height="703"
srcset="https://anthea-wu.github.io/post/react-junior-1/react-4_hu_c462b53b8410ec59.png 480w, https://anthea-wu.github.io/post/react-junior-1/react-4_hu_51208dfcf57bf221.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="477px"
>&lt;/p>
&lt;p>åœ¨ React è£¡ä¹Ÿæ˜¯ä¸€æ¨£ï¼ŒuseHello æ˜¯ä¸€å€‹å‡½å¼ï¼Œå®ƒçš„å…§å®¹ç›´åˆ°è¢«å‘¼å«æ™‚æ‰æœƒåŸ·è¡Œã€‚å› æ­¤å³ä½¿ strategy ä½¿ç”¨äº†å°šæœªã€Œå¯«åˆ°ã€çš„ helloStrategyï¼Œåªè¦å‡½å¼å‘¼å«çš„æ™‚å€™ helloStrategy å·²ç¶“åˆå§‹åŒ–å®Œï¼Œå°±ä¸æœƒæœ‰å•é¡Œã€‚&lt;/p>
&lt;p>ç¶œåˆä»¥ä¸Šå…©é»ï¼Œæˆ‘å€‘å¯ä»¥ç†è§£åˆ° React ä¸¦æ²’æœ‰é­”æ³•ï¼Œåœ¨ const å®šç¾©å‰å…ˆå‘¼å«ä¸¦ä½¿ç”¨ const çš„å€¼æ˜¯ JavaScript è£¡æ­£å¸¸çš„è¡Œç‚ºï¼Œåªæ˜¯å› ç‚º æ¨¡çµ„å…ˆåŸ·è¡Œã€å‡½å¼å¾Œå‘¼å« æ‰€å¸¶ä¾†çš„çµæœã€‚&lt;/p></description></item><item><title>å¦‚ä½•åœ¨ local è¨­ç½® Git Pre-commit Hook</title><link>https://anthea-wu.github.io/post/git-pre-commit-hook-local-setup/</link><pubDate>Sun, 16 Mar 2025 10:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/git-pre-commit-hook-local-setup/</guid><description>&lt;h2 id="ä»€éº¼æ˜¯-pre-commit-hook">ä»€éº¼æ˜¯ Pre-commit Hook
&lt;/h2>&lt;p>Git pre-commit hook æ˜¯ä¸€ç¨®æœ¬åœ°è…³æœ¬ï¼Œåœ¨è·‘ git commit å‘½ä»¤æ™‚æœƒè‡ªå‹•åŸ·è¡Œã€‚é€™äº› hook å¯ä»¥ç”¨ä¾†ç¢ºä¿ç¨‹å¼ç¢¼å“è³ªï¼Œä¾‹å¦‚ run testã€TypeScript å‹åˆ¥æª¢æŸ¥ã€åŸ·è¡Œ ES Lint ç­‰ç­‰ï¼Œç¢ºä¿åªæœ‰åˆæ ¼çš„ç¨‹å¼ç¢¼æ‰èƒ½è¢«æäº¤ã€‚&lt;/p>
&lt;h2 id="local-hook-çš„å¥½è™•">Local Hook çš„å¥½è™•
&lt;/h2>&lt;ul>
&lt;li>åªå½±éŸ¿ localï¼Œä¸æœƒå¹²æ“¾å…¶ä»–åœ˜éšŠæˆå“¡ â†’ ä»¥æˆ‘å€‘åœ˜éšŠä¾†èªªï¼Œå› ç‚ºæ¯å€‹äººé›»è…¦è¦æ ¼ä¸åŒï¼Œå¦‚æœå¤§å®¶ commit å‰éƒ½éœ€è¦è·‘éä¸€æ¬¡æ¸¬è©¦å¯èƒ½æœƒå¾ˆæ²’æœ‰æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘é¸æ“‡åªå¯«åœ¨è‡ªå·±çš„ local ä¸Š&lt;/li>
&lt;li>ä¸éœ€è¦ä¿®æ”¹å°ˆæ¡ˆçš„ package.json&lt;/li>
&lt;li>ä¸æœƒè¢«æäº¤åˆ°ç‰ˆæœ¬åº«&lt;/li>
&lt;li>å¯ä»¥æ ¹æ“šå€‹äººéœ€æ±‚è‡ªå®šç¾©æª¢æŸ¥å…§å®¹&lt;/li>
&lt;/ul>
&lt;h2 id="è¨­ç½®æ­¥é©Ÿ">è¨­ç½®æ­¥é©Ÿ
&lt;/h2>&lt;h3 id="1-å»ºç«‹-hooks-ç›®éŒ„">1. å»ºç«‹ hooks ç›®éŒ„
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p .git/hooks
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-å»ºç«‹-pre-commit-æª”æ¡ˆ">2. å»ºç«‹ pre-commit æª”æ¡ˆ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">touch .git/hooks/pre-commit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-ç·¨å¯«-pre-commit-è…³æœ¬">3. ç·¨å¯« pre-commit è…³æœ¬
&lt;/h3>&lt;p>å°‡ä»¥ä¸‹å…§å®¹å¯«å…¥ &lt;code>.git/hooks/pre-commit&lt;/code> æª”æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Running pre-commit hook: tests and type checking...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Exit on error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run tests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Running tests...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run type checking&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Running type checking...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run tsc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;All checks passed! Proceeding with commit.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-è¨­å®šåŸ·è¡Œæ¬Šé™">4. è¨­å®šåŸ·è¡Œæ¬Šé™
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chmod +x .git/hooks/pre-commit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ¸¬è©¦èˆ‡ä½¿ç”¨">æ¸¬è©¦èˆ‡ä½¿ç”¨
&lt;/h2>&lt;p>å»ºç«‹ä¸€å€‹æ¸¬è©¦ commitï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;Test commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœè¨­ç½®æ­£ç¢ºï¼ŒåŸ·è¡Œå¾Œå°±æœƒçœ‹åˆ°æ¸¬è©¦èˆ‡ TypeScript å‹åˆ¥æª¢æŸ¥å®Œå¾Œæ‰æœƒçœŸçš„ commit æˆåŠŸã€‚&lt;/p>
&lt;p>å¦‚æœéœ€è¦è‡¨æ™‚è·³é hook æª¢æŸ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git commit --no-verify
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="qa">Q&amp;amp;A
&lt;/h2>&lt;p>&lt;strong>å¦‚æœæˆ‘è¨­å®šäº†é€™å€‹ pre-commit çš„å…§å®¹ï¼Œæ˜¯ä¸æ˜¯é€£å¾Œç«¯å°ˆæ¡ˆçš„ commit éƒ½æœƒè·‘éé€™å€‹ pre-commitï¼Ÿ&lt;/strong>&lt;/p>
&lt;p>pre-commit hook æ˜¯å„²å­˜åœ¨æ¯å€‹ Git å„²å­˜åº«çš„ &lt;code>.git/hooks&lt;/code> ç›®éŒ„ä¸­ï¼Œåªå°è©²ç‰¹å®šå„²å­˜åº«æœ‰æ•ˆã€‚&lt;/p>
&lt;p>æ‰€ä»¥èªªï¼Œæˆ‘å€‘åœ¨å“ªå€‹å°ˆæ¡ˆä¸­è¨­å®šçš„ pre-commit hookï¼š&lt;/p>
&lt;ul>
&lt;li>åªæœƒåœ¨å°é€™å€‹å°ˆæ¡ˆé€²è¡Œ commit æ™‚åŸ·è¡Œ&lt;/li>
&lt;li>ä¸æœƒå½±éŸ¿é›»è…¦ä¸Šçš„å…¶ä»–å°ˆæ¡ˆï¼ˆå¦‚å¾Œç«¯å°ˆæ¡ˆï¼‰&lt;/li>
&lt;li>æ¯å€‹ Git å„²å­˜åº«éƒ½æœ‰è‡ªå·±ç¨ç«‹çš„ hooks è¨­å®š&lt;/li>
&lt;/ul></description></item><item><title>JavaScript å·¥ç¨‹å¸«çš„ä¿®è¡Œä¹‹è·¯ï¼ˆ1ï¼‰</title><link>https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/</link><pubDate>Sun, 09 Mar 2025 21:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/</guid><description>&lt;h2 id="å‰è¨€">å‰è¨€
&lt;/h2>&lt;p>å‰›æ¥è§¸ JavaScript çš„æ™‚å€™ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰çœ‹éé€™å€‹æƒ…å¢ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ è¦ºå¾—è·‘å®Œä¸Šé¢çš„ç¨‹å¼ç¢¼å¾Œï¼Œæœ€å¾Œ log å°å‡ºä¾†çš„é †åºæ˜¯ä»€éº¼å‘¢ï¼Ÿ&lt;/p>
&lt;p>å¦‚æœä½ çš„ç­”æ¡ˆæ˜¯ A â†’ B â†’ C çš„è©±ï¼Œæ­¡è¿ä½ ä¾†åˆ°æˆ‘çš„æ–‡ç« ï¼å¸Œæœ›é€™ç¯‡æ–‡ç« å¯ä»¥å¹«åŠ©ä½ æ›´ç†è§£ JavaScript çš„ç¨‹å¼åŸ·è¡Œé †åºï¼Œç†è§£ç‚ºä»€éº¼é€™æ®µç¨‹å¼ç¢¼è·‘å®Œå¾Œï¼Œé †åºæœƒæ˜¯ A â†’ C â†’ Bã€‚&lt;/p>
&lt;p>åœ¨äº†è§£åŸ·è¡Œé †åºä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦å…ˆèªè­˜ JavaScript æ˜¯å¦‚ä½•è™•ç†ç¨‹å¼ç¢¼çš„ã€‚&lt;/p>
&lt;h2 id="åŒæ­¥èˆ‡éåŒæ­¥çš„æ¦‚å¿µ">åŒæ­¥èˆ‡éåŒæ­¥çš„æ¦‚å¿µ
&lt;/h2>&lt;p>åœ¨ JavaScript ä¸­ï¼Œç¨‹å¼ç¢¼çš„åŸ·è¡Œæ–¹å¼å¯ä»¥åˆ†ç‚ºåŒæ­¥ï¼ˆSynchronousï¼‰å’ŒéåŒæ­¥ï¼ˆAsynchronousï¼‰å…©ç¨®ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼ï¼ˆSynchronousï¼‰&lt;/strong>ï¼šç¨‹å¼ç¢¼æœƒæŒ‰ç…§æ’°å¯«çš„é †åºé€è¡ŒåŸ·è¡Œï¼Œç•¶ä¸€å€‹å‡½å¼æ­£åœ¨åŸ·è¡Œæ™‚ï¼Œå…¶ä»–ç¨‹å¼ç¢¼å¿…é ˆç­‰å®ƒåŸ·è¡Œå®Œç•¢å¾Œæ‰èƒ½ç¹¼çºŒã€‚&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼ï¼ˆAsynchronousï¼‰&lt;/strong>ï¼šæŸäº›æ“ä½œå¯èƒ½æœƒèŠ±è²»è¼ƒé•·çš„æ™‚é–“ï¼ˆä¾‹å¦‚ I/O æ“ä½œã€ç¶²è·¯è«‹æ±‚ã€è¨ˆæ™‚å™¨ç­‰ï¼‰ï¼Œé€™äº›æ“ä½œä¸æœƒé˜»å¡ä¸»åŸ·è¡Œç·’ï¼Œè€Œæ˜¯æœƒåœ¨èƒŒæ™¯åŸ·è¡Œï¼Œç­‰åˆ°å®Œæˆå¾Œæ‰é€šçŸ¥ JavaScript åŸ·è¡Œå°æ‡‰çš„å›èª¿å‡½å¼ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æƒ³åƒä½ å»ä¸€å®¶æ—©é¤åº—é»é¤">æƒ³åƒä½ å»ä¸€å®¶æ—©é¤åº—é»é¤
&lt;/h3>&lt;p>åŒæ­¥å°±æ˜¯ä½ æ’éšŠé»äº†ä¸€ä»½ä¸‰æ˜æ²»ï¼Œç„¶å¾Œç«™åœ¨æ«ƒæª¯å‰ç­‰è€é—†åšå¥½æ‰é›¢é–‹ã€‚é€™æ™‚å€™è€é—†åªèƒ½è™•ç†ä½ çš„è¨‚å–®ï¼Œç„¡æ³•åŒæ™‚å¹«å…¶ä»–å®¢äººåšé¤é»ã€‚å¦‚æœé¤é»éœ€è¦ 5 åˆ†é˜ï¼Œæ‰€æœ‰å…¶ä»–å®¢äººéƒ½å¾—ç­‰ä½ å…ˆæ‹¿åˆ°æ‰è¼ªåˆ°ä»–å€‘ã€‚&lt;/p>
&lt;p>è€ŒéåŒæ­¥å‰‡æ˜¯ä½ å…ˆé»äº†ä¸‰æ˜æ²»ï¼Œè€é—†å‘Šè¨´ä½ ã€Œç­‰ä¸€ä¸‹ï¼Œæˆ‘åšå¥½æœƒå«ä½ ã€ï¼Œç„¶å¾Œç¹¼çºŒå¹«å…¶ä»–å®¢äººé»é¤ã€‚ç•¶ä½ çš„ä¸‰æ˜æ²»åšå¥½æ™‚ï¼Œè€é—†æ‰å–Šä½ çš„è™Ÿç¢¼ï¼Œä½ å†éå»æ‹¿é¤ã€‚é€™å€‹æƒ…å¢ƒä¸‹ï¼Œå…¶ä»–å®¢äººä¸éœ€è¦ç­‰ä½ æ‹¿åˆ°é¤é»ï¼Œå¤§å®¶çš„æœå‹™è®Šå¾—æ›´æœ‰æ•ˆç‡ã€‚&lt;/p>
&lt;p>åœ¨ JavaScript ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å°±åƒã€Œç«™åœ¨æ«ƒæª¯ç­‰è€é—†åšå¥½ä¸‰æ˜æ²»ã€ï¼Œæ‰€æœ‰ç¨‹å¼ç¢¼æœƒæŒ‰ç…§é †åºåŸ·è¡Œï¼Œç›´åˆ°ç•¶å‰çš„åŸ·è¡Œå®Œæˆï¼Œæ‰èƒ½ç¹¼çºŒä¸‹ä¸€æ­¥ã€‚&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å‰‡åƒã€Œé»å®Œé¤å¾Œå…ˆå»åšåˆ¥çš„äº‹ï¼Œç­‰ä¸‰æ˜æ²»åšå¥½äº†å†ä¾†æ‹¿ã€ï¼Œé€™æ¨£ JavaScript å¯ä»¥è™•ç†æ›´å¤šè«‹æ±‚ï¼Œè€Œä¸æœƒå› ç‚ºç­‰å¾…æŸå€‹çµæœè€Œå¡ä½ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="call-stackå‘¼å«å †ç–Š">Call Stackï¼ˆå‘¼å«å †ç–Šï¼‰
&lt;/h2>&lt;p>JavaScript æ¡ç”¨å–®ç·šç¨‹ï¼ˆsingle-threadedï¼‰æ¨¡å‹ï¼Œä»£è¡¨å®ƒä¸€æ¬¡åªèƒ½åŸ·è¡Œä¸€å€‹ä»»å‹™ã€‚å¦‚æœæœ‰å¤šå€‹ä»»å‹™è¦åŸ·è¡Œæ™‚ï¼Œé€™äº›ä»»å‹™å€‘å°±å¿…é ˆè¦æ’éšŠï¼Œç­‰å¾… JavaScript åŸ·è¡Œåˆ°ä»–å€‘ã€‚&lt;/p>
&lt;p>é‚£é€™äº›ä»»å‹™æœƒåœ¨å“ªè£¡æ’éšŠå‘¢ï¼Ÿé€šå¸¸ä¾†èªªï¼ŒåŒæ­¥ç¨‹å¼ç¢¼éƒ½æœƒè¢«æ”¾åˆ°ä¸€å€‹å« Call Stackï¼ˆå‘¼å«å †ç–Šï¼‰çš„åœ°æ–¹ç­‰å¾…è¢«åŸ·è¡Œã€‚èˆ‰ä¸€å€‹ç°¡å–®çš„ä¾‹å­ä¾†èªªï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ™‚å€™ç¨‹å¼ç¢¼çš„é‹ä½œæœƒåƒæ˜¯é€™æ¨£ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1.png"
width="508"
height="223"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1_hu_aead4749a130395.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-1_hu_a267e5f2c27b208a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="546px"
>&lt;/p>
&lt;p>å¦‚æœç¨‹å¼ç¢¼éƒ½æ˜¯é€™æ¨£åŸ·è¡Œçš„è©±ï¼Œç‚ºä»€éº¼ä¸€é–‹å§‹çš„ä¾‹å­ï¼ŒsetTimeout è£¡çš„å…§å®¹æœƒæ˜¯æœ€å¾Œæ‰å‡ºç¾å‘¢ï¼Ÿ&lt;/p>
&lt;h2 id="task-queueä»»å‹™ä½‡åˆ—">Task Queueï¼ˆä»»å‹™ä½‡åˆ—ï¼‰
&lt;/h2>&lt;p>é€™æ˜¯å› ç‚ºéåŒæ­¥çš„ç¨‹å¼ç¢¼æ’éšŠçš„åœ°æ–¹å’ŒåŒæ­¥çš„ç¨‹å¼ç¢¼ä¸åŒã€‚éåŒæ­¥çš„ç¨‹å¼ç¢¼é€šå¸¸æœƒæœ‰ä¸€å€‹ callback functionï¼Œè€Œä»–æœƒè¢«æ”¾åˆ° Task Queueï¼ˆä»»å‹™ä½‡åˆ—ï¼‰è£¡ç­‰å¾…ï¼Œç•¶ Call Stack æ²’æœ‰ä»»å‹™è¦åŸ·è¡Œæ™‚ï¼Œä»–æ‰æœƒè¢«å–å‡ºä¾†ï¼Œæ”¾åˆ° Call Stack è£¡è¢«åŸ·è¡Œã€‚èˆ‰ä¾‹ä¾†èªªï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;D&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸ·è¡Œé †åºæœƒæ˜¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2.png"
width="573"
height="327"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2_hu_ac2a383c6bda83d1.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-2_hu_d069358997c4e9f0.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;p>é‚£èª°æœƒè² è²¬è™•ç† Call Stack è£¡é¢çš„ä»»å‹™ï¼Ÿåˆæ˜¯èª°è² è²¬æŠŠ Task Queue è£¡é¢çš„ä»»å‹™ç§»å‹•åˆ° Call Stack å…§è®“ä»–å€‘è¢«åŸ·è¡Œçš„ï¼Ÿ&lt;/p>
&lt;h2 id="event-loopäº‹ä»¶è¿´åœˆ">Event Loopï¼ˆäº‹ä»¶è¿´åœˆï¼‰
&lt;/h2>&lt;p>Event Loopï¼ˆäº‹ä»¶è¿´åœˆï¼‰æ˜¯ JavaScript çš„æ ¸å¿ƒæ©Ÿåˆ¶ä¹‹ä¸€ï¼Œè² è²¬ç›£æ§ Call Stack å’Œ Task Queueï¼Œç¢ºä¿éåŒæ­¥ç¨‹å¼ç¢¼èƒ½å¤ æ­£ç¢ºåŸ·è¡Œã€‚&lt;/p>
&lt;p>è€Œ Event Loop æœƒå¹«å¿™åšé€™äº›äº‹æƒ…ï¼š&lt;/p>
&lt;ol>
&lt;li>å…ˆåŸ·è¡Œ Call Stack è£¡çš„æ‰€æœ‰åŒæ­¥ç¨‹å¼ç¢¼&lt;/li>
&lt;li>å¦‚æœ Call Stack æ¸…ç©ºäº†ï¼ŒEvent Loop æœƒæª¢æŸ¥ Microtask Queueï¼ˆä¾‹å¦‚ &lt;code>Promise.then()&lt;/code>ï¼‰ï¼Œå¦‚æœæœ‰ï¼Œå‰‡åŸ·è¡Œ&lt;/li>
&lt;li>ç•¶ Microtask Queue æ¸…ç©ºå¾Œï¼ŒEvent Loop æœƒæª¢æŸ¥ Task Queueï¼Œä¸¦å°‡ç¬¬ä¸€å€‹ç­‰å¾…çš„å›èª¿å‡½å¼æ¨å…¥ Call Stack åŸ·è¡Œ&lt;/li>
&lt;li>é‡è¤‡é€™å€‹éç¨‹ï¼Œç¢ºä¿æ‰€æœ‰ç¨‹å¼ç¢¼ä¾ç…§é©ç•¶çš„é †åºåŸ·è¡Œ&lt;/li>
&lt;/ol>
&lt;p>æˆ‘å€‘åœ¨ä¸Šé¢æœ‰æåˆ° Call Stack å’Œ Task Queueï¼Œé‚£ Microtask Queue åˆæ˜¯ä»€éº¼ï¼Ÿ&lt;/p>
&lt;h2 id="microtask-queueå¾®ä»»å‹™ä½‡åˆ—">Microtask Queueï¼ˆå¾®ä»»å‹™ä½‡åˆ—ï¼‰
&lt;/h2>&lt;p>é™¤äº† Task Queue ä¹‹å¤–ï¼Œé‚„æœ‰ä¸€å€‹å„ªå…ˆç´šåˆ¥æ›´é«˜çš„ä½‡åˆ—ï¼šMicrotask Queueï¼ˆå¾®ä»»å‹™ä½‡åˆ—ï¼‰ã€‚æœƒåœ¨é€™è£¡æ’éšŠçš„ä»»å‹™ä¹Ÿéƒ½æ˜¯éåŒæ­¥ç¨‹å¼ç¢¼ï¼Œåœ¨é€™ä¹‹ä¸­æœƒæœ‰æˆ‘å€‘å¾ˆå¸¸ä½¿ç”¨åˆ°çš„ä¸€å€‹äººï¼š&lt;code>Promise.then()&lt;/code>ã€‚ä¸€æ¨£è®“æˆ‘å€‘ç”¨ä¸€å€‹ç°¡å–®çš„ä¾‹å­ä¾†çœ‹ä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;D&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3.png"
width="714"
height="340"
srcset="https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3_hu_bb8cb776ac0836ea.png 480w, https://anthea-wu.github.io/post/javascript-%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%BF%AE%E8%A1%8C%E4%B9%8B%E8%B7%AF1/js-3_hu_89b9c09a120e8d46.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="210"
data-flex-basis="504px"
>&lt;/p>
&lt;h2 id="ç¸½çµ">ç¸½çµ
&lt;/h2>&lt;p>è®“æˆ‘å€‘ä¾†å›é¡§ä¸€ä¸‹é€™ç¯‡æ–‡ç« æˆ‘å€‘å­¸åˆ°äº†ä»€éº¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒæ­¥ç¨‹å¼ç¢¼&lt;/strong> å°±åƒåœ¨éšŠä¼è£¡æ’éšŠçµå¸³ï¼Œä¸€è¡Œä¸€è¡Œåœ°åŸ·è¡Œï¼Œé€²å…¥ Call Stackï¼Œè·‘å®Œå¾Œæ‰æ›ä¸‹ä¸€å€‹&lt;/li>
&lt;li>&lt;strong>éåŒæ­¥ç¨‹å¼ç¢¼&lt;/strong>ï¼ˆåƒ &lt;code>setTimeout&lt;/code>ï¼‰æœƒè¢«äº¤çµ¦ Web API è™•ç†ï¼Œç­‰å®ƒå€‘æº–å‚™å¥½ï¼Œæ‰æœƒè¢«æ”¾å›ä¾†ï¼Œæ’éšŠç­‰è‘—åŸ·è¡Œ&lt;/li>
&lt;li>&lt;strong>Microtask Queue&lt;/strong>ï¼ˆåƒ &lt;code>Promise.then()&lt;/code>ï¼‰çš„å„ªå…ˆç´šæ¯” Task Queue é«˜ï¼Œæœƒå…ˆåŸ·è¡Œï¼Œæ‰€ä»¥ &lt;code>Promise.then()&lt;/code> æœƒæ¯” &lt;code>setTimeout(..., 0)&lt;/code> å…ˆè·‘&lt;/li>
&lt;li>&lt;strong>Event Loop&lt;/strong> å°±åƒ JavaScript çš„èª¿åº¦å“¡ï¼Œè² è²¬ç›£æ§ Call Stack å’Œ Task Queueï¼Œç¢ºä¿å¤§å®¶æŒ‰é †åºåŸ·è¡Œï¼Œä¸æœƒäº‚æ‰&lt;/li>
&lt;/ul>
&lt;p>é‚£éº¼ç¾åœ¨ï¼Œä½ å¯ä»¥ç†è§£ç‚ºä»€éº¼é€™æ®µç¨‹å¼ç¢¼è¢«å°å‡ºä¾†çš„é †åºæ˜¯ A â†’ C â†’ B äº†å—ï¼ŸğŸ˜‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>JavaScript å·¥ç¨‹å¸«çš„ä¿®è¡Œä¹‹è·¯ï¼ˆ2ï¼‰</title><link>https://anthea-wu.github.io/post/javascript-journey-2/</link><pubDate>Sun, 09 Mar 2025 15:30:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/javascript-journey-2/</guid><description>&lt;p>åœ¨ JavaScript çš„ä¸–ç•Œè£¡ï¼Œè™•ç†ç•°æ­¥æ“ä½œçš„æ–¹æ³•æœ‰å¤šç¨®ï¼Œå…¶ä¸­æœ€å¸¸è¢«è¨è«–çš„å°±æ˜¯ async/await èˆ‡ &lt;code>Promise.then()&lt;/code>ã€‚é€™å…©è€…å„æœ‰ç‰¹è‰²èˆ‡é©ç”¨å ´æ™¯ï¼Œç†è§£å®ƒå€‘çš„å·®ç•°ï¼Œæœ‰åŠ©æ–¼æˆ‘å€‘åœ¨é–‹ç™¼ä¸­åšå‡ºæ›´æ˜æ™ºçš„é¸æ“‡ã€‚&lt;/p>
&lt;p>æ¥ä¸‹ä¾†æˆ‘å°‡æœƒå¾èªæ³•é¢¨æ ¼ã€éŒ¯èª¤è™•ç†ã€åŸ·è¡Œé †åºé€™ä¸‰å€‹é¢å‘èªªæ˜ä¸€ä¸‹å…©è€…çš„å·®ç•°ã€‚&lt;/p>
&lt;h2 id="èªæ³•é¢¨æ ¼èˆ‡å¯è®€æ€§">èªæ³•é¢¨æ ¼èˆ‡å¯è®€æ€§
&lt;/h2>&lt;p>async/await çš„å‡ºç¾ï¼Œè®“æˆ‘å€‘å¯ä»¥ç”¨é¡ä¼¼åŒæ­¥çš„æ–¹å¼ä¾†æ’°å¯«ç•°æ­¥ç¨‹å¼ç¢¼ï¼Œæå‡äº†ç¨‹å¼çš„å¯è®€æ€§ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨ &lt;code>Promise.then()&lt;/code> çš„å¯«æ³•å‰‡æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œasync/await è®“ç¨‹å¼ç¢¼çµæ§‹æ›´æ¥è¿‘åŒæ­¥é‚è¼¯ï¼Œæ¸›å°‘äº†å·¢ç‹€çµæ§‹ï¼Œæå‡äº†å¯è®€æ€§ã€‚ç„¶è€Œï¼Œ&lt;code>Promise.then()&lt;/code> åœ¨é async çš„ç’°å¢ƒä¸­ä»ç„¶é©ç”¨ï¼Œä¸”åœ¨æŸäº›æƒ…å¢ƒä¸‹å¯èƒ½æ›´ç‚ºç›´è§€ã€‚&lt;/p>
&lt;h2 id="callback-hell-å•é¡Œ">Callback Hell å•é¡Œ
&lt;/h2>&lt;p>åœ¨ä½¿ç”¨ &lt;code>Promise.then()&lt;/code> æ™‚ï¼Œå¦‚æœå¤šå€‹ç•°æ­¥æ“ä½œæœ‰ä¾è³´é—œä¿‚ï¼Œå¯èƒ½æœƒå°è‡´ Callback Hellï¼ˆå›èª¿åœ°ç„ï¼‰ã€‚ç•¶å›èª¿å‡½å¼éåº¦å·¢ç‹€æ™‚ï¼Œç¨‹å¼ç¢¼è®Šå¾—é›£ä»¥é–±è®€èˆ‡ç¶­è­·ã€‚ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/orders/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">orders&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/order-details/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">orders&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">orderDetails&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¨‚å–®è©³ç´°è³‡æ–™:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">orderDetails&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–è¨‚å–®è©³æƒ…å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–è¨‚å–®å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç²å–ä½¿ç”¨è€…å¤±æ•—:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™ç¨®åµŒå¥—çš„ &lt;code>.then()&lt;/code> çµæ§‹æœƒå°è‡´ï¼š&lt;/p>
&lt;ul>
&lt;li>é›£ä»¥é–±è®€èˆ‡ç¶­è­·ï¼šæ¯å€‹ç•°æ­¥æ“ä½œéƒ½å·¢ç‹€åœ¨å‰ä¸€å€‹ &lt;code>.then()&lt;/code> å…§éƒ¨ï¼Œå¢åŠ äº†ç†è§£æˆæœ¬ã€‚&lt;/li>
&lt;li>éŒ¯èª¤è™•ç†è¤‡é›œï¼šæ¯ä¸€å±¤ &lt;code>.then()&lt;/code> éƒ½å¯èƒ½ç™¼ç”ŸéŒ¯èª¤ï¼Œè™•ç†èµ·ä¾†ç›¸ç•¶éº»ç…©ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å¦‚ä½•ç”¨-asyncawait-è§£æ±º-callback-hell">å¦‚ä½•ç”¨ async/await è§£æ±º Callback Hellï¼Ÿ
&lt;/h3>&lt;p>async/await å¯ä»¥è®“ç¨‹å¼ç¢¼è®Šå¾—æ›´ç›´è¦ºï¼Œé¿å…éåº¦å·¢ç‹€ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchUserData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">userResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/user/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">userId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">userResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">ordersResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/orders/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orders&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">ordersResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orderDetailsResponse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://api.example.com/order-details/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">orders&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">orderDetails&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">orderDetailsResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è¨‚å–®è©³ç´°è³‡æ–™:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">orderDetails&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ¨£çš„å¯«æ³•è®“ç¨‹å¼ç¢¼çµæ§‹æ›´æ¸…æ™°ï¼Œä¸”å¯ä»¥é€é &lt;code>tryâ€¦catch&lt;/code> çµ±ä¸€è™•ç†éŒ¯èª¤ï¼Œæ¸›å°‘ Callback Hell çš„å•é¡Œã€‚&lt;/p>
&lt;h2 id="éŒ¯èª¤è™•ç†">éŒ¯èª¤è™•ç†
&lt;/h2>&lt;p>åœ¨ä½¿ç”¨ async/await æ™‚ï¼Œæˆ‘å€‘é€šå¸¸é€é &lt;code>tryâ€¦catch&lt;/code> ä¾†é€²è¡ŒéŒ¯èª¤è™•ç†ï¼Œé€™ä½¿å¾—éŒ¯èª¤è™•ç†é‚è¼¯æ›´ç‚ºé›†ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œä½¿ç”¨ &lt;code>Promise.then()&lt;/code> æ™‚ï¼Œå‰‡æ˜¯é€é &lt;code>.catch()&lt;/code> ä¾†æ•æ‰éŒ¯èª¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.example.com/data&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">response&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ç™¼ç”ŸéŒ¯èª¤ï¼š&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œawait æœƒç­‰å¾… Promise è§£æ±ºå¾Œå†ç¹¼çºŒåŸ·è¡Œï¼Œé€™æ„å‘³è‘—å®ƒæœƒæš«åœæ‰€åœ¨çš„ async å‡½å¼çš„åŸ·è¡Œï¼›è€Œ &lt;code>Promise.then()&lt;/code> å‰‡æ˜¯åœ¨å°‡å›èª¿å‡½å¼åŠ å…¥å›èª¿éˆå¾Œï¼Œç¹¼çºŒåŸ·è¡Œç•¶å‰å‡½å¼ã€‚&lt;/p>
&lt;h2 id="åŸ·è¡Œé †åº">åŸ·è¡Œé †åº
&lt;/h2>&lt;p>ä½¿ç”¨ await æ™‚ï¼Œéœ€è¦æ³¨æ„å¯èƒ½å°è‡´çš„é †åºåŸ·è¡Œå•é¡Œã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¨‹å¼ç¢¼æœƒä¾æ¬¡ç­‰å¾…æ¯å€‹ fetch å®Œæˆï¼Œå°è‡´ç¸½è€—æ™‚å¢åŠ ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç† data1 å’Œ data2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç‚ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ &lt;code>Promise.all&lt;/code> ä¾†ä¸¦è¡ŒåŸ·è¡Œå¤šå€‹ç•°æ­¥æ“ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fetchData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">data1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">all&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url2&lt;/span>&lt;span class="p">)]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç† data1 å’Œ data2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ¨£å¯ä»¥åŒæ™‚ç™¼é€å¤šå€‹è«‹æ±‚ï¼Œç¸®çŸ­ç¸½çš„åŸ·è¡Œæ™‚é–“ã€‚&lt;/p>
&lt;h2 id="ç¸½çµ">ç¸½çµ
&lt;/h2>&lt;p>ç‚ºäº†æ›´æ¸…æ¥šåœ°æ¯”è¼ƒ async/await èˆ‡ Promise çš„å·®ç•°ï¼Œæˆ‘å€‘å¯ä»¥ç”¨è¡¨æ ¼ä¾†æ•´ç†å®ƒå€‘çš„å„ªç¼ºé»ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/javascript-journey-2/js-1.png"
width="687"
height="188"
srcset="https://anthea-wu.github.io/post/javascript-journey-2/js-1_hu_2ee42537377fcf32.png 480w, https://anthea-wu.github.io/post/javascript-journey-2/js-1_hu_9780bf9e9883413.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="365"
data-flex-basis="877px"
>&lt;/p>
&lt;p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„åˆ†äº«ï¼Œæˆ‘å€‘ä¸‹ç¯‡æ–‡ç« è¦‹ ğŸ‘‹ğŸ»&lt;/p></description></item><item><title>.NET SignalR çš„å­¸ç¿’èˆ‡æ‡‰ç”¨ï¼ˆ2ï¼‰</title><link>https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/</link><pubDate>Tue, 07 Jan 2025 21:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/</guid><description>&lt;h2 id="signalr-groups-ç°¡ä»‹">SignalR Groups ç°¡ä»‹
&lt;/h2>&lt;p>å»¶çºŒä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç´¹çš„ SignalR èŠå¤©å®¤æ¦‚å¿µï¼Œé€™æ¬¡è¦ä¾†èŠèŠã€Œå°æˆ¿é–“ã€åŠŸèƒ½ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Discordï¼Œå¯ä»¥æŠŠ SignalR Groups æƒ³åƒæˆ Discord çš„èªéŸ³æˆ–æ–‡å­—é »é“ï¼Œæ¯å€‹é »é“å°±æ˜¯ä¸€å€‹ Groupï¼Œä½¿ç”¨è€…å¯ä»¥é€²å‡ºä¸åŒçš„é »é“ä¾†äº¤æµã€‚&lt;/p>
&lt;p>SignalR çš„ Groups è®“æˆ‘å€‘å¯ä»¥æŠŠé€£æ¥çš„ä½¿ç”¨è€…åˆ†æˆä¸åŒçš„ã€Œå°æˆ¿é–“ã€ï¼Œç”¨ä¾†å¯¦ç¾ç¾¤çµ„èŠå¤©ã€ç‰¹å®šç”¨æˆ¶å»£æ’­ç­‰åŠŸèƒ½ã€‚æ¯å€‹ä½¿ç”¨è€…å¯ä»¥åŒæ™‚åœ¨å¤šå€‹æˆ¿é–“è£¡ï¼Œé€™è®“è¨Šæ¯å‚³éè®Šå¾—å¾ˆå½ˆæ€§ã€‚&lt;/p>
&lt;h3 id="groups-ä¸»è¦ç‰¹é»">Groups ä¸»è¦ç‰¹é»
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>å‹•æ…‹ç®¡ç†&lt;/strong>ï¼šä½ å¯ä»¥éš¨æ™‚è®“ä½¿ç”¨è€…åŠ å…¥æˆ–é€€å‡ºæˆ¿é–“ï¼Œåƒæ˜¯éš¨æ™‚åŠ å…¥æˆ–é›¢é–‹ Discord é »é“ä¸€æ¨£ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>è‡¨æ™‚æ€§&lt;/strong>ï¼šæˆ¿é–“æˆå“¡è³‡æ–™åªå­˜åœ¨ä¼ºæœå™¨è¨˜æ†¶é«”è£¡ï¼Œä¼ºæœå™¨é‡å•Ÿå¾Œå°±æœƒæ¸…ç©ºï¼Œä¸ç”¨æ“”å¿ƒé•·æœŸç¶­è­·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å»£æ’­æ•ˆç‡&lt;/strong>ï¼šå¯ä»¥ä¸€æ¬¡æŠŠè¨Šæ¯ç™¼çµ¦æ•´å€‹æˆ¿é–“çš„äººï¼Œä¸éœ€è¦é‡è¤‡ç™¼é€ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¤šçµ„æˆå“¡&lt;/strong>ï¼šåŒä¸€å€‹ä½¿ç”¨è€…å¯ä»¥åŒæ™‚å¾…åœ¨å¾ˆå¤šæˆ¿é–“ï¼Œå°±åƒä½ å¯ä»¥åŠ å…¥å¥½å¹¾å€‹ Discord é »é“ä¸€æ¨£ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="å¯¦ä½œæ­¥é©Ÿ">å¯¦ä½œæ­¥é©Ÿ
&lt;/h2>&lt;h3 id="1-æœå‹™å™¨ç«¯å¯¦ç¾">1. æœå‹™å™¨ç«¯å¯¦ç¾
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.SignalR&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">WebApiDemo.Hubs&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ChatHub&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Hub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨ Dictionary è¿½è¸ªç”¨æˆ¶æ‰€åœ¨çš„æˆ¿é–“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">Dictionary&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">UserRooms&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kd">static&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">SensitiveWords&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s">&amp;#34;è¨å­&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ç¬¨è›‹&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ç™½ç—´&amp;#34;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å‰ç½®éœ€æ±‚ï¼šè¨˜å¾—åœ¨ Program.cs ä¸­è¨­å®š SignalR æœå‹™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// builder.Services.AddSignalR();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// app.MapHub&amp;lt;ChatHub&amp;gt;(&amp;#34;/chatHub&amp;#34;);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŠ å…¥æˆ¿é–“çš„æ–¹æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">JoinRoom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">roomName&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å·²åœ¨å…¶ä»–æˆ¿é–“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">UserRooms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryGetValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">string?&lt;/span> &lt;span class="n">oldRoom&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¾èˆŠæˆ¿é–“ç§»é™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Groups&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RemoveFromGroupAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">oldRoom&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€šçŸ¥èˆŠæˆ¿é–“çš„å…¶ä»–ç”¨æˆ¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">oldRoom&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveSystemMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">$&amp;#34;ç”¨æˆ¶ {user} é›¢é–‹äº†æˆ¿é–“&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å°‡ç”¨æˆ¶åŠ å…¥æ–°æˆ¿é–“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Groups&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddToGroupAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">roomName&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ›´æ–°ç”¨æˆ¶æˆ¿é–“è¨˜éŒ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UserRooms&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">roomName&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€šçŸ¥æ–°æˆ¿é–“çš„æ‰€æœ‰ç”¨æˆ¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">roomName&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveSystemMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">$&amp;#34;ç”¨æˆ¶ {user} åŠ å…¥äº†æˆ¿é–“&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">SendMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ContainsSensitiveWords&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">foundWord&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Caller&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveSystemMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">$&amp;#34;æ¶ˆæ¯åŒ…å«æ•æ„Ÿè©ã€Œ{foundWord}ã€ï¼Œå·²è¢«æ””æˆª&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æª¢æŸ¥ç”¨æˆ¶æ‰€åœ¨çš„æˆ¿é–“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">UserRooms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryGetValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">string?&lt;/span> &lt;span class="n">room&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åªå‘åŒä¸€æˆ¿é–“çš„ç”¨æˆ¶ç™¼é€æ¶ˆæ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">room&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">ContainsSensitiveWords&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">foundWord&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">foundWord&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">SensitiveWords&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FirstOrDefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">word&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">StringComparison&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OrdinalIgnoreCase&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">foundWord&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç•¶æ–°å®¢æˆ¶ç«¯é€£æ¥æ™‚è§¸ç™¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">OnConnectedAsync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Context.ConnectionId: æ¯å€‹é€£æ¥çš„å”¯ä¸€æ¨™è­˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;UserConnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OnConnectedAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç•¶å®¢æˆ¶ç«¯æ–·é–‹é€£æ¥æ™‚è§¸ç™¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">OnDisconnectedAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Exception&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="n">exception&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç”¨æˆ¶æ–·é–‹é€£æ¥æ™‚æ¸…ç†æˆ¿é–“è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">UserRooms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">TryGetValue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">out&lt;/span> &lt;span class="kt">string?&lt;/span> &lt;span class="n">room&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Groups&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RemoveFromGroupAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">room&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UserRooms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;UserDisconnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OnDisconnectedAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">exception&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="groups-ç›¸é—œçš„é‡è¦æ–¹æ³•">Groups ç›¸é—œçš„é‡è¦æ–¹æ³•
&lt;/h4>&lt;ul>
&lt;li>&lt;strong>Groups.AddToGroupAsync&lt;/strong>ï¼šå°‡ä½¿ç”¨è€…åŠ å…¥æˆ¿é–“&lt;/li>
&lt;li>&lt;strong>Groups.RemoveFromGroupAsync&lt;/strong>ï¼šå°‡ä½¿ç”¨è€…å¾æˆ¿é–“ä¸­ç§»é™¤&lt;/li>
&lt;li>&lt;strong>Clients.Group&lt;/strong>ï¼šå‘æŒ‡å®šæˆ¿é–“çš„ä½¿ç”¨è€…ç™¼é€æ¶ˆæ¯&lt;/li>
&lt;/ul>
&lt;h3 id="2-å®¢æˆ¶ç«¯å¯¦ç¾">2. å®¢æˆ¶ç«¯å¯¦ç¾
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>SignalR èŠå¤©å®¤&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">#&lt;/span>&lt;span class="nn">messagesList&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="kc">solid&lt;/span> &lt;span class="mh">#ccc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">overflow-y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin-bottom&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="nt">label&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">inline-block&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="nt">input&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">#&lt;/span>&lt;span class="nn">sendButton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin-top&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">system-message&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mh">#ff4444&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-style&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">italic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>SignalR èŠå¤©å®¤&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- æ·»åŠ æˆ¿é–“é¸æ“‡ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;form-group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;roomInput&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æˆ¿é–“:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;roomInput&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;joinButton&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>åŠ å…¥æˆ¿é–“&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;form-group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;userInput&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç”¨æˆ¶å:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;userInput&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;form-group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æ¶ˆæ¯:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messageInput&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç™¼é€&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å»ºç«‹é€£æ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">connection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">signalR&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HubConnectionBuilder&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">withUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/chatHub&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Hub çš„è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">disabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¨»å†Šæ¥æ”¶æ¶ˆæ¯çš„è™•ç†å‡½æ•¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ReceiveMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">message&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">message&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç†ç”¨æˆ¶é€£æ¥äº‹ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;UserConnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`ç”¨æˆ¶å·²é€£æ¥ (&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">)`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;UserDisconnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`ç”¨æˆ¶å·²æ–·é–‹é€£æ¥ (&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">)`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ReceiveSystemMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">message&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">div&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">div&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`ç³»çµ±æç¤º: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">message&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">div&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">className&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;system-message&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å•Ÿå‹•é€£æ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">disabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç™¼é€æ¶ˆæ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;userInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// èª¿ç”¨æœå‹™å™¨ç«¯çš„ SendMessage æ–¹æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;SendMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">message&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preventDefault&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ·»åŠ åŠ å…¥æˆ¿é–“æŒ‰éˆ•çš„è™•ç†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;joinButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;userInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">room&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;roomInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">user&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">room&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;è«‹è¼¸å…¥ç”¨æˆ¶åå’Œæˆ¿é–“å&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;JoinRoom&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">room&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preventDefault&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ¸¬è©¦æ•ˆæœ">æ¸¬è©¦æ•ˆæœ
&lt;/h2>&lt;p>é€™æ™‚å€™é‹è¡Œä½ çš„å°ˆæ¡ˆï¼ˆä½ æ‡‰è©²æœ‰è¨˜å¾—åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä¸€èµ·è¨­å®šé &lt;code>launchSettings.json&lt;/code> å°å§ï¼‰ï¼Œè¼¸å…¥ &lt;code>localhost:5000/index.html&lt;/code>ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„ç•«é¢ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-1.png"
width="418"
height="682"
srcset="https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-1_hu_44d976cdfdb2f12e.png 480w, https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-1_hu_e7f8870ac6e8d84d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="61"
data-flex-basis="147px"
>&lt;/p>
&lt;p>ä¸€é€²å…¥çš„æ™‚å€™æ²’æœ‰ç‰¹åˆ¥æŒ‡å®šæˆ¿é–“ï¼Œå¦‚æœ Anthea é€²å…¥åˆ°æˆ¿é–“ï¼ˆæ˜æ˜Ÿä¸‰ç¼ºä¸€ï¼‰ï¼Œé€™æ™‚å€™ä»–çš„è¨Šæ¯åªæœƒç™¼çµ¦åŒä¸€å€‹æˆ¿é–“è£¡çš„äººï¼Œæ²’æœ‰é€²å…¥åŒä¸€å€‹æˆ¿é–“çš„ Ensui å°±æ”¶ä¸åˆ°è¨Šæ¯äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-2.png"
width="797"
height="909"
srcset="https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-2_hu_9f5ef2b8e9876611.png 480w, https://anthea-wu.github.io/post/%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%9A%84%E5%B0%8F%E6%88%BF%E9%96%93/SignalR-2_hu_b3572346f7301956.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="210px"
>&lt;/p></description></item><item><title>.NET SignalR çš„å­¸ç¿’èˆ‡æ‡‰ç”¨ï¼ˆ1ï¼‰</title><link>https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/</link><pubDate>Sat, 04 Jan 2025 21:00:00 +0800</pubDate><guid>https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/</guid><description>&lt;h2 id="signalr-ç°¡ä»‹">SignalR ç°¡ä»‹
&lt;/h2>&lt;p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¸ SignalRï¼Œå¯ä»¥æƒ³åƒå®ƒæ˜¯ä¸€å€‹å¹«ä½ è™•ç†å³æ™‚é€šè¨Šçš„å·¥å…·ã€‚å®ƒæœƒè‡ªå‹•å¹«ä½ æå®šèª°åœ¨ç·šä¸Šã€èª°ä¸‹ç·šäº†ï¼Œé‚„èƒ½è®“ä½ è¼•é¬†æŠŠè¨Šæ¯é€çµ¦æ‰€æœ‰äººæˆ–æŒ‡å®šçš„äººï¼Œè€Œä¸”å¯ä»¥æ‡‰ä»˜å¾ˆå¤šäººåŒæ™‚ä½¿ç”¨ã€‚ç°¡å–®ä¾†èªªï¼Œä¸ç”¨ç…©æƒ±é‚£äº›è¤‡é›œçš„åº•å±¤ç´°ç¯€ï¼ŒSignalR å¹«ä½ åŒ…å¥½äº†ï¼&lt;/p>
&lt;h2 id="å‚³è¼¸å”è­°">å‚³è¼¸å”è­°
&lt;/h2>&lt;p>ä½ å¯èƒ½æœƒæƒ³å•ï¼ŒSignalR åˆ°åº•æ€éº¼åšåˆ°è®“è¨Šæ¯é€™éº¼å³æ™‚çš„å‘¢ï¼Ÿå…¶å¯¦å®ƒæœƒè‡ªå‹•å¹«ä½ é¸æ“‡æœ€é©åˆçš„å‚³è¼¸æ–¹å¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>WebSocket&lt;/strong>ï¼šå°±åƒä¸€ç›´é–‹è‘—çš„å°ˆç·šï¼Œé€Ÿåº¦æœ€å¿«ï¼Œä¹Ÿæ˜¯é¦–é¸ã€‚&lt;/li>
&lt;li>&lt;strong>Server-Sent Events (SSE)&lt;/strong>ï¼šä¼ºæœå™¨ä¸»å‹•æ¨æ¶ˆæ¯çµ¦ä½ ï¼Œåƒè¨‚é–±æ–°èä¸€æ¨£ã€‚&lt;/li>
&lt;li>&lt;strong>Long Polling&lt;/strong>ï¼šä¸æ–·å•ä¼ºæœå™¨ã€Œæœ‰æ–°æ¶ˆæ¯å—ï¼Ÿã€ä¾†é”æˆå³æ™‚æ•ˆæœã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸ç”¨æ“”å¿ƒæ€éº¼æŒ‘ï¼ŒSignalR æœƒå¹«ä½ æå®šï¼&lt;/p>
&lt;h2 id="å¯¦ä½œæ­¥é©Ÿ">å¯¦ä½œæ­¥é©Ÿ
&lt;/h2>&lt;h3 id="1-å»ºç«‹å°ˆæ¡ˆä¸¦æ·»åŠ -signalr">1. å»ºç«‹å°ˆæ¡ˆä¸¦æ·»åŠ  SignalR
&lt;/h3>&lt;p>åœ¨ .NET Core/.NET 5+ ä¸­ï¼ŒSignalR å·²ç¶“è¢«æ•´åˆåˆ° ASP.NET Core æ¡†æ¶ä¸­äº†ï¼Œæ‰€ä»¥æˆ‘å€‘ä¸éœ€è¦é¡å¤–å®‰è£ SignalR çš„æœå‹™å™¨ç«¯å¥—ä»¶ï¼Œåªéœ€è¦åœ¨ &lt;code>Program.cs&lt;/code> ä¸­é…ç½® SignalRï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">WebApiDemo.Hubs&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">builder&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">WebApplication&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ·»åŠ  SignalR æœå‹™åˆ° DI å®¹å™¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSignalR&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseStaticFiles&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UseRouting&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// å•Ÿç”¨è·¯ç”±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é…ç½® SignalR Hub è·¯ç”±&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapHub&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ChatHub&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s">&amp;#34;/chatHub&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­ç½®é»˜èªé é¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapGet&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">Results&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">File&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;wwwroot/index.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;text/html&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-å‰µå»º-hub">2. å‰µå»º Hub
&lt;/h3>&lt;p>Hub æ˜¯ SignalR çš„æ ¸å¿ƒè§’è‰²ï¼Œå¯ä»¥æƒ³æˆã€Œè¨Šæ¯å°å¹«æ‰‹ã€ï¼Œè² è²¬åœ¨ç”¨æˆ¶çš„ç€è¦½å™¨å’Œä¼ºæœå™¨ä¹‹é–“å‚³éè¨Šæ¯ã€‚åŸºæœ¬çš„ Hub éœ€è¦åšçš„äº‹å¾ˆç°¡å–®ï¼šæ”¶åˆ°ä½¿ç”¨è€…çš„è¨Šæ¯ä¸¦è½‰é€çµ¦å…¶ä»–äººï¼Œè™•ç†ä½¿ç”¨è€…é€£ç·šå’Œæ–·ç·šçš„é€šçŸ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-csharp" data-lang="csharp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.SignalR&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">WebApiDemo.Hubs&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ChatHub&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Hub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é€™å€‹æ–¹æ³•ç”¨ä¾†æ¥æ”¶ä½¿ç”¨è€…çš„è¨Šæ¯ä¸¦å»£æ’­çµ¦æ‰€æœ‰äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">SendMessage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ReceiveMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨è€…é€£ç·šæ™‚æœƒè§¸ç™¼é€™è£¡ï¼ŒæŠŠæ–°åŠ å…¥çš„ä½¿ç”¨è€…é€šçŸ¥çµ¦å¤§å®¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">OnConnectedAsync&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;UserConnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OnConnectedAsync&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨è€…æ–·ç·šæ™‚æœƒåŸ·è¡Œé€™è£¡ï¼ŒæŠŠèª°é›¢é–‹çš„é€šçŸ¥ç™¼çµ¦æ‰€æœ‰äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kd">override&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="n">Task&lt;/span> &lt;span class="n">OnDisconnectedAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Exception&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="n">exception&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="n">Clients&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">All&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SendAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;UserDisconnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConnectionId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">await&lt;/span> &lt;span class="k">base&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OnDisconnectedAsync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">exception&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="hub-é‡è¦å±¬æ€§">Hub é‡è¦å±¬æ€§
&lt;/h4>&lt;p>&lt;strong>Clients&lt;/strong>ï¼šè² è²¬æŠŠè¨Šæ¯ç™¼é€çµ¦èª°ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Clients.All&lt;/code>ï¼šé€çµ¦æ‰€æœ‰äººï¼Œä¸ç®¡æ˜¯èª°&lt;/li>
&lt;li>&lt;code>Clients.Caller&lt;/code>ï¼šåªå›å‚³çµ¦ç™¼é€è¨Šæ¯çš„äºº&lt;/li>
&lt;li>&lt;code>Clients.Others&lt;/code>ï¼šé€çµ¦é™¤äº†ç™¼è¨Šæ¯çš„äººä»¥å¤–çš„æ‰€æœ‰äºº&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Context&lt;/strong>ï¼šæä¾›é—œæ–¼é€™æ¬¡é€£ç·šçš„è³‡è¨Šï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>Context.ConnectionId&lt;/code>ï¼šæ¯å€‹ä½¿ç”¨è€…é€£ä¸Šä¾†å¾Œéƒ½æœ‰ä¸€å€‹ç¨ä¸€ç„¡äºŒçš„ç·¨è™Ÿ&lt;/li>
&lt;li>&lt;code>Context.User&lt;/code>ï¼šä½¿ç”¨è€…çš„èº«ä»½è³‡è¨Šï¼Œé©ç”¨åœ¨éœ€è¦ç™»å…¥æˆ–èªè­‰çš„æ‡‰ç”¨ç¨‹å¼&lt;/li>
&lt;/ul>
&lt;h3 id="3-å®¢æˆ¶ç«¯å¯¦ç¾">3. å®¢æˆ¶ç«¯å¯¦ç¾
&lt;/h3>&lt;p>åœ¨ root ç›®éŒ„åº•ä¸‹å»ºç«‹ &lt;code>wwwroot&lt;/code> çš„è³‡æ–™å¤¾ï¼Œä¸¦ä¸”å»ºç«‹ &lt;code>index.html&lt;/code> è¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>SignalR èŠå¤©å®¤&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">#&lt;/span>&lt;span class="nn">messagesList&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="kc">solid&lt;/span> &lt;span class="mh">#ccc&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">300&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">overflow-y&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">auto&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">margin-bottom&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="nt">label&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">inline-block&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">form-group&lt;/span> &lt;span class="nt">input&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">#&lt;/span>&lt;span class="nn">sendButton&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">margin-top&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>SignalR èŠå¤©å®¤&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;form-group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;userInput&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç”¨æˆ¶å:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;userInput&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;form-group&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>æ¶ˆæ¯:&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;messageInput&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç™¼é€&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å»ºç«‹é€£æ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">connection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">signalR&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">HubConnectionBuilder&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">withUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/chatHub&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// Hub çš„è·¯ç”±
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">disabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¨»å†Šæ¥æ”¶æ¶ˆæ¯çš„è™•ç†å‡½æ•¸
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ReceiveMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">message&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">message&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è™•ç†ç”¨æˆ¶é€£æ¥äº‹ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;UserConnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`ç”¨æˆ¶å·²é€£æ¥ (&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">)`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;UserDisconnected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sb">`ç”¨æˆ¶å·²æ–·é–‹é€£æ¥ (&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">connectionId&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">)`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">li&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;div&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">textContent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">msg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">li&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">style&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">color&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messagesList&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">li&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å•Ÿå‹•é€£æ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">start&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">disabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç™¼é€æ¶ˆæ¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sendButton&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;click&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;userInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// èª¿ç”¨æœå‹™å™¨ç«¯çš„ SendMessage æ–¹æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">connection&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;SendMessage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">message&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;messageInput&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">event&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">preventDefault&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€™æ™‚å€™é‹è¡Œä½ çš„å°ˆæ¡ˆï¼ˆè¨˜å¾—è¨­å®š &lt;code>launchSettings.json&lt;/code>ï¼‰ï¼Œè¼¸å…¥ &lt;code>localhost:5000/index.html&lt;/code>ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„ç•«é¢ã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-1.png"
width="365"
height="632"
srcset="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-1_hu_89344af5111a86ec.png 480w, https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-1_hu_1fae0dd31fee068.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="57"
data-flex-basis="138px"
>&lt;/p>
&lt;p>å¦‚æœä½ å†å¤šé–‹ä¸€å€‹æ–°çš„ tabï¼Œå°±æœƒçœ‹åˆ°ç¬¬ä¸€å€‹ tab å¤šäº†ä¸€è¡Œé€£æ¥çš„ç”¨æˆ¶ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-2.png"
width="716"
height="749"
srcset="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-2_hu_17ca8e4a55d81549.png 480w, https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-2_hu_e461304e71175446.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="95"
data-flex-basis="229px"
>&lt;/p>
&lt;p>å…©å€‹ä¸åŒçš„äººå¯ä»¥è¼¸å…¥è¨Šæ¯ï¼ŒæŒ‰ä¸‹ç™¼é€å¾Œï¼Œå¦å¤–ä¸€é‚Šä¹Ÿæœƒæ”¶åˆ°ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-3.png"
width="667"
height="745"
srcset="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-3_hu_3e166db4e7d39449.png 480w, https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-3_hu_17e6c9068f30a097.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="89"
data-flex-basis="214px"
>&lt;/p>
&lt;p>æœ‰äººé›¢é–‹çš„è©±å°±å¯ä»¥é€å‡ºé€šçŸ¥ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-4.png"
width="366"
height="640"
srcset="https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-4_hu_89ce57513092bb5e.png 480w, https://anthea-wu.github.io/post/%E7%B0%A1%E5%96%AE%E7%B6%B2%E9%A0%81%E8%81%8A%E5%A4%A9%E5%AE%A4/signalR-4_hu_555d6b7285c441b6.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="57"
data-flex-basis="137px"
>&lt;/p></description></item><item><title>å¯ä»¥æŸ¥è©¢çš„ä¸‹æ‹‰å¼é¸å–® (2)</title><link>https://anthea-wu.github.io/post/vue-selected-dropdown-2/</link><pubDate>Sun, 14 Aug 2022 01:13:23 +0800</pubDate><guid>https://anthea-wu.github.io/post/vue-selected-dropdown-2/</guid><description>&lt;p>&lt;a class="link" href="../vue-selected-dropdown-1" >ä¸Šä¸€ç¯‡&lt;/a>æåˆ°åŸºæœ¬çš„ä¸‹æ‹‰å¼é¸å–®æ‡‰ç”¨ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†è¦è¨˜éŒ„çš„æ˜¯å¤šå€‹é¸å–®å½¼æ­¤é€£å‹•æ™‚çš„æ‡‰ç”¨ã€‚&lt;/p>
&lt;p>ä»¥å‰ä¸€ç¯‡å·¥ä½œä¸Šçš„ä¾‹å­ä¾†èªªï¼Œé€šå¸¸æŠŠè³‡æ–™ç”¨ç¸£å¸‚ã€é„‰é®å¸‚å€ã€åœ°æ®µé€™ä¸‰ç¨®å±¤ç´šå€åˆ†é–‹ä¾†ï¼Œæ‰€ä»¥ç•¶æˆ‘é¸åˆ°å°åŒ—å¸‚çš„æ™‚å€™ï¼Œé„‰é®å¸‚å€çš„é¸å–®è£¡å°±ä¸æ‡‰è©²æœƒå‡ºç¾è¥¿å±¯å€çš„é …ç›®ï¼Œé€™å€‹å°±æ˜¯æˆ‘æ‰€è¬‚çš„é€£å‹• â€” â€” ç•¶å…¶ä¸­ä¸€å€‹é¸é …çš„å€¼æ”¹è®Šï¼Œå°±æœƒè®“å…¶ä»–çš„é¸å–®å…§å®¹ä¹Ÿè·Ÿè‘—ä¸åŒã€‚&lt;/p>
&lt;h2 id="äº‹å‰æº–å‚™">äº‹å‰æº–å‚™
&lt;/h2>&lt;h3 id="ç°¡å–®çš„-api">ç°¡å–®çš„ API
&lt;/h3>&lt;p>æ¸…å–®ä¾†æºä¸€æ¨£æ˜¯&lt;a class="link" href="https://easymap.land.moi.gov.tw/Home" target="_blank" rel="noopener"
>åœ°ç±åœ–è³‡ç¶²è·¯ä¾¿æ°‘æœå‹™ç³»çµ±&lt;/a>ï¼Œæˆ‘åªæ•´ç†äº†å°ä¸­å¸‚çš„è¥¿å±¯å€å’Œè¥¿å€é€™å…©å€‹è¡Œæ”¿å€åº•ä¸‹çš„æ®µåä½œç‚ºç¯„ä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.Mvc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Newtonsoft.Json&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">bootstrap_selected_sample.Controllers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[ApiController]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Route(&amp;#34;api/[controller]&lt;/span>&lt;span class="s">&amp;#34;)]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CodeController&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ControllerBase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [HttpGet]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IActionResult&lt;/span> &lt;span class="n">Counties&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;files/county.json&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">info&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">SimpleInfo&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Ok&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [HttpGet(&amp;#34;{county}&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IActionResult&lt;/span> &lt;span class="n">Towns&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">county&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">county&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToUpper&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="s">&amp;#34;files/taichung.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">info&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">SimpleInfo&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Ok&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [HttpGet(&amp;#34;{county}/{town}&amp;#34;)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IActionResult&lt;/span> &lt;span class="n">Sections&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">county&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">town&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">county&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span> &lt;span class="n">when&lt;/span> &lt;span class="n">town&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="s">&amp;#34;06&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;files/xitun.json&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s">&amp;#34;B&amp;#34;&lt;/span> &lt;span class="n">when&lt;/span> &lt;span class="n">town&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="s">&amp;#34;04&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;files/xi.json&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">info&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">ComplexInfo&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Ok&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">reader&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">StreamReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">readToEnd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">reader&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadToEnd&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">readToEnd&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">SimpleInfo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Id&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">ComplexInfo&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">SimpleInfo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">OfficeCode&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¥—ç”¨-bootstrap-select">å¥—ç”¨ bootstrap-select
&lt;/h3>&lt;p>é¦–å…ˆï¼Œæˆ‘å€‘ä¾ç…§ä¸Šæ¬¡çš„æ–¹æ³•ï¼Œä½¿ç”¨ &lt;code>Vue.$nextTick()&lt;/code> ä¾†è©¦è©¦çœ‹æ•ˆæœæ€éº¼æ¨£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- sample.html --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container my-5&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;row&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-12 mt-5 row&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;row g-3 align-items-center&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-form-label&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç¸£å¸‚&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">select&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">v-model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;selected.county&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">option&lt;/span> &lt;span class="na">v-for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;c in code.county&amp;#34;&lt;/span> &lt;span class="na">:value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{c.name}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">option&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">select&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-form-label&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>é„‰é®å¸‚å€&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">select&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;town-select&amp;#34;&lt;/span> &lt;span class="na">v-model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;selected.town&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">option&lt;/span> &lt;span class="na">v-for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;t in code.town&amp;#34;&lt;/span> &lt;span class="na">:value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;t&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{t.name}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">option&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">select&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-form-label&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>åœ°æ®µ&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">select&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;section-select&amp;#34;&lt;/span> &lt;span class="na">v-model&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;selected.section&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">option&lt;/span> &lt;span class="na">v-for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;s in code.section&amp;#34;&lt;/span> &lt;span class="na">:value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{s.name}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">option&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">select&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-12 mt-3 row&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-4&amp;#34;&lt;/span> &lt;span class="na">v-if&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;selected.county !== null &amp;amp;&amp;amp; selected.town !== null &amp;amp;&amp;amp; selected.section !== null&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> å·²ç¶“é¸æ“‡ï¼š{{selected.county.name}} {{selected.town.name}} {{selected.section.name}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sample.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createApp&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">code&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">town&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">section&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selected&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">town&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">section&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getCounties&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">town&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">section&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;./api/code&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getTowns&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">town&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">section&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sb">`./api/code/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">town&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#town-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getSections&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">section&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sb">`./api/code/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">selected&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">town&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">section&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#section-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">watch&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;selected.county&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">newVal&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getTowns&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;selected.town&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">newVal&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newVal&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getSections&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mounted&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCounties&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#app&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://anthea-wu.github.io/vue-selected-dropdown-2/Bug1.gif"
loading="lazy"
>&lt;/p>
&lt;p>åŸ·è¡Œä¹‹å¾Œä½ æ‡‰è©²å¯ä»¥ç™¼ç¾å…©å€‹å•é¡Œï¼šé‚„æ²’æœ‰åˆå§‹åŒ–éçš„é¸å–®æœƒé•·çš„å¾ˆé†œï¼Œå’Œæˆ‘å€‘é æœŸçš„æ¨£å¼ä¸å¤ªä¸€æ¨£ï¼Œä»¥åŠï¼Œæˆ‘æ˜æ˜è³‡æ–™å…§å®¹æ›´æ–°äº†ï¼Œä½†ç‚ºç”šéº¼ç•«é¢ä¸Šä»ç„¶æ˜¯èˆŠçš„è³‡æ–™å‘¢ï¼Ÿæˆ‘çš„è³‡æ–™åˆå»å“ªè£¡äº† ğŸ˜ &lt;/p>
&lt;hr>
&lt;h2 id="refresh-ui">Refresh UI
&lt;/h2>&lt;p>åœ¨å®˜æ–¹æ–‡ä»¶ Methods çš„é é¢ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€å€‹å«åš refresh çš„æ–¹æ³•ï¼Œé€™å€‹æ–¹æ³•å¯ä»¥è®“æˆ‘å€‘æ›´æ–°ç•«é¢ä¸Šçš„ UI å‘ˆç¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/vue-selected-dropdown-2/Refresh.png"
width="1100"
height="107"
srcset="https://anthea-wu.github.io/post/vue-selected-dropdown-2/Refresh_hu_f356c17556c4a3ac.png 480w, https://anthea-wu.github.io/post/vue-selected-dropdown-2/Refresh_hu_d9c6029128547ff7.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1028"
data-flex-basis="2467px"
>&lt;/p>
&lt;p>æ—¢ç„¶å®˜æ–¹éƒ½æä¾›äº†é€™å€‹ç”¨æ³•ï¼Œé‚£æˆ‘å€‘å°±ä¾ç…§å»ºè­°ä¿®æ”¹ä¸€ä¸‹ç¨‹å¼ç¢¼å§ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sample.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createApp&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">(){...},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getCounties&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;./api/code&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¨˜å¾—è¦åŒ…åœ¨ Vue.nextTick() ä¸­æ‰æœ‰æ•ˆå–”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;refresh&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// æ›´æ–° county
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#town-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;refresh&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// æ›´æ–° town
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#section-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;refresh&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// æ›´æ–° section
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getTowns&lt;/span>&lt;span class="p">(){...},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getSections&lt;/span>&lt;span class="p">(){...},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">watch&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{...},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mounted&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCounties&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¸€æ¬¡å…¨éƒ¨åˆå§‹åŒ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#app&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://anthea-wu.github.io/vue-selected-dropdown-2/Bug2.gif"
loading="lazy"
>&lt;/p>
&lt;p>è³‡æ–™çœ‹èµ·ä¾†æœ‰è¢«æ­£ç¢ºçš„æ›´æ–°åˆ° UI ä¸Šäº†ï¼Œä½†ç‚ºç”šéº¼æˆ‘çš„æ¸…å–®çœ‹èµ·ä¾†é‚„æ˜¯æ€ªæ€ªçš„å’§ ğŸ˜µ&lt;/p>
&lt;p>å…¶å¯¦ï¼Œåœ¨å®˜æ–¹çš„å®Œæ•´ç¯„ä¾‹ä¸­ï¼Œæ˜¯å…ˆæ‰¾åˆ°è¦åˆªé™¤çš„é¸é …ï¼Œç§»é™¤ä¹‹å¾Œæ‰é€²è¡Œ refreshï¼Œä½†ä¸æ›‰å¾—ç‚ºç”šéº¼ï¼Œå°±ç®—æŒ‰ç…§å®˜æ–¹çš„ç¯„ä¾‹æˆ‘ä¹Ÿç„¡æ³•æ­£å¸¸ç§»é™¤ ğŸ˜µ&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/vue-selected-dropdown-2/RefreshExample.png"
width="1100"
height="525"
srcset="https://anthea-wu.github.io/post/vue-selected-dropdown-2/RefreshExample_hu_d45709ec1473acda.png 480w, https://anthea-wu.github.io/post/vue-selected-dropdown-2/RefreshExample_hu_6965d350c4f022d8.png 1024w"
loading="lazy"
alt="å®˜æ–¹æ–‡ä»¶ä¸Šé—œæ–¼ refresh çš„ä½¿ç”¨ç¯„ä¾‹"
class="gallery-image"
data-flex-grow="209"
data-flex-basis="502px"
>&lt;/p>
&lt;h3 id="ç”¨-destoy-ä¿®æ­£">ç”¨ Destoy ä¿®æ­£
&lt;/h3>&lt;p>æ‰€ä»¥æœ€å¾Œæˆ‘æ¡ç”¨çš„æ–¹æ³•ï¼Œæ˜¯ç›´æ¥æŠŠæ•´å€‹å…ƒä»¶ destroy æ‰ï¼Œæ›´æ–°è³‡æ–™çš„æ™‚å€™å†é‡æ–°å»ºç«‹ä¸€å€‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å…ˆéŠ·æ¯€å†é‡å»º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;destroy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#town-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;destroy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#town-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#section-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;destroy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#section-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://anthea-wu.github.io/vue-selected-dropdown-2/Bug3.gif"
loading="lazy"
>&lt;/p>
&lt;p>çµ‚æ–¼å¯ä»¥çœ‹åˆ°æ­£ç¢ºçš„è³‡æ–™æœ‰è¢«å¥½å¥½åœ°å‘ˆç¾åœ¨ UI ä¸Šäº† ğŸŠ&lt;/p>
&lt;blockquote>
&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://developer.snapappointments.com/bootstrap-select/examples/" target="_blank" rel="noopener"
>bootstrap-select å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;/ul>&lt;/blockquote></description></item><item><title>å¯ä»¥æŸ¥è©¢çš„ä¸‹æ‹‰å¼é¸å–® (1)</title><link>https://anthea-wu.github.io/post/vue-selected-dropdown-1/</link><pubDate>Sun, 07 Aug 2022 00:58:03 +0800</pubDate><guid>https://anthea-wu.github.io/post/vue-selected-dropdown-1/</guid><description>&lt;p>åœ¨å·¥ä½œä¸Šï¼ŒåŸºæœ¬éƒ½éœ€è¦é‡å°å„²å­˜çš„è³‡æ–™é€²è¡Œåˆ†é¡ï¼Œè€Œåœ¨åœ°ç†è³‡è¨Šçš„é ˜åŸŸä¸Šï¼Œæœ€å¸¸ä½¿ç”¨çš„ä¸€ç¨®åˆ†é¡æ–¹å¼å°±æ˜¯åœ°ç±ï¼Œåˆå¯ä»¥ç´°åˆ†ç‚ºç¸£å¸‚ã€é„‰é®å¸‚å€ã€åœ°æ®µç­‰è³‡è¨Šã€‚é‡å°é€™äº›åˆ†é¡çš„åç¨±ï¼Œç‰¹åˆ¥æ˜¯åœ°æ®µçš„å±¤ç´šï¼Œé€šå¸¸éƒ½æœƒæœ‰å¹¾åç­†è³‡æ–™ï¼Œå¦‚æœå–®ç´”ä½¿ç”¨ä¸‹æ‹‰å¼é¸å–®ï¼Œå°±æœƒæŠŠæ™‚é–“æµªè²»åœ¨èŒ«èŒ«å­—æµ·è£¡é¢é€²è¡Œæœå°‹ã€‚&lt;/p>
&lt;p>å¦‚æœä½¿ç”¨çš„å‰ç«¯æœ‰æ­é… Bootstrap æ¡†æ¶ï¼Œé€šå¸¸æœƒæŸ¥è©¢åˆ° bootstrap-select é€™å€‹å¥½ç”¨çš„å¥—ä»¶ ğŸ˜† æ¥ä¸‹ä¾†å°±è®“æˆ‘å€‘çœ‹ä¸€ä¸‹æ­é…ç°¡å–®çš„ API ï¼Œè¦æ€éº¼æŠŠ bootstrap-select å’Œ Vue ä¸€èµ·ä½¿ç”¨å§ã€‚&lt;/p>
&lt;h2 id="æº–å‚™è³‡æ–™ä¸¦å»ºç«‹-api">æº–å‚™è³‡æ–™ä¸¦å»ºç«‹ API
&lt;/h2>&lt;p>åˆ©ç”¨&lt;a class="link" href="https://easymap.land.moi.gov.tw/Home" target="_blank" rel="noopener"
>åœ°ç±åœ–è³‡ç¶²è·¯ä¾¿æ°‘æœå‹™ç³»çµ±&lt;/a>å–å¾—ç›¸é—œçš„ç¸£å¸‚é„‰é®æ¸…å–®å¾Œï¼Œæ•´ç†æˆ JSON æª”ï¼Œå†ä½¿ç”¨ API çš„æ–¹å¼æŠŠè³‡æ–™å‚³é€åˆ°å‰ç«¯ã€‚ä½œç‚ºç°¡å–®çš„ç¤ºç¯„ï¼Œæˆ‘åªæœ‰æ•´ç†å‡ºå°ä¸­å¸‚è¥¿å±¯å€ä»¥åŠæ–°åŒ—å¸‚ä¸‰å³½å€åº•ä¸‹çš„æ‰€æœ‰åœ°æ®µè™Ÿã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.Mvc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Newtonsoft.Json&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">bootstrap_selected_sample.Controllers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[ApiController]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[Route(&amp;#34;api/[controller]&lt;/span>&lt;span class="s">&amp;#34;)]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">CodeController&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ControllerBase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na"> [HttpGet]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">IActionResult&lt;/span> &lt;span class="n">Counties&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;files/county.json&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">info&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">JsonConvert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">DeserializeObject&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">SimpleInfo&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;(&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Ok&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">ReadFromJson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">reader&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">StreamReader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">readToEnd&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">reader&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadToEnd&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">readToEnd&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">SimpleInfo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Id&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">Name&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">set&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è¼‰å…¥å¥—ä»¶">è¼‰å…¥å¥—ä»¶
&lt;/h2>&lt;p>æ–¹ä¾¿èµ·è¦‹ï¼Œä¸‹é¢çš„ç¯„ä¾‹éƒ½æœƒä½¿ç”¨ç›´æ¥å¼•å…¥ CDN çš„æ–¹å¼ã€‚å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ &lt;a class="link" href="https://developer.snapappointments.com/bootstrap-select/" target="_blank" rel="noopener"
>bootstrap-select å®˜æ–¹ç¶²ç«™&lt;/a>ä¸Šæ‰€æä¾›çš„ CDN ç‰ˆæœ¬æ˜¯æ­é… bootstrap 4.Xï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨ bootstrap 5 çš„è©±ï¼Œè¦è¨˜å¾—åˆ° &lt;a class="link" href="https://github.com/snapappointments/bootstrap-select/" target="_blank" rel="noopener"
>bootstrap-select çš„ GitHub&lt;/a> æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬çš„ CDN ç¶²å€å–”ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä½¿ç”¨åˆ°çš„å¥—ä»¶å’Œç‰ˆæœ¬ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Version&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Bootstrap&lt;/td>
&lt;td>5.0.2 (css + js)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bootstrap-select&lt;/td>
&lt;td>1.14.0-beta3 (css + js)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Vue.js&lt;/td>
&lt;td>3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>jQuery&lt;/td>
&lt;td>3.6.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>axios&lt;/td>
&lt;td>ç„¡æŒ‡å®šç‰ˆæœ¬&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="ä½¿ç”¨-bootstrap-select">ä½¿ç”¨ bootstrap-select
&lt;/h3>&lt;p>æ¥ä¸‹ä¾†å°±è¦é–‹å§‹ä½¿ç”¨ bootstrap-select äº†ã€‚æŒ‰ç…§å®˜æ–¹æ–‡ä»¶çš„å¯«æ³•ï¼Œæœ€å¿«çš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨ select ä¸­åŠ å…¥ &lt;code>selectpicker&lt;/code> çš„ class å±¬æ€§ï¼Œæˆ–æ˜¯ä½¿ç”¨ JavaScript ä¾†é€²è¡Œåˆå§‹åŒ–ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤§è‡´ä¸ŠçŸ¥é“æ€éº¼ä½¿ç”¨å¾Œï¼Œæ¥è‘—æˆ‘å€‘è¦åŠ å…¥ API æ‰€å›å‚³çš„è³‡æ–™ï¼Œé¦–å…ˆè©¦è©¦çœ‹æœ€ç°¡å–®çš„å…¨å°ç¸£å¸‚æ¸…å–®å§ï¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- sample.html --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container my-5&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;row&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-12 mt-5 row&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;row g-3 align-items-center&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-form-label&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ç¸£å¸‚&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;col-auto&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">select&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;county-select&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;selectpicker&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">option&lt;/span> &lt;span class="na">v-for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;c in code.county&amp;#34;&lt;/span> &lt;span class="na">:value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;c.code&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{c.name}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">option&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">select&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sample.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createApp&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">code&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selected&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getCounties&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;./api/code&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mounted&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCounties&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#app&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç•¶ä½ ç…§è‘—æ‰“ä¸Šé¢çš„å…§å®¹ä¸¦ä¸”é–‹å•Ÿç¶²é ä¹‹å¾Œï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°ä½ çš„ä¸‹æ‹‰å¼é¸å–®è£¡é¢ç”šéº¼éƒ½æ²’æœ‰ï¼Œä¸¦ä¸”ä¹Ÿæ²’æœ‰ä»»ä½•çš„éŒ¯èª¤è¨Šæ¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/vue-selected-dropdown-1/EmptyDropdowd.png"
width="371"
height="130"
srcset="https://anthea-wu.github.io/post/vue-selected-dropdown-1/EmptyDropdowd_hu_149a0d1da3f91490.png 480w, https://anthea-wu.github.io/post/vue-selected-dropdown-1/EmptyDropdowd_hu_3a6f5ac33ae285fc.png 1024w"
loading="lazy"
alt="ç©ºç©ºå¦‚ä¹Ÿçš„ä¸‹æ‹‰å¼é¸å–®"
class="gallery-image"
data-flex-grow="285"
data-flex-basis="684px"
>&lt;/p>
&lt;h2 id="æˆ‘çš„æ¸…å–®å»å“ªè£¡äº†">æˆ‘çš„æ¸…å–®å»å“ªè£¡äº†
&lt;/h2>&lt;p>ï¼ˆä»¥ä¸‹çš†ç‚ºæˆ‘çš„ç†è§£ï¼Œå¦‚æœæœ‰èª¤é‚„è«‹å„ä½å¤§å¤§ä¸åæŒ‡æ­£ã€‚ï¼‰&lt;/p>
&lt;p>æœƒé€ æˆé€™å€‹çµæœï¼Œæˆ‘çš„çŒœæ¸¬æ˜¯å› ç‚º Vue çš„ç”Ÿå‘½é€±æœŸçš„ç·£æ•…ã€‚è¢«åŒ…åœ¨ Vue æ›è¼‰ç¯„åœå…§çš„ html å…§å®¹ï¼Œæœƒåœ¨ &lt;code>app.mount('#app')&lt;/code> åŸ·è¡Œä¹‹å¾Œï¼Œæ‰æ­£å¼çš„è¢«æ”¾åˆ° DOM å…ƒä»¶ä¸Šï¼Œä½†åœ¨é€™ä¹‹å‰ï¼Œä½ çš„ &lt;code>$('#county-select').selectpicker();&lt;/code> æœƒå…ˆå¹«ä½ æŠŠä¸‹æ‹‰å¼é¸å–®åˆå§‹åŒ–ï¼Œå¯æ˜¯é€™å€‹æ™‚å€™å…¶å¯¦é‚„æ²’æœ‰çœŸæ­£çš„æŠŠè³‡æ–™åˆ©ç”¨ &lt;code>v-for&lt;/code> æ”¾å…¥ä¸‹æ‹‰å¼é¸å–®çš„å…§å®¹ä¸­ï¼Œæ‰€ä»¥ bootstrap-select èªç‚ºé€™æ˜¯ä¸€å€‹ç©ºçš„é¸å–®ï¼Œè‡ªç„¶è€Œç„¶åˆå§‹åŒ–çš„çµæœå°±æœƒæ˜¯ç©ºçš„äº†ã€‚&lt;/p>
&lt;p>è¦è§£æ±ºé€™å€‹å•é¡Œï¼Œå¯ä»¥ä½¿ç”¨ Vue ä¸­çš„ä¸€å€‹ function &lt;code>nextTick()&lt;/code>ã€‚ä»–æœƒåœ¨æ•´å€‹ DOM éƒ½æ›è¼‰å®Œæˆä¹‹å¾Œï¼Œæ‰å»é€²è¡Œå¯«åœ¨ &lt;code>nextTick()&lt;/code> å…§çš„ç¨‹å¼ç¢¼ã€‚åŸæœ¬çš„ç”¨æ„å…¶å¯¦æ˜¯åœ¨æ–¼éåŒæ­¥æ›´æ–°ï¼Œç¯€çœæ•ˆèƒ½ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-nexttick">ä½¿ç”¨ &lt;code>nextTick()&lt;/code>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// sample.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createApp&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">code&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selected&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">county&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">methods&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">getCounties&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">method&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;get&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;./api/code&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">code&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">county&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŸæœ¬çš„ç¨‹å¼ç¢¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// $(&amp;#39;#county-select&amp;#39;).selectpicker();
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä½¿ç”¨ nextTick() åŒ…èµ·ä¾†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">nextTick&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#county-select&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">selectpicker&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mounted&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCounties&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mount&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#app&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ©ç”¨å‰›å‰›å­¸åˆ°çš„ &lt;code>Vue.nextTick()&lt;/code> æ›´æ–°å®Œç¨‹å¼ç¢¼ä¹‹å¾Œï¼Œä½ æ‡‰è©²å°±å¯ä»¥é †åˆ©çœ‹åˆ°æˆ‘å€‘æˆåŠŸæ¥å› API çš„çµæœäº†ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/vue-selected-dropdown-1/Success.png"
width="380"
height="450"
srcset="https://anthea-wu.github.io/post/vue-selected-dropdown-1/Success_hu_5e035da320097bfa.png 480w, https://anthea-wu.github.io/post/vue-selected-dropdown-1/Success_hu_2f4c27df646561d0.png 1024w"
loading="lazy"
alt="æ¢å¾©æ­£å¸¸çš„ä¸‹æ‹‰å¼é¸å–® ğŸŠ"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="202px"
>&lt;/p>
&lt;p>ä»¥ä¸Šå°±æ˜¯åŸºæœ¬çš„ bootstrap-select ä½¿ç”¨æ–¹å¼ã€‚&lt;a class="link" href="../vue-selected-dropdown-2" >ä¸‹ä¸€ç¯‡&lt;/a>æœƒæ¥è‘—ä»‹ç´¹æ›´é€²éšçš„ç”¨æ³•ï¼ŒåŒ…å«å¦‚æœæˆ‘è¦å‹•æ…‹çš„è®Šæ›´ä¸‹æ‹‰å¼é¸å–®ï¼Œä¾‹å¦‚ï¼šé¸æ“‡å°ä¸­å¸‚ï¼Œå°±åªæœƒå‡ºç¾å°ä¸­çš„é„‰é®å¸‚å€é¸å–®ï¼Œæœƒé‡åˆ°ç”šéº¼æ¨£çš„å•é¡Œå’Œè§£æ³•ã€‚&lt;/p>
&lt;p>æ„Ÿè¬ä½ çš„æ”¶çœ‹ï¼&lt;/p>
&lt;blockquote>
&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/zhouzuoluo/article/details/84752280" target="_blank" rel="noopener"
>vue.nextTick()æ–¹æ³•çš„ä½¿ç”¨è©³è§£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://developer.snapappointments.com/bootstrap-select/" target="_blank" rel="noopener"
>bootstrap-select å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;/ul>&lt;/blockquote></description></item><item><title>GDAL æ“ä½œ ShapeFile (3)</title><link>https://anthea-wu.github.io/post/gdal-shapefile-3/</link><pubDate>Sun, 31 Jul 2022 00:43:50 +0800</pubDate><guid>https://anthea-wu.github.io/post/gdal-shapefile-3/</guid><description>&lt;p>å‰å…©ç¯‡æ–‡ç« èªªæ˜äº†å¦‚ä½•è®€å– Shapefileï¼Œæ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„æ˜¯å¦‚ä½•ç”Ÿæˆä¸€å€‹ Shapefile æª”æ¡ˆã€‚&lt;/p>
&lt;h3 id="å»ºç«‹-shapefile-æª”æ¡ˆ">å»ºç«‹ Shapefile æª”æ¡ˆ
&lt;/h3>&lt;p>åœ¨&lt;a class="link" href="../gdal-shapefile-2" >ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a>ä¸­ï¼Œæˆ‘å€‘è®€å–çš„æª”æ¡ˆåŒ…å«äº†ä¸‰å€‹è³‡è¨Šï¼šIDã€åœŸåœ°åç¨±é‚„æœ‰åœŸåœ°é¢ç©ã€‚æ‰€ä»¥å°±æŒ‰ç…§é€™å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œä¾†å»ºç«‹ä¸€å€‹ Shapefile æª”æ¡ˆå§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š MaxRev.Gdal.Core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GdalBase&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š GDAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetConfigOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SHAPE_ENCODING&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;big5&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AllRegister&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RegisterAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Driver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">driver&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetDriverByName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ESRI Shapefile&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">driver&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDataSource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;files/simple/create.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åº§æ¨™ç³»çµ±è¨­å®š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">spatialReference&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spatialReference&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetWellKnownGeogCS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WGS84&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Field&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTInteger&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åœŸåœ°åç¨±&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldArea&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åœŸåœ°é¢ç©&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldArea&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Area&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Feature&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">field&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">feature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Feature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">field&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­å®šå…§å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;ç¬¬äºŒå¡ŠåœŸåœ°&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Area&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123.4&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­å®šç©ºé–“è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">wkt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;POLYGON ((-1.13755980861244 0.746411483253589,-0.350478468899522 0.488038277511962,-1.06578947368421 -0.028708133971292,-1.13755980861244 0.746411483253589))&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">geometry&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Geometry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateFromWkt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wkt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetGeometry&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">geometry&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateFeature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="error-1-cannot-convert-to-big5">Error 1: cannot convert to big5
&lt;/h2>&lt;p>å¦‚æœä½ åŸå°ä¸å‹•æŠŠä¸Šé¢çš„ç¨‹å¼ç¢¼è¤‡è£½è²¼ä¸ŠåŸ·è¡Œçš„è©±ï¼Œæ‡‰è©²æœƒé‡åˆ°ç¬¬ä¸€å€‹éŒ¯èª¤ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-3/Error1.png"
width="569"
height="319"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-3/Error1_hu_5de160e9d245f11.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-3/Error1_hu_32e6ed59f949fd7.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="428px"
>&lt;/p>
&lt;p>é€™å€‹éŒ¯èª¤çš„åŸå› é›–ç„¶æœ‰æŸ¥è©¢åˆ°&lt;a class="link" href="https://github.com/conda-forge/libgdal-feedstock/issues/32" target="_blank" rel="noopener"
>ç›¸é—œçš„è¨è«–&lt;/a>ï¼Œä½†æˆ‘æ²’æœ‰çœ‹çš„å¾ˆæ‡‚ ğŸ˜¢ ä¸éè¦è§£æ±ºé€™å€‹å•é¡Œæœ€ç°¡å–®çš„æ–¹æ³•å°±æ˜¯æŠŠç¬¬äº”è¡Œçš„éƒ¨åˆ†é€²è¡Œä¸‹é¢çš„ä¿®æ”¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é€ æˆéŒ¯èª¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Gdal.SetConfigOption(â€œSHAPE_ENCODINGâ€, â€œbig5â€);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ä¿®å¾©&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetConfigOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">â€œ&lt;/span>&lt;span class="n">SHAPE_ENCODING&lt;/span>&lt;span class="err">â€&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="err">â€œâ€&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½çš„ï¼Œç¨‹å¼çœ‹èµ·ä¾†å¯ä»¥é †åˆ©åŸ·è¡Œäº†ï¼ä¸éé€™æ¨£å°±æœƒè®“å‰å…©ç¯‡æ–‡ç« çš„&lt;strong>ä¸­æ–‡è®€å–è®Šæˆäº‚ç¢¼&lt;/strong>ï¼Œæš«æ™‚é‚„æ²’æœ‰æ›´å¥½çš„è§£æ³•ï¼Œæ‰€ä»¥å°±å…ˆå°‡å°±ä¸€ä¸‹ï¼ŒæŠŠè®€å¯«çš„è¨»å†Šåˆ†é–‹ä¾†å§ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="error-2-ä¸­æ–‡äº‚ç¢¼">Error 2: ä¸­æ–‡äº‚ç¢¼
&lt;/h2>&lt;p>æ¥ä¸‹ä¾†è®“æˆ‘å€‘ç”¨ QGIS æª¢è¦–ä¸€ä¸‹æˆ‘å€‘æ‰€ç”¢ç”Ÿçš„ Shapefile æª”æ¡ˆï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-3/Output1.png"
width="398"
height="76"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-3/Output1_hu_7f70457eb5454d56.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-3/Output1_hu_c99317db28565a67.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="523"
data-flex-basis="1256px"
>&lt;/p>
&lt;p>ç¬¬äºŒå€‹å•é¡Œå‡ºç¾äº†ï¼ŒField å¦‚æœä½¿ç”¨ä¸­æ–‡çš„è©±æœƒè®Šæˆäº‚ç¢¼ã€‚ä¸éç¥å¥‡çš„æ˜¯ï¼Œç•¶æˆ‘å€‘å» QGIS åœ¨çš„è¨­å®šä¸­ï¼ŒæŠŠ Data Source Encoding å¾ UTF-8 èª¿æ•´ç‚º BIG-5 ä¹‹å¾Œï¼Œäº‚ç¢¼çš„æƒ…å½¢å°±åéä¾†äº†ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-3/Output2.png"
width="398"
height="78"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-3/Output2_hu_e042d981c368426.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-3/Output2_hu_ef3c892de81164ef.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="510"
data-flex-basis="1224px"
>&lt;/p>
&lt;p>é€™å€‹å•é¡Œå’Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œä¸­æ–‡äº‚ç¢¼çš„å•é¡ŒåŸå› ç›¸ä¼¼ï¼Œåœ¨å¥—ä»¶ä¸­ä¸€å€‹æœ‰å…ˆè¢«è½‰ç‚º UTF-8 çš„ç·¨ç¢¼ï¼Œä¸€å€‹æ²’æœ‰ï¼Œæ‰€ä»¥é€ æˆé€™æ¨£çš„æƒ…æ³ç™¼ç”Ÿã€‚&lt;/p>
&lt;h3 id="è§£æ±ºä¸­æ–‡ç·¨ç¢¼ä¸åŒçš„å•é¡Œ">è§£æ±ºä¸­æ–‡ç·¨ç¢¼ä¸åŒçš„å•é¡Œ
&lt;/h3>&lt;p>æœ€ä¸€é–‹å§‹ä»¥ç‚ºé€™å€‹å•é¡Œå¾ˆç°¡å–®ï¼Œæ—¢ç„¶ç·¨ç¢¼ä¸ä¸€æ¨£ï¼Œé‚£æˆ‘å°±å…ˆè½‰å¥½å†é€é€²å»å°±æ‡‰è©²å¯ä»¥äº†å§ï¼çµæœä»–çš„ç·¨ç¢¼æ˜¯åœ¨åŸç”Ÿçš„ dll è£¡é¢é€²è¡Œçš„ï¼Œæˆ‘åœ¨å¤–é¢å…ˆè½‰å¥½ä¸€æ¬¡ä¸€æ¨£æ²’æœ‰ç”¨â€¦â€¦&lt;/p>
&lt;p>æ–¼æ˜¯å°±æƒ³èªªï¼Œæ—¢ç„¶è·Ÿä¸Šä¸€ç¯‡æ–‡ç« æ˜¯å·®ä¸å¤šçš„å•é¡Œï¼Œé‚£å°±ä½¿ç”¨å·®ä¸å¤šçš„æ–¹å¼ï¼Œè®€å–åŸç”Ÿçš„ method ç›´æ¥é€²è¡Œèª¿ç”¨å³å¯ï¼Œä½†å»æœƒä¸€ç›´é‡åˆ° &lt;code>Attempted to read or write protected memory. This is often an indication that other memory is corrupt.&lt;/code> çš„å•é¡Œï¼Œå› æ­¤ä¹Ÿæ”¾æ£„äº†é€™å€‹è§£æ³•ã€‚&lt;/p>
&lt;p>æœ€å¾Œæ˜¯æŸ¥å°‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼ŒæŠŠ &lt;code>feature.SetField&lt;/code> æ”¹æˆèª¿ç”¨ &lt;code>SetFieldBinaryFromHexString&lt;/code> å°±å®Œç¾çš„è§£æ±ºå•é¡Œäº†ï¼ä¸éæ–¹æ³•åç¨±éƒ½æ˜ç¢ºçš„é¡¯äº†è¦ä½¿ç”¨ Hex stringï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨ä¸‹é¢çš„æ–¹æ³•ä¾†æŠŠåŸæœ¬çš„å­—ä¸²ç¨ä½œè½‰æ›ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .NET Core ä½¿ç”¨éœ€å®‰è£ Nuget å¥—ä»¶ System.Text.Encoding.CodePages&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Encoding.RegisterProvider(CodePagesEncodingProvider.Instance); // å¯ä»¥åŠ åœ¨ä½¿ç”¨å‰ï¼Œæˆ–æ˜¯ Program.cs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">bytes&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Encoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetEncoding&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">950&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">GetBytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ç¬¬äºŒå¡ŠåœŸåœ°&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">hexString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Convert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToHexString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bytes&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;p>æœ€å¾Œæª¢è¦–ä¸€ä¸‹æˆ‘å€‘ç”Ÿç”¢çš„ Shapefile æª”æ¡ˆï¼Œé‚„å¯ä»¥ç™¼ç¾å…©å€‹å°å•é¡Œï¼š&lt;/p>
&lt;h3 id="error-3-é è¨­ç·¨ç¢¼">Error 3: é è¨­ç·¨ç¢¼
&lt;/h3>&lt;p>å¦‚æœæ˜¯å…ˆè½‰æˆ BIG-5 å†è½‰ Hex stringï¼Œå¯ä»¥ç™¼ç¾ä¸€é–‹å§‹æ‰“é–‹çš„æ™‚å€™é‚„æ˜¯äº‚ç¢¼ï¼Œéœ€è¦åˆ°è¨­å®šè£¡é¢æŠŠ Data Source Encoding èª¿æ•´ç‚º BIG-5 å¾Œæ‰èƒ½æ­£å¸¸é¡¯ç¤ºã€‚é€™å€‹éƒ¨åˆ†åªéœ€è¦åœ¨å»ºç«‹ Layer çš„æ™‚å€™æŠŠæœ€å¾Œä¸€å€‹åƒæ•¸åŠ ä¸Š Encoding çš„è¨­å®šå³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŸæœ¬çš„è¨­å®š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ–°å¢ Encoding ç‚º BIG-5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]{&lt;/span>&lt;span class="s">&amp;#34;ENCODING=BIG5&amp;#34;&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="error-4-åº§æ¨™ç³»çµ±">Error 4: åº§æ¨™ç³»çµ±
&lt;/h3>&lt;p>ä¸€èˆ¬ä¾†èªªï¼ŒShapefile å¿…é ˆè¦æœ‰æŒ‡å®šçš„åº§æ¨™ç³»çµ±ï¼Œæ²’æœ‰çš„è©±å¯èƒ½æœƒåœ¨è®€å–ä¸Šé‡åˆ°ä¸€äº›å•é¡Œï¼Œé€ æˆå¾ŒçºŒçš„æ“ä½œéŒ¯èª¤ï¼Œä¾‹å¦‚ï¼šè½‰æˆ WKT å’Œç¾å­˜çš„è³‡æ–™è¦é€²è¡Œæ¯”å°çš„æ™‚å€™ï¼Œå¯èƒ½å°±æœƒå› ç‚ºåº§æ¨™ç³»çµ±çš„ä¸åŒè€Œéœ€è¦é€²è¡Œè½‰æ›ã€‚&lt;/p>
&lt;p>è¨­å®šåº§æ¨™ç³»çµ±çš„æ–¹æ³•å¾ˆç°¡å–®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åŸæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]{&lt;/span>&lt;span class="s">&amp;#34;ENCODING=BIG5&amp;#34;&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­å®šåº§æ¨™ç³»çµ±ç‚º WGS84&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">spatialReference&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spatialReference&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetWellKnownGeogCS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WGS84&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">spatialReference&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]{&lt;/span>&lt;span class="s">&amp;#34;ENCODING=BIG5&amp;#34;&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="æœ€çµ‚ç‰ˆç¨‹å¼ç¢¼">æœ€çµ‚ç‰ˆç¨‹å¼ç¢¼
&lt;/h2>&lt;p>ç¶“éä¸Šé¢çš„ä¿®æ­£å’Œèª¿æ•´ä¹‹å¾Œï¼Œå®Œæ•´çš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š MaxRev.Gdal.Core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GdalBase&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š GDAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetConfigOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SHAPE_ENCODING&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;big5&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AllRegister&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RegisterAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Driver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">driver&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetDriverByName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ESRI Shapefile&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">driver&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateDataSource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;files/simple/create.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// åº§æ¨™ç³»çµ±è¨­å®š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">spatialReference&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spatialReference&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetWellKnownGeogCS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WGS84&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Field&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">spatialReference&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">SpatialReference&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spatialReference&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetWellKnownGeogCS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;WGS84&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateLayer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;layer one&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">spatialReference&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">wkbGeometryType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wkbPolygon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span>&lt;span class="p">[]{&lt;/span>&lt;span class="s">&amp;#34;ENCODING=BIG5&amp;#34;&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTInteger&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldId&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åœŸåœ°åç¨±&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldName&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">fieldArea&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;åœŸåœ°é¢ç©&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FieldType&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">OFTString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldArea&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Area&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å»ºç«‹ Feature&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">field&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">feature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Feature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">field&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­å®šå…§å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">bytes&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Encoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetEncoding&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">950&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">GetBytes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ç¬¬äºŒå¡ŠåœŸåœ°&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">hexString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Convert&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToHexString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bytes&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hexString&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetField&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileColumn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Area&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;123.4&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨­å®šç©ºé–“è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">wkt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;POLYGON ((-1.13755980861244 0.746411483253589,-0.350478468899522 0.488038277511962,-1.06578947368421 -0.028708133971292,-1.13755980861244 0.746411483253589))&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">geometry&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Geometry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateFromWkt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">wkt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetGeometry&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">geometry&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateFeature&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ„Ÿè¬å¤§å®¶çš„è§€çœ‹ï¼æœ‰ä»»ä½•éŒ¯èª¤é‚„è«‹å„ä½å¤§å¤§ä¸åæŒ‡æ•™ï¼Œæœ‰ä»»ä½•å•é¡Œä¹Ÿæ­¡è¿ä¾†ä¿¡è·Ÿæˆ‘è¨è«–å–” ğŸ˜‰&lt;/p>
&lt;blockquote>
&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/qq_34045114/article/details/84133815" target="_blank" rel="noopener"
>gdal for android é–‹ç™¼åŒ…ï¼Œå­—æ®µå±¬æ€§ç‚ºä¸­æ–‡å‡ºç¾äº‚ç¢¼&lt;/a>&lt;/li>
&lt;/ul>&lt;/blockquote></description></item><item><title>GDAL æ“ä½œ ShapeFile (2)</title><link>https://anthea-wu.github.io/post/gdal-shapefile-2/</link><pubDate>Sun, 24 Jul 2022 23:58:59 +0800</pubDate><guid>https://anthea-wu.github.io/post/gdal-shapefile-2/</guid><description>&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError1.png"
width="1100"
height="219"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError1_hu_51f775485a0e3464.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError1_hu_8345583c9332df9d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="502"
data-flex-basis="1205px"
>&lt;/p>
&lt;p>&lt;a class="link" href="../gdal-shapefile-1" >ä¸Šä¸€ç¯‡&lt;/a>æåˆ°ï¼Œè¼¸å‡ºçš„çµæœä¸­ï¼Œæ¬„ä½çš„åç¨±å¯ä»¥æ­£å¸¸é¡¯ç¤ºï¼Œå…§å®¹çš„å€¼å»æœƒè®Šæˆäº‚ç¢¼ã€‚&lt;/p>
&lt;h2 id="å•é¡Œå‡ºåœ¨å“ª">å•é¡Œå‡ºåœ¨å“ª
&lt;/h2>&lt;p>ä¸Šç¶²æ‰¾è§£æ³•çš„æ™‚å€™ç™¼ç¾æœ‰äººé‡åˆ°ç›¸ä¼¼çš„ç‹€æ³ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œæˆ‘å’Œå°æ–¹çš„äº‚ç¢¼é¡¯ç¤ºæ˜¯ç›¸åçš„ï¼šä»–çš„äº‚ç¢¼æœƒå‡ºç¾åœ¨æ¬„ä½åç¨±ï¼Œå…§å®¹çš„å€¼åè€Œæ˜¯æ­£å¸¸çš„ã€‚&lt;/p>
&lt;p>é›–ç„¶ç‹€æ³æœ‰é»ä¸ç›¸åŒï¼Œä½†ä»–åœ¨é–±è®€äº†åŸå§‹ç¢¼å¾Œæå‡ºäº†ä¸€å€‹è§€é»ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å°æ¯” &lt;code>GetName&lt;/code> å’Œ &lt;code>GetFieldAsString&lt;/code> å…©å€‹å‡½æ•¸å¯ä»¥å¾ˆæ˜é¡¯çœ‹å‡ºä¾†ï¼Œ&lt;code>GetFieldAsString&lt;/code> é€šéèª¿ç”¨ &lt;code>Ogr.Utf8BytesToString&lt;/code> å°‡è¿”å›çš„ UTF8 ç·¨ç¢¼çš„ä½å…ƒçµ„æ•¸çµ„ä»¥ UTF8 æ–¹å¼è§£ç¢¼ç‚ºå­—å…ƒä¸²ï¼Œæ‰€ä»¥èƒ½å¤ æ­£å¸¸é¡¯ç¤ºï¼›è€Œ &lt;code>GetName&lt;/code> å‰‡ç›´æ¥è¿”å›å­—å…ƒä¸²ï¼ˆå¯¦éš›ä¸Šç·¨è­¯å™¨éš±æ€§èª¿ç”¨äº† &lt;code>Encoding.Default.GetString&lt;/code> è§£ç¢¼ç‚ºå­—å…ƒä¸²ï¼‰ï¼Œç”±æ–¼æ²’æœ‰ä½¿ç”¨ UTF8 è§£ç¢¼å°è‡´é¡¯ç¤ºç‚ºäº‚ç¢¼ã€‚&lt;/p>&lt;span class="cite">&lt;span>â€• &lt;/span>&lt;span>gis0911178, &lt;/span>&lt;a href="https://www.cnblogs.com/litou/p/15035790.html">&lt;cite>CSDN / CC 4.0 BY-SA å”è­°&lt;/cite>&lt;/a>&lt;/span>&lt;/blockquote>
&lt;h3 id="è§€å¯ŸåŸå§‹ç¢¼">è§€å¯ŸåŸå§‹ç¢¼
&lt;/h3>&lt;p>ç‚ºäº†è­‰æ˜ï¼Œæˆ‘åˆ©ç”¨åç·¨è­¯çš„å·¥å…·ä¾†æª¢è¦– &lt;code>Gdal.Core.dll&lt;/code>ï¼Œå¯ä»¥çœ‹åˆ°åƒä¸‹é¢é€™æ¨£çš„å…§å®¹ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/GetName.png"
width="588"
height="235"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/GetName_hu_8a1e34a65a922f86.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/GetName_hu_271357c2755130c4.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="250"
data-flex-basis="600px"
>&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/GetFieldAsString.png"
width="964"
height="233"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/GetFieldAsString_hu_6ab1757c16500b8d.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/GetFieldAsString_hu_742e405414d2a63a.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="413"
data-flex-basis="992px"
>&lt;/p>
&lt;p>å¾é€™å…©å¼µåœ–ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè®€å–å…§å®¹å€¼ï¼Œèª¿ç”¨ &lt;code>Feature.GetFieldAsString()&lt;/code> çš„æ™‚å€™ï¼Œæœƒå°‡çµæœé€²è¡Œè½‰æ›ï¼Œ&lt;code>Utf8BytesToString()&lt;/code> çš„å…§å®¹åŒ…å«ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/Utf8BytesToString.png"
width="603"
height="328"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/Utf8BytesToString_hu_ec2b9af15538287f.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/Utf8BytesToString_hu_2360a6a9a6d71dce.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="441px"
>&lt;/p>
&lt;p>æ‰€ä»¥å¾çµè«–ä¾†çœ‹ï¼Œä»–çš„æƒ…æ³æ‡‰è©²æ˜¯æ­£å¸¸çš„ï¼Œåªæ˜¯ä¸çŸ¥é“ç‚ºç”šéº¼æˆ‘æœƒæ˜¯ç›¸åçš„ç‹€æ³ï¼šæœ‰ç”¨ UTF8 è§£ç¢¼çš„å…§å®¹ï¼Œåè€Œæœƒæ˜¯äº‚ç¢¼ ğŸ˜•&lt;/p>
&lt;h3 id="gdalcore--maxrevgdalcore">&lt;code>Gdal.Core&lt;/code> â†’ &lt;code>MaxRev.Gdal.Core&lt;/code>
&lt;/h3>&lt;p>æ‰€ä»¥ï¼ŒæŒ‰ç…§ä»–çš„å‡è¨­ï¼Œæ‡‰è©²æ˜¯è¦åœ¨å–å¾—æ¬„ä½åç¨±çš„æ™‚å€™å¤šèª¿ç”¨ &lt;code>Utf8BytesToString()&lt;/code> ä¾†è®“å­—ä¸²æ­£ç¢ºé¡¯ç¤ºï¼Œä½†å°æ–¼æˆ‘çš„ç‹€æ³ä¾†èªªï¼Œåè€Œæ˜¯è¦æŠŠ &lt;code>Utf8BytesToString()&lt;/code> æ‹¿æ‰ ğŸ˜¢ ä½†æˆ‘å°æ–¼ dll ç›¸é—œçš„æŠ€èƒ½æ¨¹æ˜¯æœªé–‹é€šçš„ç‹€æ…‹ï¼Œæ‰€ä»¥é¸æ“‡æ”¾æ£„ &lt;code>Gdal.Core&lt;/code> é€™å€‹å¥—ä»¶ï¼Œè½‰è€Œä½¿ç”¨å¦å¤–ä¸€å€‹åŒæ¨£ä½¿ç”¨ Gdalï¼Œä½†å°ˆé–€é–‹ç™¼çµ¦ .NET Core ä½¿ç”¨çš„å¥—ä»¶ï¼ï¼ &lt;code>MaxRev.Gdal.Core&lt;/code>ã€‚&lt;/p>
&lt;p>å¥—ä»¶çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸæœ¬çš„ &lt;code>Gdal.Core&lt;/code> ä¸€æ¨¡ä¸€æ¨£ï¼Œåªæ˜¯è¦åœ¨åŸæœ¬çš„ &lt;code>Gdal.AllRegister();&lt;/code> ä¹‹å‰ï¼ŒåŠ ä¸Š &lt;code>GdalBase.ConfigureAll();&lt;/code> å°±å¯ä»¥äº†ã€‚æ›´æ”¹å¥—ä»¶ä¹‹å¾Œé‹è¡Œçš„çµæœå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError2.png"
width="1100"
height="214"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError2_hu_99d79016c4df38a9.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/ShpError2_hu_4e81d79ccd7f1354.png 1024w"
loading="lazy"
alt="çµ‚æ–¼æ˜¯æ­£å¸¸çš„ Bug äº† (?) ğŸŠ"
class="gallery-image"
data-flex-grow="514"
data-flex-basis="1233px"
>&lt;/p>
&lt;hr>
&lt;h2 id="ä¿®æ­£ä¸­æ–‡äº‚ç¢¼">ä¿®æ­£ä¸­æ–‡äº‚ç¢¼
&lt;/h2>&lt;p>å°‡æƒ…å¢ƒé‚„åŸä¹‹å¾Œå°±å¯ä»¥é‡å°ä»–æ‰€æå‡ºçš„æ–¹æ³•é€²è¡Œä¿®æ­£äº†ã€‚æˆ‘é¸æ“‡æœ€å¿«ä¹Ÿæœ€å¥½è™•ç†çš„æ–¹æ³•ï¼ï¼ç›´æ¥èª¿ç”¨åŸæœ¬ dll ä¸­çš„æ–¹æ³•å†å¦å¤–åŒ…ä¸€å±¤ UTF8 è§£ç¢¼ï¼Œå®Œæ•´çš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š MaxRev.Gdal.Core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GdalBase&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ConfigureAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š GDAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">SetConfigOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;SHAPE_ENCODING&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;big5&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AllRegister&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RegisterAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é–‹å•Ÿ SHP æª”æ¡ˆï¼ˆ0 - è®€å–ã€1 - è®€å¯«ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;files/simple/test.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileOpen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadOnly&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layerCount&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">layerCount&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®€å–åœ–å±¤ Layer è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerByIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">fieldCount&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">GetFieldCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">fieldCount&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">field&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">GetFieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">fieldName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">GetFieldDfnName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">field&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;æ¬„ä½{j + 1}. {fieldName}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®€å–è¦ç´  Feature&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Feature&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">feature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetNextFeature&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹1. {id}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹2. {name}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">area&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsInteger64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹3. {area}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">geometry&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetGeometryRef&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">geometry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ExportToWkt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">wkt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;- WKT: {wkt}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">static&lt;/span> &lt;span class="kt">string?&lt;/span> &lt;span class="n">Utf8BytesToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">IntPtr&lt;/span> &lt;span class="n">ptr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ptr&lt;/span> &lt;span class="p">==&lt;/span> &lt;span class="n">IntPtr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Zero&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">ms&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">MemoryStream&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">byte&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">ofs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Marshal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadByte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ptr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ofs&lt;/span>&lt;span class="p">++))&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteByte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Encoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">UTF8&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ms&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ToArray&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Dll çš„ä½ç½®è¦æ³¨æ„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[DllImport(&amp;#34;gdal/x64/gdal305.dll&amp;#34;, EntryPoint = &amp;#34;OGR_Fld_GetNameRef&amp;#34;, CallingConvention = CallingConvention.Cdecl)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">static&lt;/span> &lt;span class="kd">extern&lt;/span> &lt;span class="n">IntPtr&lt;/span> &lt;span class="n">OGR_Fld_GetNameRef&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HandleRef&lt;/span> &lt;span class="n">handle&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">static&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">GetFieldDfnName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">FieldDefn&lt;/span> &lt;span class="n">fieldDefn&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HandleRef&lt;/span> &lt;span class="n">handle&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">FieldDefn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getCPtr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fieldDefn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">IntPtr&lt;/span> &lt;span class="n">ptr&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">OGR_Fld_GetNameRef&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">handle&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Utf8BytesToString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">EnumShapefileOpen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ReadOnly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸ·è¡Œä¹‹å¾Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘æŠŠé€™å€‹äº‚ç¢¼ä¿®å¥½å•¦ï¼&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-2/Success.png"
width="1100"
height="214"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-2/Success_hu_47e26f00e5077cce.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-2/Success_hu_7798435b3350d197.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="514"
data-flex-basis="1233px"
>&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cnblogs.com/litou/p/15035790.html" target="_blank" rel="noopener"
>C#ä¸­ä½¿ç”¨GDAL3ï¼ˆäºŒï¼‰ï¼šWindowsä¸‹è¯»å†™Shapeæ–‡ä»¶åŠè¶…è¯¦ç»†è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>GDAL æ“ä½œ ShapeFile (1)</title><link>https://anthea-wu.github.io/post/gdal-shapefile-1/</link><pubDate>Sun, 24 Jul 2022 23:40:41 +0800</pubDate><guid>https://anthea-wu.github.io/post/gdal-shapefile-1/</guid><description>&lt;p>é›–ç„¶å…¬å¸çš„ç”¢å“ä»¥ APP ç‚ºä¸»ï¼Œä½†èº«ç‚ºä¸€å€‹å¾Œç«¯å·¥ç¨‹å¸«ï¼Œåç‰‡ä¸Šæ›è‘— GIS çš„é ­éŠœï¼Œä¸€äº›åŸºæœ¬çš„åœ°ç†è³‡è¨ŠæŠ€è¡“é‚„æ˜¯è¦ç¨å¾®ç¢°ä¸€ä¸‹çš„ã€‚å¹³å¸¸æ¥è§¸æœ€å¤šçš„å°±æ˜¯æœ‰ç´€éŒ„ç©ºé–“è³‡è¨Šçš„ Shapefileï¼Œæœƒéœ€è¦é€²è¡Œçš„æ“ä½œåŒ…å«è®€å–å®ƒçš„ç©ºé–“è³‡è¨Šã€æ¯å€‹ç©ºé–“è³‡è¨Šä¸Šçš„å±¬æ€§ï¼Œä»¥åŠåˆ©ç”¨ç©ºé–“è³‡è¨Šåšäº¤é›†æˆ–åŒ…å«çš„æ¯”å°ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>ä¸€å€‹ Shape æ–‡ä»¶åŒ…æ‹¬ä¸‰å€‹æ–‡ä»¶ï¼šä¸€å€‹ä¸»æ–‡ä»¶ &lt;code>.shp&lt;/code>ï¼Œä¸€å€‹ç´¢å¼•æ–‡ä»¶ &lt;code>.shx&lt;/code>ï¼Œå’Œä¸€å€‹ dBASE è¡¨ &lt;code>.dbf&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸»æ–‡ä»¶æ˜¯ä¸€å€‹ç›´æ¥å­˜å–ï¼Œè®Šé•·åº¦ç´€éŒ„çš„æ–‡ä»¶ï¼Œå…¶ä¸­æ¯å€‹ç´€éŒ„æè¿°æ§‹æˆä¸€å€‹åœ°ç†ç‰¹å¾ Feature çš„æ‰€æœ‰ vertices åº§æ¨™å€¼ã€‚&lt;br>
åœ¨ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œæ¯æ¢è¨˜éŒ„åŒ…å«å°æ‡‰ä¸»æ–‡ä»¶è¨˜éŒ„è·é›¢ä¸»æ–‡ä»¶é ­é–‹å§‹çš„åç§»é‡ã€‚&lt;br>
dBASE è¡¨åŒ…å« SHP æ–‡ä»¶ä¸­æ¯ä¸€å€‹ Feature çš„ç‰¹å¾µå±¬æ€§ï¼Œè¡¨ä¸­å¹¾ä½•ç´€éŒ„å’Œå±¬æ€§æ•¸æ“šä¹‹é–“çš„ä¸€ä¸€å°æ‡‰é—œä¿‚æ˜¯åŸºæ–¼è¨˜éŒ„æ•¸ç›®çš„ IDã€‚åœ¨ dBASE æ–‡ä»¶ä¸­çš„å±¬æ€§è¨˜éŒ„å¿…é ˆå’Œä¸»æ–‡ä»¶ä¸­çš„è¨˜éŒ„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚åœ–å½¢æ•¸æ“šå’Œå±¬æ€§æ•¸æ“šé€šéç´¢å¼•è™Ÿå»ºç«‹ä¸€ä¸€å°æ‡‰çš„é—œä¿‚ã€‚&lt;/p>
&lt;/p>&lt;span class="cite">&lt;span>â€• &lt;/span>&lt;span>gis0911178, &lt;/span>&lt;a href="https://blog.csdn.net/gis0911178/article/details/52162072">&lt;cite>CSDN / CC 4.0 BY-SA å”è­°&lt;/cite>&lt;/a>&lt;/span>&lt;/blockquote>
&lt;p>æˆ‘å° Shapefile çš„ç†è§£ä¹Ÿé‚„ä¸é€å¾¹ï¼Œä½†å¾ä¸Šé¢æ“·å–çš„æ–‡ç« ä¸­å¯ä»¥çœ‹å‡ºä¸€ä»¶äº‹æƒ…æ˜¯ï¼šä¸€å€‹æ­£å¸¸çš„ Shapefile æª”æ¡ˆå¿…é ˆè‡³å°‘åŒ…å«ä¸‰å€‹å‰¯æª”åçš„æª”æ¡ˆï¼Œè€Œå…¶ä¸­åœ¨æˆ‘çš„å·¥ä½œä¸Šï¼Œæœƒéœ€è¦å–å¾—çš„è³‡æ–™ï¼Œä¸€æ˜¯åœ¨ &lt;code>.shp&lt;/code> ä¸­è¨˜éŒ„çš„ç©ºé–“è³‡è¨Šï¼ŒäºŒæ˜¯åœ¨ &lt;code>.dbf&lt;/code> ä¸­è¨˜éŒ„çš„å…¶ä»–å±¬æ€§ã€‚ä¸éè¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code>.shp&lt;/code> æª”æ¡ˆæ˜¯ç„¡æ³•å–®ç¨è¢«è®€å–çš„ï¼Œå¦‚æœè¦å° Shapefile é€²è¡Œä»»ä½•æ“ä½œï¼Œ&lt;strong>åŒä¸€å€‹è³‡æ–™å¤¾&lt;/strong> åº•ä¸‹å°±å¿…é ˆåŒæ™‚å­˜åœ¨ä¸Šé¢æ‰€æåˆ°çš„ä¸‰å€‹æª”æ¡ˆï¼Œæ‰èƒ½å¤ é †åˆ©è®€å–ã€‚&lt;/p>
&lt;h2 id="dotspatial-vs-gdal-why-gdal">DotSpatial V.S. GDAL: why GDAL?
&lt;/h2>&lt;p>å‰è¼©ç•™ä¸‹ä¾†çš„ç¨‹å¼ç¢¼ä¸­ï¼Œä½¿ç”¨çš„éƒ½æ˜¯ DotSpatial é€™å€‹å¥—ä»¶ï¼Œæ‰€ä»¥ä¸€é–‹å§‹æˆ‘ä¹Ÿè·Ÿè‘—ä½¿ç”¨ã€‚ä½†å¾Œä¾†åœ¨åŸ·è¡Œç¨‹å¼çš„éç¨‹ä¸­ï¼Œæ™‚ä¸æ™‚æœƒé‡åˆ°ä¸€å€‹å¥‡æ€ªçš„å•é¡Œï¼šæŠŠç›¸åŒçš„ç¨‹å¼ç¢¼éƒ¨ç½²åœ¨ä¸‰å€‹ä¸åŒçš„ç’°å¢ƒä¸Šï¼Œç”¢ç”Ÿå‡ºä¾†çš„ Shapefile Feature å…§å®¹æœƒä¸ä¸€æ¨£ã€‚&lt;br>
local ç«¯æœ‰å®Œæ•´çš„ 100 å¤šå€‹ï¼Œç§»åˆ°æ­£å¼ç’°å¢ƒä¸Šå»åªå‰©ä¸‹ä¸åˆ° 10 å€‹ ğŸ˜¢ ç”±æ–¼ä¸€ç›´ç ”ç©¶ä¸å‡ºå€‹æ‰€ä»¥ç„¶ï¼Œæ±ºå®šæœæ–·æ¨æ£„é€™å€‹å¥—ä»¶ï¼Œæ”¹ç”¨ä»Šå¤©è¦ä»‹ç´¹çš„ GDALã€‚&lt;/p>
&lt;h3 id="å®‰è£å¥—ä»¶">å®‰è£å¥—ä»¶
&lt;/h3>&lt;p>.NET Framework å’Œ .NET æ‰€å®‰è£çš„ Nuget å¥—ä»¶ä¸å¤ªç›¸åŒï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>Nuget&lt;/th>
&lt;th>Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>.NET Framework&lt;/td>
&lt;td>&lt;code>Gdal&lt;/code> &amp;amp; &lt;code>Gdal.Native&lt;/code>&lt;/td>
&lt;td>ä¿ç•™ &lt;code>.cs&lt;/code> çš„ Configuration æª”æ¡ˆå°±å¥½ï¼Œç§»é™¤å¦ä¸€å€‹ï¼Œä¸¦ä¿®æ”¹ &lt;code>namespace&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>.NET&lt;/td>
&lt;td>&lt;code>Gdal.Core&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="è®€å–-shapefile-æª”æ¡ˆ">è®€å– Shapefile æª”æ¡ˆ
&lt;/h3>&lt;p>æˆ‘åˆ©ç”¨ QGIS è£½ä½œäº†ä¸€å€‹ç°¡å–®çš„ Shapefile æª”æ¡ˆï¼Œåªæœ‰ä¸€å€‹ Featureï¼ŒåŒ…å«çš„å…§å®¹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-1/Shp1.png"
width="432"
height="142"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-1/Shp1_hu_23b6f774ab7b2595.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-1/Shp1_hu_ecfa4ffdc64a0d65.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="304"
data-flex-basis="730px"
>&lt;/p>
&lt;p>è®€å–çš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¨»å†Š GDAL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Gdal&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AllRegister&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">RegisterAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// é–‹å•Ÿ SHP æª”æ¡ˆï¼ˆ0 - è®€å–ã€1 - è®€å¯«ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Ogr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;files/simple/test.shp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">EnumShapefileOpen&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ReadOnly&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">layerCount&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">layerCount&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®€å–åœ–å±¤ Layer è³‡è¨Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">layer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerByIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">fieldCount&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">GetFieldCount&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">var&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">fieldCount&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">++)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">field&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetLayerDefn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">GetFieldDefn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">fieldName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">field&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetName&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;æ¬„ä½{j + 1}. {fieldName}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è®€å–è¦ç´  Feature&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Feature&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">feature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">layer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetNextFeature&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsInteger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹1. Id: {id}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹2. åœŸåœ°åç¨±: {name}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">area&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetFieldAsInteger64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;å…§å®¹3. åœŸåœ°é¢ç©: {area}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è½‰æ›æˆ WKT çš„å€¼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">var&lt;/span> &lt;span class="n">geometry&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">feature&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetGeometryRef&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">geometry&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ExportToWkt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">out&lt;/span> &lt;span class="kt">var&lt;/span> &lt;span class="n">wkt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">$&amp;#34;- WKT: {wkt}&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="kd">enum&lt;/span> &lt;span class="n">EnumShapefileOpen&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ReadOnly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸ·è¡Œçµæœå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/gdal-shapefile-1/Shp2.png"
width="1100"
height="219"
srcset="https://anthea-wu.github.io/post/gdal-shapefile-1/Shp2_hu_51f775485a0e3464.png 480w, https://anthea-wu.github.io/post/gdal-shapefile-1/Shp2_hu_8345583c9332df9d.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="502"
data-flex-basis="1205px"
>&lt;/p>
&lt;p>å¾åŸ·è¡Œçµæœä¸­å¯ä»¥ç™¼ç¾ï¼Œæ˜æ˜æˆ‘åœ¨ QGIS ç·¨è¼¯çš„æ™‚å€™å€¼æ˜¯ä¸­æ–‡ï¼Œåˆ°äº† C# é€™é‚Šå»è®Šæˆäº†äº‚ç¢¼ã€‚åŒæ™‚ï¼Œæ¬„ä½çš„åç¨±æ˜æ˜ä¹Ÿæ˜¯ä¸­æ–‡ï¼Œå»å¯ä»¥æ­£å¸¸åœ°é¡¯ç¤ºã€‚WHYï¼Ÿ&lt;/p>
&lt;p>è®“æˆ‘å€‘åœ¨&lt;a class="link" href="../gdal-shapefile-2" >ä¸‹å›åˆ†æ›‰&lt;/a>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/gis0911178/article/details/52162072" target="_blank" rel="noopener"
>C#ä¸ç”¨ArcEngineï¼Œç”ŸæˆShpæ–‡ä»¶(ä¸€) â€” â€” â€” â€” -shapefileæ•°æ®è¯´æ˜&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>Nginx å¾å…¥é–€é–‹å§‹çš„ç¶²ç«™æ¶è¨­ (4)</title><link>https://anthea-wu.github.io/post/nginx-web-setup-4/</link><pubDate>Sat, 02 Jul 2022 23:24:03 +0800</pubDate><guid>https://anthea-wu.github.io/post/nginx-web-setup-4/</guid><description>&lt;p>ä¸€èˆ¬åœ¨ IIS ä¸Šå•Ÿç”¨ https çš„æ­¥é©Ÿå¾ˆç°¡å–®ï¼šå…ˆåŒ¯å‡ºæ†‘è­‰è¦æ±‚ï¼Œæ¥è‘—åœ¨æ”¶åˆ°æ†‘è­‰ä¹‹å¾Œå®Œæˆæ†‘è­‰è¦æ±‚ï¼Œåœ¨ç«™å°ä¸Šè¨­å®šæ–°çš„ç¹«çµï¼Œå°‡ 443 æŒ‡å®šåˆ°ç”³è«‹çš„æ†‘è­‰ä¸Šçš„åŸŸåå³å¯ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼Œåˆ©ç”¨ IIS å»å‘ä¸­è¯é›»ä¿¡æ‰€ç”³è«‹åˆ°çš„æ†‘è­‰æ ¼å¼ç‚º &lt;code>.cer&lt;/code>ï¼Œåœ¨ Nginx çš„å®˜ç¶²ä¸­ï¼Œä½¿ç”¨çš„å»æ˜¯ &lt;code>.crt&lt;/code> æ ¼å¼ï¼Œä¸¦ä¸”é‚„å¤šäº†ä¸€å€‹ä¸€èˆ¬æµç¨‹ä¸­ä¸æœƒçœ‹åˆ°çš„ &lt;code>.key&lt;/code>ã€‚ç¶²è·¯ä¸Šçš„æ•™å­¸å¤§å¤šæ˜¯ç›´æ¥ä½¿ç”¨ &lt;code>openssl&lt;/code> å»ç”Ÿç”¢æ†‘è­‰ï¼Œç”±æ–¼é€™å€‹æ¡ˆå­æ˜¯å·²ç¶“æœ‰ç”³è«‹å¥½çš„æ†‘è­‰ï¼Œæ‰€ä»¥æˆ‘å€‘è¦é€éä¸€äº›æ–¹æ³•ä¾†æŠŠç”³è«‹åˆ°çš„æ†‘è­‰è½‰æˆ Nginx å¯ä»¥ä½¿ç”¨çš„æ ¼å¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-4/NginxDoc.png"
width="803"
height="238"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-4/NginxDoc_hu_f17f5839a3187187.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-4/NginxDoc_hu_882ae8773b9d80d6.png 1024w"
loading="lazy"
alt="Nginx å®˜æ–¹æ–‡ä»¶å°æ–¼ https è¨­å®šçš„èªªæ˜"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="809px"
>&lt;/p>
&lt;h2 id="åœ¨-nginx-ä¸­ä½¿ç”¨-cer-ä¾†è¨­å®š-https">åœ¨ Nginx ä¸­ä½¿ç”¨ &lt;code>cer&lt;/code> ä¾†è¨­å®š https
&lt;/h2>&lt;p>å¯ä»¥åœ¨ä¸Šé¢é‚£å¼µåœ–ç‰‡ä¸­è§€å¯Ÿåˆ°ï¼Œæœ‰å…©å€‹åœ°æ–¹çš„å€¼æ˜¯ç²—é«”çš„é»‘å­—ï¼š&lt;code>ssl_certificate&lt;/code> å’Œ &lt;code>ssl_certificate_key&lt;/code>ï¼Œé€™å…©å€‹éƒ¨åˆ†è¦æ”¾çš„å°±æ˜¯æ†‘è­‰çš„æª”æ¡ˆå’Œæ†‘è­‰çš„ç§å¯†é‡‘é‘°ã€‚è€Œåœ¨é€™è£¡æœƒæœ‰å…©å€‹å•é¡Œï¼š&lt;/p>
&lt;ol>
&lt;li>å¦‚æœæ˜¯åˆ©ç”¨ IIS å»ç”¢ç”Ÿæ†‘è­‰è¦æ±‚æ‰€ç”³è«‹åˆ°çš„æ†‘è­‰ï¼Œæœƒæ²’æœ‰è¾¦æ³•ç›´æ¥å¾—åˆ°ç§å¯†é‡‘é‘°ï¼Œå› ç‚ºä»–æœƒæ˜¯åŠ å¯†éå¾Œçš„å…§å®¹ï¼Œè€Œ Nginx è¦æ±‚æ˜¯ä¸èƒ½åŠ å¯†çš„æª”æ¡ˆã€‚&lt;/li>
&lt;li>ç”³è«‹æ‰€å¾—åˆ°çš„æ†‘è­‰ &lt;code>.cer&lt;/code> æ²’æœ‰è¾¦æ³•ç›´æ¥ä½¿ç”¨åœ¨ Nginx ä¸Šã€‚&lt;/li>
&lt;/ol>
&lt;p>åœ¨çœ‹é€™äº›å•é¡Œä¹‹å‰ï¼Œè¦å…ˆäº†è§£ä¸€ä¸‹é€™å¹¾å€‹æª”æ¡ˆçš„ç”¨é€”å’Œå·®åˆ¥ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">åç¨±&lt;/th>
&lt;th>ç”¨é€”&lt;/th>
&lt;th>èªªæ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;code>crt&lt;/code>&lt;/td>
&lt;td>æ†‘è­‰è­‰æ›¸&lt;/td>
&lt;td>Lunix ç³»çµ±ä¸Šçš„æª”æ¡ˆæ ¼å¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;code>cer&lt;/code>&lt;/td>
&lt;td>æ†‘è­‰è­‰æ›¸&lt;/td>
&lt;td>Windows ç³»çµ±ä¸Šçš„æª”æ¡ˆæ ¼å¼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;code>key&lt;/code>&lt;/td>
&lt;td>é‡‘é‘°&lt;/td>
&lt;td>å­˜æ”¾å…¬é‘°æˆ–ç§é‘°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;code>pfx&lt;/code>&lt;/td>
&lt;td>æ†‘è­‰è­‰æ›¸åŠç§é‘°&lt;/td>
&lt;td>Windows ç³»çµ±ä¸ŠæœƒæŠŠ &lt;code>crt&lt;/code> å’Œç§é‘° &lt;code>key&lt;/code> æ”¾åœ¨åŒä¸€å€‹æª”æ¡ˆå…§ï¼Œéœ€è¦æœ‰å¯†ç¢¼æ‰èƒ½æå–&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>äº†è§£äº†é€™å¹¾ç¨®ä¸åŒçš„åè©ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†å°±æ˜¯è¦æŠŠæˆ‘å€‘æ‰‹ä¸Šæœ‰çš„ &lt;code>cer&lt;/code> æ†‘è­‰æª”æ¡ˆè½‰æ›æˆ Nginx å¯ä»¥æ¥å—çš„æ ¼å¼ã€‚&lt;/p>
&lt;h3 id="1-åŒ¯å‡º-pfx-æª”æ¡ˆ">1. åŒ¯å‡º &lt;code>pfx&lt;/code> æª”æ¡ˆ
&lt;/h3>&lt;p>ç¬¬ä¸€å€‹æ­¥é©Ÿï¼Œæ˜¯è¦è—‰ç”± &lt;code>cer&lt;/code> ä¾†å–å¾—åŒ…å«æ†‘è­‰è­‰æ›¸å’Œç§é‘°çš„ &lt;code>pfx&lt;/code> æª”æ¡ˆã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;code>Windows + R&lt;/code> é–‹å•Ÿ åŸ·è¡Œï¼Œè¼¸å…¥ &lt;code>mmc&lt;/code>&lt;/li>
&lt;li>&lt;code>æª”æ¡ˆ &amp;gt; æ–°å¢æˆ–ç§»é™¤åµŒå…¥å¼ç®¡ç†å–®å…ƒ&lt;/code>ï¼Œæ‹‰åˆ°æœ€åº•ä¸‹æ‰¾åˆ° &lt;code>æ†‘è­‰&lt;/code>ï¼Œé»é¸å¾Œé»æ“Šä¸­é–“çš„æ–°å¢ï¼Œæœƒè·³å‡ºå¦å¤–ä¸€å€‹è¦–çª—ï¼Œé¸æ“‡ &lt;code>é›»è…¦å¸³æˆ¶ &amp;gt; æœ¬æ©Ÿé›»è…¦&lt;/code>ï¼ŒæŒ‰ä¸‹å®Œæˆå¾Œè¦–çª—æœƒå›åˆ° &lt;code>åµŒå…¥å¼ç®¡ç†å–®å…ƒ&lt;/code> é€™ä¸€å±¤ï¼Œç¢ºå®šæ†‘è­‰æœ‰è¢«ç§»å‹•åˆ°å³é‚Šçš„è¦–çª—å¾Œå°±å¯ä»¥æŒ‰ä¸‹ç¢ºå®šã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx1.png"
width="1028"
height="619"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx1_hu_4f0f4a8cd1a7c9b7.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx1_hu_9791949cfaf3b4a0.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="166"
data-flex-basis="398px"
>&lt;/p>
&lt;ol start="3">
&lt;li>åœ¨æ†‘è­‰çš„ç›®éŒ„åº•ä¸‹é¸æ“‡ &lt;code>å€‹äºº&amp;gt;æ†‘è­‰&lt;/code>ï¼Œå¦‚æœæœ‰å…ˆåœ¨ IIS å®Œæˆæ†‘è­‰è¦æ±‚çš„è©±å°±å¯ä»¥çœ‹åˆ°åŸæœ¬åŒ¯å…¥çš„æ†‘è­‰ï¼Œæ²’æœ‰çš„è©±è«‹å…ˆåŒ¯å…¥ã€‚æ‰¾åˆ°è¦åŒ¯å‡º &lt;code>pfx&lt;/code> æª”æ¡ˆçš„æ†‘è­‰å°ä»–é»é¸ &lt;code>å³éµ &amp;gt; æ‰€æœ‰å·¥ä½œ &amp;gt; åŒ¯å‡º&lt;/code>ï¼Œé¸æ“‡ &lt;code>æ˜¯ï¼ŒåŒ¯å‡ºç§å¯†é‡‘é‘°&lt;/code>ï¼Œé»é¸å…©æ¬¡ä¸‹ä¸€æ­¥é€²å…¥ &lt;code>å®‰å…¨æ€§&lt;/code> çš„é é¢ï¼Œè¼¸å…¥è¦å­˜å– &lt;code>pfx&lt;/code> æ™‚çš„å¯†ç¢¼ã€‚ä¸‹ä¸€æ­¥è¼¸å…¥æª”åå¾ŒæŒ‰ä¸‹å„²å­˜å°±å¯ä»¥å¾—åˆ° &lt;code>pfx&lt;/code> æª”æ¡ˆäº†ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx2.png"
width="1060"
height="684"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx2_hu_e21c483d8f395dc0.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-4/Pfx2_hu_fbba6a83a1419fd9.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="154"
data-flex-basis="371px"
>&lt;/p>
&lt;h3 id="2-è½‰æˆ-crt-æª”æ¡ˆ">2. è½‰æˆ &lt;code>crt&lt;/code> æª”æ¡ˆ
&lt;/h3>&lt;p>æœ‰äº† &lt;code>pfx&lt;/code> çš„ä¸‹ä¸€æ­¥å°±æ˜¯è¦è½‰æ›æˆ &lt;code>crt&lt;/code> å’Œ &lt;code>key&lt;/code>ã€‚è½‰æ›çš„æ–¹æ³•å¾ˆç°¡å–®ï¼Œä½¿ç”¨ &lt;code>openssl&lt;/code>ï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥å¾—åˆ°é€™å…©å€‹æª”æ¡ˆäº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="line">&lt;span class="cl"># è¼¸å‡º crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl pkcs12 -in server.pfx -clcerts -nokeys -out server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¼¸å‡º key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl pkcs12 -in server.pfx -nocerts -nodes -out server.rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-ä¿®æ”¹-nginxconf">3. ä¿®æ”¹ &lt;code>nginx.conf&lt;/code>
&lt;/h3>&lt;p>ç”¢å‡ºå…©å€‹æª”æ¡ˆä¹‹å¾Œå°±å¯ä»¥é€²å…¥ &lt;code>nginx.conf&lt;/code> çš„ä¿®æ”¹äº†ã€‚ä¿®æ”¹å¥½è¨˜å¾—è¦ &lt;code>nginx -s reload&lt;/code>ï¼Œé˜²ç«ç‰† 443 port çš„éƒ¨åˆ†ä¹Ÿè¦è¨˜å¾—é–‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">events {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> worker_connections 4096;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> upstream www.abc.com {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server localhost:8082;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server localhost:8083;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # å› ç‚ºæ˜¯æ­£å¼çš„ç’°å¢ƒï¼Œé˜²ç«ç‰†ä¹Ÿéœ€è¦ç”³è«‹ï¼Œæ‰€ä»¥æ”¹æˆç›£è½åŸæœ¬ IIS ç›£è½çš„ 80 port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.abc.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # å°‡ http è½‰å°åˆ° https
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return 301 https://$host$request_uri;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 443 ssl;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name www.abc.com;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate server.crt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key server.rsa;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_ciphers HIGH:!aNULL:!MD5;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://guideapp.npm.gov.tw;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ä»¥ä¸‹ç‚º proxy çš„è©³ç´°è¨­ç½®ï¼Œå¯ä»¥åƒè€ƒä¸‹åˆ—ç¶²ç«™çš„èªªæ˜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # https://www.cnblogs.com/kevingrace/p/8269955.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection keep-alive;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host $host;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_cache_bypass $http_upgrade;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒè³‡æ–™&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/109225748" target="_blank" rel="noopener"
>Nginx ä¸­ä½¿ç”¨ PFX æ ¼å¼çš„ SSL è¯ä¹¦&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.csdn.net/itworld123/article/details/115553346" target="_blank" rel="noopener"
>crtã€pemã€pfxã€cerã€key ä½œç”¨åŠå€åˆ¥&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>Nginx å¾å…¥é–€é–‹å§‹çš„ç¶²ç«™æ¶è¨­ (3)</title><link>https://anthea-wu.github.io/post/nginx-web-setup-3/</link><pubDate>Thu, 23 Jun 2022 23:15:50 +0800</pubDate><guid>https://anthea-wu.github.io/post/nginx-web-setup-3/</guid><description>&lt;p>&lt;a class="link" href="../nginx-web-setup-2" >ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a> ä¸­æˆ‘å€‘ç”¨æœ€ç°¡å–®çš„è¨­å®šå»ºç«‹èµ·ä¸€å€‹éœæ…‹æœå‹™äº†ï¼Œæ¥ä¸‹ä¾†è¦æåˆ°çš„æ˜¯ Nginx æœ€å»£ç‚ºäººçŸ¥çš„å…¶ä¸­ä¸€ç¨®åŠŸèƒ½ï¼ï¼ä»£ç†ä¼ºæœå™¨ï¼ˆProxy Serverï¼‰ã€‚&lt;/p>
&lt;h2 id="proxy-server-ä»£ç†ä¼ºæœå™¨">Proxy Server ä»£ç†ä¼ºæœå™¨
&lt;/h2>&lt;p>æœ‰ä¸€é™£å­å‹Ÿè³‡å¹³å°å¾ˆæµè¡Œï¼Œç•¶ä½ æœ‰æƒ³æ³•ä½†æ˜¯æ²’æœ‰è³‡é‡‘çš„æ™‚å€™ï¼Œä½ å¯ä»¥é€éé€™äº›å¹³å°æŠŠä½ çš„è¨ˆåŠƒæ”¾ä¸Šå»ï¼Œå¸å¼•ä¸€èˆ¬æ°‘çœ¾æŠ•å…¥è³‡é‡‘ï¼Œæ¥è‘—æ‹¿é€™äº›éŒ¢å»å¯¦éš›ç”Ÿç”¢ä½ çš„ç”¢å“ï¼Œä¸¦çµ¦ç•¶åˆæä¾›ä½ è³‡é‡‘çš„æ°‘çœ¾ä¸€äº›å›é¥‹ã€‚åœ¨é€™å€‹éç¨‹ä¸­ï¼Œå‹Ÿè³‡å¹³å°æ‰€æ‰®æ¼”çš„è§’è‰²å°±æ˜¯ä»£ç†ï¼šä½ åªèƒ½çœ‹åˆ°è³‡é‡‘æä¾›è€…çš„æä¾›çš„å¯„ä»¶è³‡è¨Šï¼Œç”šè‡³å®Œå…¨ä¸çŸ¥é“ä»–å€‘çš„èº«åˆ†ï¼Œä½†ä½ æœƒè² è²¬æŠŠä½ çš„ç”¢å“æˆ–å›é¥‹é€éå¹³å°æä¾›å‡ºå»ã€‚&lt;/p>
&lt;p>ä»¥ç¶²è·¯ä¾†èªªï¼ŒClientï¼ˆä¸€èˆ¬æ°‘çœ¾ï¼‰é€éä»£ç†ä¼ºæœå™¨ï¼ˆå‹Ÿè³‡å¹³å°ï¼‰ç™¼é€è«‹æ±‚çµ¦ Serverï¼ˆä½ ï¼‰ï¼ŒServer åŸºæœ¬ä¸Šä¸æœƒæœ‰ Client çš„è³‡æ–™ï¼Œè€Œé€™å°±æ˜¯ Proxy çš„å¥½è™•ä¹‹ä¸€ï¼šéš±è— Client çš„çœŸå¯¦èº«åˆ†ã€‚&lt;/p>
&lt;p>å…¶ä»–çš„å¥½è™•é‚„æœ‰å¾ˆå¤šï¼Œä½†ä»Šå¤©æˆ‘åªæƒ³çœ‹é€™æ¬¡å®¢æˆ¶æœ€ä¸»è¦çš„ç›®çš„ï¼šLoad Balanceï¼ˆè² è¼‰å¹³è¡¡ï¼‰ã€‚&lt;/p>
&lt;h3 id="load-balance-è² è¼‰å¹³è¡¡">Load Balance è² è¼‰å¹³è¡¡
&lt;/h3>&lt;p>Load Balance çš„ä¸»è¦ç›®çš„åœ¨æ–¼åˆ†æ•£ä¼ºæœå™¨ç«¯çš„å£“åŠ›ï¼Œè®“ä¼ºæœå™¨çš„å›æ‡‰é€Ÿåº¦å’Œå…¶ä»–æ•ˆèƒ½å¯ä»¥å¾—åˆ°æå‡ï¼Œä½¿ç”¨è€…èƒ½æ“æœ‰æ›´å¥½çš„é«”é©—ã€‚è€Œè¦åšåˆ°é€™å€‹ç¨‹åº¦ä¸€èˆ¬ä¾†èªªéƒ½æœƒéœ€è¦ä¾è³´å‰›å‰›æ‰€æåˆ°çš„ proxy åšç‚ºä¸­ç¹¼ç«™ï¼Œå»åˆ¤æ–·ç¾åœ¨æ¥æ”¶åˆ°çš„é€™å€‹ request è¦è¢«åˆ†é…åˆ°å“ªä¸€å° server ä¸Šã€‚&lt;/p>
&lt;hr>
&lt;h2 id="nginx-è¨­å®š">Nginx è¨­å®š
&lt;/h2>&lt;p>ç¨å¾®äº†è§£ Proxy Server å’Œ Load Balance çš„ç”¨é€”ä¹‹å¾Œï¼Œæ¥ä¸‹ä¾†é–‹å§‹è©¦è‘—ç”¨ Nginx ä¾†é€²è¡Œè¨­å®šå§ã€‚&lt;/p>
&lt;h3 id="proxy">Proxy
&lt;/h3>&lt;p>é¦–å…ˆè¨­å®šå¥½ &lt;code>nginx.conf&lt;/code> ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">events {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> worker_connections 1024;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8081;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ä»¥ &amp;#39;/&amp;#39; é–‹é ­çš„ url æœƒå‘ &amp;#39;/data/www&amp;#39; ç™¼é€è«‹æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # è¨­å®šè¦å°å‘çš„è·¯å¾‘
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # å¦‚æœ IIS ä¸Šæœ‰è¨­å®š 8082 port çš„ç«™å°å°±æœƒè¢«å°å‘é‚£å€‹ç«™å°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://localhost:8082;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # IIS ä¸Šæ²’æœ‰çš„ç«™å°ï¼Œè¨­å®š 8082 port çš„å…§å®¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8082;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ä»¥ &amp;#39;/&amp;#39; é–‹é ­çš„ url æœƒå‘ &amp;#39;/data/www2&amp;#39; ç™¼é€è«‹æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root data/www2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥è‘—åˆ° &lt;code>/data/www2&lt;/code> åº•ä¸‹æ–°å¢ä¸€å€‹æ–°çš„ &lt;code>index.html&lt;/code>ï¼Œé€™æ™‚å€™ &lt;code>www&lt;/code> å’Œ &lt;code>www2&lt;/code> çš„è³‡æ–™å¤¾å…§å„æœ‰ä¸€å€‹ &lt;code>index.html&lt;/code>ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘å€‘æœƒçœ‹åˆ° &lt;code>www&lt;/code> å…§çš„ &lt;code>index.html&lt;/code>ï¼Œé€™ä¸€æ¬¡çš„è¨­å®šé æœŸæœƒå‡ºç¾çš„æ‡‰è©²æ˜¯ &lt;code>www2&lt;/code> å…§çš„ &lt;code>index.html&lt;/code>ã€‚&lt;/p>
&lt;p>å„²å­˜ä¿®æ”¹å¥½çš„ config ä¹‹å¾Œï¼Œ&lt;code>nginx -s reload&lt;/code> é‡æ–°è¼‰å…¥æª”æ¡ˆï¼Œåœ¨ç€è¦½å™¨ä¸­è¼¸å…¥ &lt;code>http://localhost:8081&lt;/code> æ‡‰è©²å°±å¯ä»¥çœ‹åˆ° &lt;code>www2&lt;/code> ä¸­ &lt;code>index.html&lt;/code> çš„å…§å®¹å›‰ã€‚&lt;/p>
&lt;h3 id="load-balance">Load Balance
&lt;/h3>&lt;p>è¦åœ¨ Nginx ä¸­ä½¿ç”¨ Load Balance éœ€è¦åœ¨ http ä¸­åŠ å…¥ upstream é€™çµ„è¨­å®šï¼ŒåŠ å¥½ä¹‹å¾Œä½ çš„ &lt;code>nginx.conf&lt;/code> æ‡‰è©²æœƒé•·é€™æ¨£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">events {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> worker_connections 1024;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;#39;localhost&amp;#39; æ˜¯é€™çµ„ upstream çš„åç¨±
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> upstream localhost {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # åˆ©ç”¨ &amp;#39;weight&amp;#39; ä¾†è¨­å®šæ¬Šé‡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server localhost:8082 weight=1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server localhost:8083 weight=2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8081;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # é€™è£¡è¦æ”¹æˆ upstream çš„åç¨±
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8082;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # åœ¨ nginx.exe åŒä¸€å±¤çš„è³‡æ–™å¤¾ data è£¡é¢æ–°å¢ä¸€å€‹è³‡æ–™å¤¾ www å’Œ index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root data/www;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8083;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # åœ¨ nginx.exe åŒä¸€å±¤çš„è³‡æ–™å¤¾ data è£¡é¢æ–°å¢ä¸€å€‹è³‡æ–™å¤¾ www2 å’Œ index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root data/www2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¨­å®šå¥½ä¹‹å¾Œ &lt;code>nginx -s reload&lt;/code>ï¼Œç€è¦½å™¨æ‰“é–‹ &lt;code>http://localhost:8081&lt;/code>ï¼ŒæŒçºŒé‡æ–°æ•´ç†ï¼Œå°±å¯ä»¥çœ‹åˆ°äº¤æ›¿å‡ºç¾çš„å…©å€‹ &lt;code>index.html&lt;/code> å›‰~&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-3/Index1.png"
width="515"
height="202"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-3/Index1_hu_f14ae67f5c331a6d.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-3/Index1_hu_a80fb3fdcd691604.png 1024w"
loading="lazy"
alt="ä½æ–¼ 8083 ä¸­ www2 çš„ index.html"
class="gallery-image"
data-flex-grow="254"
data-flex-basis="611px"
>&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-3/index2.png"
width="521"
height="198"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-3/index2_hu_b42fff8b9d1c0c03.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-3/index2_hu_8931d83e05f7ca1b.png 1024w"
loading="lazy"
alt="ä½æ–¼ 8082 ä¸­ www çš„ index.html"
class="gallery-image"
data-flex-grow="263"
data-flex-basis="631px"
>&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒè³‡æ–™ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.zhihu.com/question/24723688" target="_blank" rel="noopener"
>åå‘ä»£ç†èˆ‡æ­£å‘ä»£ç†&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://ithelp.ithome.com.tw/articles/10188498" target="_blank" rel="noopener"
>ä¿„ç¾…æ–¯ä¸æ„§æ˜¯æˆ°é¬¥æ°‘æ—ï¼šnginx&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>Nginx å¾å…¥é–€é–‹å§‹çš„ç¶²ç«™æ¶è¨­ (2)</title><link>https://anthea-wu.github.io/post/nginx-web-setup-2/</link><pubDate>Fri, 17 Jun 2022 22:53:49 +0800</pubDate><guid>https://anthea-wu.github.io/post/nginx-web-setup-2/</guid><description>&lt;p>åœ¨&lt;a class="link" href="../nginx-web-setup-1" >ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a>ä¸­æˆ‘å€‘ç°¡å–®èªè­˜äº† nginx çš„æ“ä½œï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘è¦é€éé‚£äº›æ“ä½œä¾†å»ºç«‹ä¸€å€‹éœæ…‹æœå‹™ã€‚&lt;/p>
&lt;h3 id="1-æº–å‚™è³‡æ–™">1. æº–å‚™è³‡æ–™
&lt;/h3>&lt;p>å‡è¨­æˆ‘å€‘çš„ &lt;code>nginx.exe&lt;/code> ä½æ–¼ &lt;code>nginx&lt;/code> åº•ä¸‹ï¼Œæ¥è‘—æˆ‘å€‘åœ¨é€™è£¡æ–°å¢ä¸€å€‹è³‡æ–™å¤¾ &lt;code>data&lt;/code>ï¼Œä¸¦åœ¨ &lt;code>data&lt;/code> è£¡é¢å†æ–°å¢å…©å€‹è³‡æ–™å¤¾ï¼Œåˆ†åˆ¥æ˜¯ &lt;code>www&lt;/code> å’Œ &lt;code>images&lt;/code>ï¼Œå°‡ &lt;code>index.html&lt;/code> æ”¾å…¥ &lt;code>www&lt;/code> è³‡æ–™å¤¾ä¸­ï¼Œå°‡ä»»æ„çš„åœ–ç‰‡æ”¾åˆ° &lt;code>images&lt;/code> è³‡æ–™å¤¾å…§ï¼Œé€™æ™‚å€™ä½ çš„è³‡æ–™å¤¾çµæ§‹æœƒåƒé€™æ¨£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |- nginx.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |- conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |- data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |- www
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | |- index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | |- images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | |- test.jpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> |- ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-ä¿®æ”¹-nginxconf">2. ä¿®æ”¹ &lt;code>nginx.conf&lt;/code>
&lt;/h3>&lt;p>æ¥è‘—é–‹å•Ÿä½ çš„ &lt;code>nginx.conf&lt;/code>ï¼Œä¸¦ç”¨ä¸‹é¢çš„å…§å®¹å–ä»£æ‰åŸæœ¬çš„è¨­å®šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">events {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> worker_connections 1024;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # å¦‚æœé›»è…¦ä¸Šæœ‰è£ IISï¼Œé è¨­æœƒå ç”¨æ‰ 80 port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ç•¶é€™è£¡æ²’æœ‰æ”¹æˆå…¶ä»– port è™Ÿï¼Œå°±ç®—é‹è¡Œäº† nginx ä¹Ÿæœƒè¢«å¸¶åˆ° IIS çš„ç•«é¢å»
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 8081;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name localhost;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ä»¥ &amp;#39;/&amp;#39; é–‹é ­çš„ url æœƒå‘ &amp;#39;/data/www&amp;#39; ç™¼é€è«‹æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # å®˜æ–¹æ–‡ä»¶ä¸Šæ˜¯å¯« &amp;#39;/data/www&amp;#39;ï¼Œä½†æ¸¬è©¦éå¾Œç„¡æ³•åŸ·è¡Œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root data/www;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # ä»¥ &amp;#39;/images/&amp;#39; é–‹é ­çš„ url æœƒå‘ &amp;#39;/data&amp;#39; ç™¼é€è«‹æ±‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /images/ {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root data;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¨­å®š &lt;code>location&lt;/code> çš„æ™‚å€™ï¼Œå¦‚æœä¸€å€‹ url å¦‚æœæœ‰å¤šå€‹ç›¸ç¬¦çš„å€å¡Šï¼Œnginx æœƒé¸æ“‡å…·æœ‰æœ€é•·å‰ç¶´çš„å€å¡Šä¾†ç™¼é€è«‹æ±‚ã€‚ä»¥ä¸Šé¢çš„ä¾‹å­ä¾†èªªï¼Œç¬¬ä¸€å€‹å€å¡Šçš„å‰ç¶´æ˜¯ &lt;code>/&lt;/code>ï¼Œé•·åº¦ç‚º 1ï¼Œå› æ­¤ç•¶æˆ‘è¼¸å…¥ç¶²å€ &lt;code>/books&lt;/code> æ™‚ï¼Œnginx æœƒå¹«æˆ‘å¾é•·åº¦æ›´é•·çš„ &lt;code>/images&lt;/code> é–‹å§‹æ¯”å°ã€‚é€™æ™‚å€™å› ç‚ºæ²’æœ‰å…¶ä»–ç›¸ç¬¦çš„ç›®çš„åœ°äº†ï¼Œæ‰€ä»¥ä»–æœƒèµ°é€²æœ€çŸ­çš„ &lt;code>/&lt;/code> è£¡ã€‚&lt;/p>
&lt;h3 id="3-reload-nginxconf">3. reload &lt;code>nginx.conf&lt;/code>
&lt;/h3>&lt;p>å°‡ &lt;code>nginx.conf&lt;/code> å„²å­˜ä¹‹å¾Œï¼Œé–‹å•Ÿ cmd å°‡ç›®éŒ„åˆ‡æ›åˆ° nginx çš„è³‡æ–™å¤¾åº•ä¸‹ï¼Œå¦‚æœå·²ç¶“å•Ÿå‹•é nginxï¼ŒåŸ·è¡Œ &lt;code>nginx -s reload&lt;/code> ä¾†é‡æ–°è¼‰å…¥æ”¹å¯«å¥½çš„ &lt;code>nginx.conf&lt;/code>ï¼›å¦‚æœé‚„æ²’æœ‰ï¼Œè¼¸å…¥ &lt;code>start nginx&lt;/code> ä¾†å•Ÿå‹• nginxã€‚&lt;/p>
&lt;p>æ²’æœ‰å‡ºç¾ä»»ä½•éŒ¯èª¤çš„è©±ï¼Œå°±å¯ä»¥æ‰“é–‹ç€è¦½å™¨ï¼Œè¼¸å…¥ &lt;code>localhost:8081&lt;/code> å°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘å‰›å‰›æ–°å¢åœ¨ &lt;code>/data/www&lt;/code> åº•ä¸‹çš„ &lt;code>index.html&lt;/code> äº†ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒè³‡æ–™&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noopener"
>Beginnerâ€™s Guide&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>Nginx å¾å…¥é–€é–‹å§‹çš„ç¶²ç«™æ¶è¨­ (1)</title><link>https://anthea-wu.github.io/post/nginx-web-setup-1/</link><pubDate>Fri, 17 Jun 2022 22:41:56 +0800</pubDate><guid>https://anthea-wu.github.io/post/nginx-web-setup-1/</guid><description>&lt;p>æœ€è¿‘æœ‰å€‹æ¡ˆå­ï¼Œå®¢æˆ¶è¦ºå¾—æˆ‘å€‘ç¬¬ä¸€æ¬¡äº¤ä¸Šå»çš„å£“åŠ›æ¸¬è©¦çµæœå¤ªç‹¼ç‹½ï¼Œè¦æˆ‘å€‘æƒ³è¾¦æ³•æŠŠæ•¸å­—åšå¾—æ›´å¥½ï¼Œæ–¼æ˜¯æˆ‘å€‘å˜—è©¦äº† windows å…§å»ºçš„ Network Load Balanceï¼ˆNLBï¼‰ä¾†é€²è¡Œè¨­å®šï¼Œç¤™æ–¼ç¶²è·¯ç®¡ç†çš„åŸºç¤çŸ¥è­˜ä¸è¶³ï¼Œé‡åˆ°äº†éå¸¸å¤šçš„é˜»ç¤™ QQ&lt;/p>
&lt;p>æœ€å¾Œé€é Nginx æˆåŠŸåšåˆ°äº† Load Balanceï¼Œé€™å€‹ç³»åˆ—çš„æ–‡ç« å°±æ˜¯ä¾†ç´€éŒ„é †ä¾¿è¤‡ç¿’å­¸ç¿’åˆ°çš„å…§å®¹ã€‚&lt;/p>
&lt;h2 id="beginners-guide">Beginnerâ€™s Guide
&lt;/h2>&lt;p>å¾ Nginx çš„å®˜ç¶²ä¸Š&lt;a class="link" href="https://nginx.org/en/download.html" target="_blank" rel="noopener"
>ä¸‹è¼‰&lt;/a>ä¸‹ä¾†çš„æª”æ¡ˆå…§å®¹å…¶å¯¦å¾ˆç°¡å–®ï¼Œåªæœ‰ä¸€å€‹ exe åŸ·è¡Œæª”å’Œä¸€äº›è³‡æ–™å¤¾ã€‚&lt;/p>
&lt;p>Nginx çš„é‹ä½œæ–¹å¼ä¸»è¦æ˜¯é  &lt;code>nginx.conf&lt;/code> ä¾†æ±ºå®šçš„ï¼Œé€™å€‹æª”æ¡ˆé€šå¸¸æœƒåœ¨ &lt;code>/usr/local/nginx/conf&lt;/code> &lt;code>/etc/nginx&lt;/code> &lt;code>/usr/local/etc/nginx&lt;/code> é€™å¹¾å€‹ç›®éŒ„åº•ä¸‹ã€‚&lt;/p>
&lt;h3 id="å•Ÿå‹•-nginx">å•Ÿå‹• Nginx
&lt;/h3>&lt;ol>
&lt;li>é›™æ“Šä¾†åŸ·è¡Œ &lt;code>nginx.exe&lt;/code>&lt;/li>
&lt;li>é€é cmd åˆ‡æ›åˆ° nginx çš„è³‡æ–™å¤¾åº•ä¸‹ï¼ŒåŸ·è¡Œ &lt;code>start nginx&lt;/code>&lt;/li>
&lt;/ol>
&lt;h3 id="å°-nginx-é€²è¡Œæ“ä½œ">å° Nginx é€²è¡Œæ“ä½œ
&lt;/h3>&lt;p>nginx è¢«åŸ·è¡Œèµ·ä¾†å¾Œå°±éœ€è¦ä»¥ &lt;code>nginx -s &amp;lt;options&amp;gt;&lt;/code> çš„æ–¹å¼ä¾†æ§åˆ¶ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/nginx-web-setup-1/NginxOption.png"
width="422"
height="247"
srcset="https://anthea-wu.github.io/post/nginx-web-setup-1/NginxOption_hu_e396ffd7b823fb3a.png 480w, https://anthea-wu.github.io/post/nginx-web-setup-1/NginxOption_hu_7cddebe8d7468efd.png 1024w"
loading="lazy"
alt="nginx -x ä¸­ options å¯ä»¥å¡«å…¥çš„å…§å®¹å’Œèªªæ˜ã€‚"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="410px"
>&lt;/p>
&lt;p>å…¶ä¸­ &lt;code>nginx -s stop&lt;/code> å’Œ &lt;code>nginx -s quit&lt;/code> çš„å·®åˆ¥åœ¨æ–¼ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>quit&lt;/code> - åœæ­¢æ¥æ”¶ requestï¼Œç­‰åˆ°æ‰‹ä¸Šé€™å€‹ request è™•ç†å®Œä¹‹å¾Œï¼Œæ‰æœƒçµæŸç›®å‰çš„æœå‹™&lt;/li>
&lt;li>&lt;code>stop&lt;/code> - ç«‹åˆ»çµæŸæœå‹™&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–ï¼Œ &lt;code>nginx -s quit&lt;/code> åªèƒ½ç”±é–‹å•Ÿ nginx çš„ä½¿ç”¨è€…ï¼ˆå¸³è™Ÿï¼‰åŸ·è¡Œã€‚&lt;/p>
&lt;p>é™¤äº† &lt;code>nginx -s stop&lt;/code> ä¹‹å¤–ï¼Œæœ€å¸¸æœƒç”¨åˆ°çš„æ‡‰è©²æ˜¯ &lt;code>nginx -s reload&lt;/code>ã€‚&lt;/p>
&lt;p>å¦‚æœ &lt;code>nginx.conf&lt;/code> æœ‰é€²è¡Œä¿®æ”¹çš„è©±ï¼ŒåŸ·è¡Œ reload å¾Œä¸»ç¨‹å¼æ‰æœƒåƒåˆ°é€™å€‹è¨­å®šçš„æ›´æ”¹ã€‚å¦‚æœä¸»ç¨‹å¼è¨­å®šæˆåŠŸï¼Œæœƒé€šçŸ¥å…¶ä»–èˆŠæœ‰çš„ç¨‹å¼ï¼Œè®“ä»–å€‘åœæ­¢æ¥æ”¶æ–°çš„ requestï¼Œå°‡æ‰‹ä¸Šçš„ request è™•ç†å®Œä¹‹å¾ŒçµæŸæœå‹™ï¼Œç”¨æ–°çš„è¨­å®šé–‹å•Ÿä¸€å€‹æ–°çš„ç¨‹å¼ã€‚å¦‚æœä¸»ç¨‹å¼è¨­å®šå¤±æ•—çš„è©±ï¼ŒæœƒæŠŠè¨­å®š rollback æˆèˆŠçš„è¨­å®šä¸¦ç¹¼çºŒåŸ·è¡Œã€‚&lt;/p>
&lt;h3 id="config-æª”æ¡ˆçš„åè©">config æª”æ¡ˆçš„åè©
&lt;/h3>&lt;p>åœ¨ä¿®æ”¹ &lt;code>nginx.conf&lt;/code> ä¹‹å‰ï¼Œå…ˆä¾†èªè­˜ä¸€ä¸‹ config æª”æ¡ˆè£é¢åŸºæœ¬çš„çµ„æˆå…ƒç´ ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>simple directives&lt;/code> - åŒ…å«æŒ‡ä»¤åç¨±å’Œåƒæ•¸ï¼Œå…©è€…ä¹‹é–“ç”¨åŠå½¢ç©ºç™½ä¾†å€éš”ï¼Œä¸¦ä¸”ä»¥åŠå½¢åˆ†è™Ÿ &lt;code>;&lt;/code> ä½œç‚ºçµå°¾&lt;/li>
&lt;li>&lt;code>block directive&lt;/code> - çµæ§‹å’Œ &lt;code>simple directives&lt;/code> ä¸€æ¨£ï¼Œä½†ä»–æœƒè¢«åŠå½¢å¤§æ‹¬è™Ÿ &lt;code>{}&lt;/code> åŒ…èµ·ä¾†&lt;/li>
&lt;li>&lt;code>context&lt;/code> - ä¸€å€‹ &lt;code>block directive&lt;/code> è£¡é¢æœ‰å…¶ä»–çš„ &lt;code>directive&lt;/code>ï¼Œä¾‹å¦‚ &lt;code>events&lt;/code> &lt;code>http&lt;/code> &lt;code>server&lt;/code> &lt;code>location&lt;/code> éƒ½æ˜¯å±¬æ–¼ &lt;code>context&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>åŒä¸€å€‹ä»‹é¢å¤šå€‹å¯¦ä½œçš„è¨»å†Š</title><link>https://anthea-wu.github.io/post/%E5%90%8C%E4%B8%80%E5%80%8B%E4%BB%8B%E9%9D%A2%E5%A4%9A%E5%80%8B%E5%AF%A6%E4%BD%9C%E7%9A%84%E8%A8%BB%E5%86%8A/</link><pubDate>Wed, 25 May 2022 22:29:58 +0800</pubDate><guid>https://anthea-wu.github.io/post/%E5%90%8C%E4%B8%80%E5%80%8B%E4%BB%8B%E9%9D%A2%E5%A4%9A%E5%80%8B%E5%AF%A6%E4%BD%9C%E7%9A%84%E8%A8%BB%E5%86%8A/</guid><description>&lt;p>ä»Šå¤©çš„é‡é»æ˜¯åœ¨æ–¼ç•¶æˆ‘ä½¿ç”¨äº†åŒä¸€å€‹ Interface çš„æ™‚å€™ï¼Œè¦å¦‚ä½•è¨»å†Šä¸¦ä¸”åˆ†åˆ¥å–å¾—å¤šç¨®å¯¦ä½œçš„éƒ¨åˆ†ï¼Œå› æ­¤ä¸æœƒè‘—å¢¨åœ¨ Interface çš„åŸç†å’Œ DI çš„ä»‹ç´¹ã€‚&lt;/p>
&lt;h2 id="net-å’Œ-web-api">.NET å’Œ Web API
&lt;/h2>&lt;p>å‡è¨­ä»Šå¤©æœ‰å…©ç¨®å‚³é€è¨Šæ¯çš„æ–¹å¼ï¼Œä¸€ç¨®æ˜¯é€é slackï¼Œä¸€ç¨®æ˜¯é€é gmailï¼Œåœ¨åŒä¸€å€‹æƒ³è¦åŒæ™‚ä½¿ç”¨å…©ç¨®ç™¼é€æ–¹å¼çš„è©±ï¼Œå°±æœƒéœ€è¦ä½¿ç”¨åˆ° &lt;code>åŒä¸€å€‹ä»‹é¢è¨»å†Šå¤šå€‹å¯¦ä½œ&lt;/code> çš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>é¦–å…ˆå»ºç«‹å…©å€‹ Serviceï¼Œä¸€å€‹æ˜¯ slack ä¸€å€‹æ˜¯ gmailï¼Œä¸¦æŠ½å‡º interfaceï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">interface&lt;/span> &lt;span class="nc">IMessageService&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">void&lt;/span> &lt;span class="n">Send&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">SlackService&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IMessageService&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Send&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Send By Slack&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">GmailService&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IMessageService&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Send&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">WriteLine&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Send By Gmail&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥è‘—æˆ‘å€‘åœ¨ &lt;code>Program.cs&lt;/code> ä½¿ç”¨ &lt;code>delegate&lt;/code> è¨»å†Š &lt;code>Interface&lt;/code>ï¼Œä¸¦ä¸”å‘ŠçŸ¥å°æ‡‰çš„ key è¼¸å…¥çš„æ™‚å€™è¦å›å‚³å“ªä¸€å€‹ Serviceï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">builder&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">WebApplication&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">CreateBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddControllers&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">GmailService&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">SlackService&lt;/span>&lt;span class="p">&amp;gt;();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Services&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">AddSingleton&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">MessageServiceResolver&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="n">serviceProvider&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="k">switch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;gmail&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">serviceProvider&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetService&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">GmailService&lt;/span>&lt;span class="p">&amp;gt;(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;slack&amp;#34;&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="n">serviceProvider&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">GetService&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">SlackService&lt;/span>&lt;span class="p">&amp;gt;(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">builder&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Build&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MapControllers&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Run&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span> &lt;span class="k">delegate&lt;/span> &lt;span class="n">IMessageService&lt;/span> &lt;span class="n">MessageServiceResolver&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">string&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€å¾Œï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹ Controllerï¼Œåœ¨ Controller è£¡ä½¿ç”¨çš„æ™‚å€™åˆ†è¾¨è¨»å†Š Interfaceï¼Œä¸¦èª¿ç”¨ &lt;code>MessageServiceResolver&lt;/code> ä¾†åˆ†åˆ¥å–å¾—å¯¦ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Microsoft.AspNetCore.Mvc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nn">WebApplication1.Controllers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">[ApiController, Route(&amp;#34;api/[controller]&lt;/span>&lt;span class="s">&amp;#34;)]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="kd">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">TestController&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ControllerBase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">IMessageService&lt;/span> &lt;span class="n">_gmail&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">private&lt;/span> &lt;span class="k">readonly&lt;/span> &lt;span class="n">IMessageService&lt;/span> &lt;span class="n">_slack&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="n">TestController&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MessageServiceResolver&lt;/span> &lt;span class="n">_service&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_slack&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">_service&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;slack&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_gmail&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">_service&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;gmail&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">public&lt;/span> &lt;span class="k">void&lt;/span> &lt;span class="n">Test&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_slack&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Send&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_gmail&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Send&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒè³‡æ–™&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://stackoverflow.com/questions/39174989/how-to-register-multiple-implementations-of-the-same-interface-in-asp-net-core" target="_blank" rel="noopener"
>How To Register Mmultiple Implementations Of The Same Interface In Asp Net Core&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>Google Calendar API</title><link>https://anthea-wu.github.io/post/google-calendar-api/</link><pubDate>Sat, 14 May 2022 21:55:35 +0800</pubDate><guid>https://anthea-wu.github.io/post/google-calendar-api/</guid><description>&lt;p>æœ€è¿‘é–‹å§‹æ€è€ƒæœ‰ä»€éº¼æ¨£çš„éœ€æ±‚å¯ä»¥ç•¶ä½œå°å°çš„ side project ç·´ç¿’ï¼Œå‰›å¥½æœ€è¿‘ç–«æƒ…çš„é—œä¿‚æ¯”è¼ƒå¤šäººè«‹å‡ï¼Œæˆ‘å°±æŠŠè…¦ç­‹å‹•åˆ°äº†è«‹å‡ç³»çµ±èº«ä¸Šã€‚åœ¨ç›®å‰çš„è«‹å‡æµç¨‹ä¸­ï¼Œæœ‰ä¸€å€‹éƒ¨åˆ†æ˜¯å¡«å¯« google è¡¨å–®ï¼Œé€å‡ºä¹‹å¾Œæœƒè‡ªå‹•æ–°å¢åˆ° google calendar ä¸Šï¼Œåªè¦æœ‰åŠ å…¥é€™å€‹æ—¥æ›†çš„äººéƒ½å¯ä»¥çœ‹åˆ°ã€‚æ‰€ä»¥æ±ºå®šä»¥é€™å€‹ç‚ºä¸»é¡Œï¼Œçˆ¬äº†ä¸€ä¸‹æ–‡ï¼Œé †ä¾¿ç´€éŒ„ä¸€ä¸‹ä½¿ç”¨ google calendar çš„éç¨‹ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨å‰çš„æº–å‚™">ä½¿ç”¨å‰çš„æº–å‚™
&lt;/h2>&lt;p>Google API éƒ½æ˜¯é€é token ä¾†æ“ä½œçš„ï¼Œæ‰€ä»¥åœ¨æ­£å¼ä½¿ç”¨å‰éœ€è¦å…ˆç”³è«‹å¥½ tokenï¼Œä¸¦è·Ÿæˆ‘å€‘è‡ªå·±çš„ google calendar é€£å‹•ã€‚&lt;/p>
&lt;h3 id="ç”³è«‹-token">ç”³è«‹ Token
&lt;/h3>&lt;ol>
&lt;li>é€²å…¥ &lt;a class="link" href="https://console.cloud.google.com/" target="_blank" rel="noopener"
>Google Cloud Platform&lt;/a>ï¼Œé è¨­æœƒå¹«ä½ å»ºç«‹ä¸€å€‹æ–°çš„å°ˆæ¡ˆï¼Œå¦‚æœè¦æ›´æ”¹å¯ä»¥é»é¸ç•«é¢ä¸Šæ–¹çš„ &lt;code>My First Project&lt;/code>ã€‚ä¸éœ€è¦çš„è©±ï¼Œç›´æ¥é»é¸ç•«é¢å·¦å´çš„é¸å–®ï¼Œå¾ &lt;code>API èˆ‡æœå‹™&lt;/code> ä¸­é¸æ“‡ &lt;code>ç¨‹å¼åº«&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Token1.png"
width="1100"
height="489"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Token1_hu_1dc1f43baf320a5e.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Token1_hu_3fbb305ab8f8999e.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="224"
data-flex-basis="539px"
>&lt;/p>
&lt;ol start="2">
&lt;li>æœå°‹ &lt;code>Google Calendar API&lt;/code> ä¸¦å•Ÿç”¨ï¼Œç­‰ loading è·‘å®Œå¾Œæœƒå‡ºç¾ &lt;code>ç®¡ç†&lt;/code> çš„æŒ‰éˆ•ï¼Œæˆ–æ˜¯å¾é¸å–®çš„ &lt;code>API èˆ‡æœå‹™&lt;/code> ä¸­æ‰¾åˆ° &lt;code>æ†‘è­‰&lt;/code>ï¼Œé»é¸ç•«é¢ä¸Šæ–¹çš„ &lt;code>æ–°å¢æ†‘è­‰&lt;/code>ï¼Œé¸æ“‡ &lt;code>æœå‹™å¸³æˆ¶&lt;/code> çš„é¸é …ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Token2.png"
width="1400"
height="665"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Token2_hu_446d732f2d75be2a.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Token2_hu_7cb4deb5011d3555.png 1024w"
loading="lazy"
alt="å¯ä»¥çœ‹åˆ°é é¢æœ€ä¸‹æ–¹çš„æœå‹™å¸³æˆ¶åˆ—è¡¨ï¼Œå·²ç¶“æœ‰æˆ‘ä¹‹å‰æ–°å¢éçš„ä¸€ç­†æ†‘è­‰ã€‚"
class="gallery-image"
data-flex-grow="210"
data-flex-basis="505px"
>&lt;/p>
&lt;ol start="3">
&lt;li>è¼¸å…¥ &lt;code>æœå‹™å¸³æˆ¶è©³ç´°è³‡æ–™&lt;/code> å¾ŒæŒ‰ä¸‹é€å‡ºï¼Œæ¥è‘—æœƒå›åˆ°æ†‘è­‰é é¢ï¼Œæ‰¾åˆ°æœ€ä¸‹é¢çš„ &lt;code>æœå‹™å¸³æˆ¶&lt;/code> é‚£ä¸€åˆ—ï¼Œé»é¸å³å´çš„ç·¨è¼¯ï¼Œæ‰¾åˆ°ç•«é¢ä¸Šæ–¹çš„ &lt;code>é‡‘é‘°&lt;/code>ï¼Œé»æ“Š &lt;code>æ–°å¢é‡‘é‘°&lt;/code>ï¼Œé¸æ“‡ &lt;code>JSON&lt;/code> çš„æ ¼å¼å¾ŒæŒ‰ä¸‹å»ºç«‹ï¼Œç€è¦½å™¨æœƒè‡ªå‹•ä¸‹è¼‰é€™ä»½æª”æ¡ˆï¼Œ&lt;strong>è«‹ä¸è¦éš¨æ„åˆªé™¤ï¼Œå¦‚æœéºå¤±äº†åªèƒ½é‡æ–°ç”¢ç”Ÿä¸€ä»½é‡‘é‘°&lt;/strong>ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Token3.png"
width="1400"
height="665"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Token3_hu_9d0ccb038ef880fc.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Token3_hu_18f5578b02d1a7b3.png 1024w"
loading="lazy"
alt="æˆ–æ˜¯åƒè€ƒç•«é¢å·¦å´çš„æ¨™é¡Œå’Œåˆ†é¡ï¼Œå¾é¸å–®é€²å…¥ä¹Ÿå¯ä»¥ã€‚"
class="gallery-image"
data-flex-grow="210"
data-flex-basis="505px"
>&lt;/p>
&lt;h3 id="å»ºç«‹-calerdar">å»ºç«‹ Calerdar
&lt;/h3>&lt;ol>
&lt;li>é€²å…¥ &lt;a class="link" href="https://calendar.google.com/calendar" target="_blank" rel="noopener"
>Google Calendar&lt;/a> å¾Œé¸æ“‡ä¸€å€‹å»ºç«‹å¥½çš„æ—¥æ›†ï¼Œå¾ &lt;code>è¨­å®šå’Œå…±ç”¨&lt;/code> é€²å…¥æ—¥æ›†çš„è¨­å®šã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Calendar1.png"
width="1400"
height="711"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Calendar1_hu_db94d011f0e0167d.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Calendar1_hu_a7bae9fa07eb1adf.png 1024w"
loading="lazy"
alt="ç§»å‹•åˆ°æ—¥ç«‹ä¸Šæ–¹çš„è©±æœƒå‡ºç¾ä¸‰å€‹é»ï¼Œé»ä¸‹å»æ‰¾åˆ°è¨­å®šå’Œå…±ç”¨çš„é¸é …ã€‚"
class="gallery-image"
data-flex-grow="196"
data-flex-basis="472px"
>&lt;/p>
&lt;ol start="2">
&lt;li>æ‰¾åˆ° &lt;code>èˆ‡ç‰¹å®šä½¿ç”¨è€…å…±ç”¨æ—¥æ›†&lt;/code> çš„é¸é …ï¼Œé»é¸ &lt;code>æ–°å¢é‚€è«‹å°è±¡&lt;/code>ã€‚é€™è£¡çš„ email è¦è¼¸å…¥å‰›æ‰é‚£ä»½é‡‘é‘° JSON æª”ä¸­ï¼Œ&lt;code>client_email_form&lt;/code> çš„æ¬„ä½å…§å®¹ï¼Œæ¬Šé™è¦è¨˜å¾—èª¿æ•´æˆ &lt;code>é€²è¡Œè®Šæ›´ä¸¦ç®¡ç†å…±ç”¨è¨­å®š&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Calendar2.png"
width="720"
height="237"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Calendar2_hu_75d43700c74c61de.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Calendar2_hu_e96d2963aeee1527.png 1024w"
loading="lazy"
alt="å‰›å‰›ä¸‹è¼‰å®Œæˆçš„é‚£ä»½é‡‘é‘° JSON æª”å…§å®¹ã€‚"
class="gallery-image"
data-flex-grow="303"
data-flex-basis="729px"
>&lt;/p>
&lt;ol start="3">
&lt;li>æ¥è‘—æŠŠç¶²é å¾€ä¸‹æ‹‰ï¼Œæ‰¾åˆ° &lt;code>æ•´åˆæ—¥æ›†&lt;/code> çš„å€å¡Šï¼Œè¨˜ä¸‹é€™å€‹ &lt;code>æ—¥æ›† ID&lt;/code>ï¼Œæ¥ä¸‹ä¾†æœƒä½¿ç”¨åˆ°ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Calendar3.png"
width="720"
height="390"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Calendar3_hu_3d7623a0f96e44a6.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Calendar3_hu_8762fd604f76b719.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="443px"
>&lt;/p>
&lt;p>åˆ°ç›®å‰ç‚ºæ­¢ï¼Œéœ€è¦ä½¿ç”¨çš„éƒ¨åˆ†éƒ½æº–å‚™å®Œæˆäº†ï¼Œæ¥ä¸‹ä¾†è¦é€²å…¥åˆ°ç¨‹å¼çš„éƒ¨åˆ†ã€‚&lt;/p>
&lt;h2 id="æ–°å¢ä¸€å€‹æ´»å‹•">æ–°å¢ä¸€å€‹æ´»å‹•
&lt;/h2>&lt;p>æ–°å¢å¥½ä¸€å€‹å°ˆæ¡ˆä¹‹å¾Œï¼Œå¾ Nuget å°‡ &lt;code>Google.Apis.Calendar.v3&lt;/code> æ–°å¢åˆ°å°ˆæ¡ˆå…§ï¼Œä¸¦åŠ å…¥ä¸‹åˆ—ç¨‹å¼ç¢¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-C#" data-lang="C#">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Google.Apis.Auth.OAuth2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Google.Apis.Calendar.v3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Google.Apis.Calendar.v3.Data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">Google.Apis.Services&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">jsonFile&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;key.json&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">calendarId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;id@group.calendar.google.com&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GoogleCredential&lt;/span> &lt;span class="n">credential&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="nn">var&lt;/span> &lt;span class="n">stream&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">FileStream&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">jsonFile&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FileMode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Open&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FileAccess&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Read&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">credential&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">GoogleCredential&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">FromStream&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stream&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">CreateScoped&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">CalendarService&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Scope&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Calendar&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">service&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">CalendarService&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">BaseClientService&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Initializer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HttpClientInitializer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">credential&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ApplicationName&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;test project&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">newEvent&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Event&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Guid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">NewGuid&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">ToString&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;-&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Summary&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Anthea å¤–å‡º(é€¢ç”²å¤§å­¸)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Start&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">EventDateTime&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DateTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DateTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2022&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">05&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">09&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TimeZone&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Asia/Taipei&amp;#34;&lt;/span> &lt;span class="c1">// Can refer to https://stackoverflow.com/questions/22526635/list-of-acceptable-google-calendar-api-time-zones&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">End&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">EventDateTime&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DateTime&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">DateTime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2022&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">05&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">30&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TimeZone&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Asia/Taipei&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">var&lt;/span> &lt;span class="n">insert&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">service&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Events&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">newEvent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">calendarId&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">Execute&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸ·è¡Œä¹‹å¾Œå›åˆ°æ—¥æ­·çš„é é¢ï¼Œå°±æœƒçœ‹åˆ°å‰›å‰›æ–°å¢ä¸Šå»çš„æ´»å‹•äº†ï¼&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/Insert.png"
width="720"
height="303"
srcset="https://anthea-wu.github.io/post/google-calendar-api/Insert_hu_bb3451e1483fdc87.png 480w, https://anthea-wu.github.io/post/google-calendar-api/Insert_hu_9b8cc37e68c1fd72.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="237"
data-flex-basis="570px"
>&lt;/p>
&lt;h2 id="debug-ç´€éŒ„">Debug ç´€éŒ„
&lt;/h2>&lt;h3 id="invalid-resource-id-value">Invalid resource id value
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Google.Apis.Requests.RequestError
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Invalid resource id value. [400]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Errors [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message[Invalid resource id value.] Location[ - ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason[invalid] Domain[global]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¸¬è©¦çš„éç¨‹ä¸­æœ‰å‡ºç¾é€™å€‹ errorï¼Œçœ‹äº†&lt;a class="link" href="https://developers.google.com/calendar/api/v3/reference/events/insert" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡ä»¶&lt;/a>ä¹‹å¾Œç™¼ç¾å•é¡Œæ˜¯å‡ºåœ¨ Event ä¸Šï¼Œæ–¼æ˜¯é¸æ“‡å¦ç”¨æ¯”è¼ƒä¸å®¹æ˜“é‡è¤‡çš„ GUID å»ä½œç‚ºåƒæ•¸å¸¶ä¸Šå»ã€‚å¦å¤–ï¼Œæ–‡ä»¶ä¸Šæœ‰æåˆ°åªèƒ½ä½¿ç”¨å°å¯«çš„è‹±æ–‡å­—æ¯å’Œæ•¸å­—ï¼Œè¦è¨˜å¾—æ³¨æ„ã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/google-calendar-api/IdDoc.png"
width="1076"
height="473"
srcset="https://anthea-wu.github.io/post/google-calendar-api/IdDoc_hu_5c16acc11e0d2e4c.png 480w, https://anthea-wu.github.io/post/google-calendar-api/IdDoc_hu_14f8a70f3d1fc27e.png 1024w"
loading="lazy"
alt="https://developers.google.com/calendar/api/v3/reference/events/insert"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="545px"
>&lt;/p>
&lt;h2 id="å°çµ">å°çµ
&lt;/h2>&lt;p>é™¤äº†ç¯„ä¾‹è£¡æåˆ°çš„ Insert ä¹‹å¤–ï¼ŒåŸºæœ¬çš„ CRUD éƒ½æœ‰ API å¯ä»¥æ¥ï¼Œä½†æˆ‘ç›®å‰çš„ç³»çµ±é‚„æ²’æœ‰é€™éƒ¨åˆ†çš„åŠŸèƒ½è¦å¯¦ä½œï¼Œæ‰€ä»¥æ²’æœ‰ç‰¹åˆ¥ç ”ç©¶ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œå®˜æ–¹æ–‡ä»¶æ‰€æä¾›çš„è¨»å†Šæ–¹æ³•ï¼Œä½¿ç”¨çš„æ†‘è­‰é¡åˆ¥å’Œç¯„ä¾‹ä¸­çš„ä¸å¤ªä¸€æ¨£ï¼Œæˆ‘å€‹äººèªç‚ºæ¯”è¼ƒéº»ç…©ï¼Œæ‰€ä»¥é¸æ“‡äº†æœå‹™å¸³æˆ¶çš„æ–¹æ³•ã€‚é›–ç„¶å¤§éƒ¨åˆ†çš„åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†åƒæ˜¯ Event.Attendees é€™å€‹é‚€è«‹åƒèˆ‡è€…çš„éƒ¨åˆ†ï¼Œå°±éœ€è¦å¦å¤–è¨­å®šå¥½æ¬Šé™æ‰å¯ä»¥ä½¿ç”¨ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šå°±æ˜¯é€™æ¬¡çš„å…§å®¹ï¼Œå¦‚æœæœ‰ä»»ä½•ä½¿ç”¨ä¸Šçš„ç–‘å•ï¼Œæˆ–æ˜¯è§£é‡‹ä¸Šçš„éŒ¯èª¤ï¼Œéƒ½æ­¡è¿è·Ÿæˆ‘èªªå–”ï¼æˆ‘å€‘ä¸‹æ¬¡è¦‹ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒæ–‡ç« &lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://stackoverflow.com/questions/22526635/list-of-acceptable-google-calendar-api-time-zones" target="_blank" rel="noopener"
>TimeZone List&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://stackoverflow.com/questions/54066564/google-calendar-api-with-asp-net" target="_blank" rel="noopener"
>Google Calendar Api with .NET&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://stackoverflow.com/questions/28825860/google-oauth-error-at-least-one-client-secrets-installed-or-web-should-be-set" target="_blank" rel="noopener"
>At least one client secrets (Installed or Web) should be set&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item><item><title>ä¸å¸¸è¦‹çš„é ç«¯ä¸»æ©Ÿå·²å¼·åˆ¶é—œé–‰é€£ç·š</title><link>https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/</link><pubDate>Tue, 03 May 2022 00:00:00 +0000</pubDate><guid>https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/</guid><description>&lt;h2 id="é ç«¯ä¸»æ©Ÿå·²å¼·åˆ¶é—œé–‰ä¸€å€‹ç¾å­˜çš„é€£ç·š">é ç«¯ä¸»æ©Ÿå·²å¼·åˆ¶é—œé–‰ä¸€å€‹ç¾å­˜çš„é€£ç·š
&lt;/h2>&lt;p>Server A ä¸€ç›´æœ‰ä¸€éš»é‹è¡Œçš„å¾ˆæ­£å¸¸çš„ API æä¾›çµ¦ Server B å’Œ Server C å‘¼å«ï¼Œåœ¨æŸä¸€å¤©å¿½ç„¶ Server B å°±å‘¼å«å¤±æ•—äº†ï¼ŒåŒä¸€æ™‚é–“ Server C ä»¥åŠæˆ‘çš„ local ç’°å¢ƒä»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨é‚£éš» APIã€‚æŸ¥çœ‹ Server B log å¾Œç™¼ç¾é¡¯ç¤ºçš„éŒ¯èª¤æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">åŸºç¤é€£æ¥å·²é—œé–‰: å‚³é€æ™‚ç™¼ç”Ÿæœªé æœŸéŒ¯èª¤ï¼Œé ç«¯ä¸»æ©Ÿå·²å¼·åˆ¶é—œé–‰ä¸€å€‹ç¾å­˜çš„é€£ç·šã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The underlying connection was closed: An unexpected error occurred on a send.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”±æ–¼æ˜¯æ¯”è¼ƒå¤è€çš„æœå‹™äº†ï¼Œæœ€è¿‘ä¸€æ®µæ™‚é–“éƒ½æ²’æœ‰ä¿®æ”¹éå…©é‚Šçš„ç¨‹å¼ç¢¼ï¼Œæ‰€ä»¥å…ˆæ’é™¤äº†æ”¹å£äº†çš„å¯èƒ½æ€§ã€‚æŠŠéŒ¯èª¤è¨Šæ¯æ‹¿å» google å¾Œï¼Œçœ‹åˆ°é€šå¸¸æ˜¯å› ç‚ºçµ‚æ­¢ TLS 1.0ã€1.1 çš„æœå‹™æ‰€å°è‡´ï¼Œåªè¦åŠ ä¸Šé€™æ®µç¨‹å¼ç¢¼å°±å¯ä»¥é‹è¡Œäº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls | SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="client-hello--server-hello">Client Hello &amp;amp; Server Hello
&lt;/h2>&lt;p>å‰›å¥½æœ€è¿‘é‡æ–°æ‹¾èµ·ç¶²è·¯å”å®šçš„ç›¸é—œæ›¸ç±é–±è®€ä¸­ï¼Œæ›¸è£¡æœ‰ä¸€äº›ä½¿ç”¨ Wireshark çš„ç¯„ä¾‹ï¼ŒæŠ±æŒè‘—å°‡å°±è©¦è©¦çœ‹çš„å¿ƒæ…‹ï¼Œå°±æ‰“é–‹äº† Wireshark ä¾†ç ”ç©¶çœ‹çœ‹åˆ°åº•å¾æˆ‘ local ç«¯ç™¼é€å‡ºå»çš„è«‹æ±‚å’Œ Server B åˆ°åº•æœ‰ç”šéº¼ä¸åŒã€‚&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Wireshark.png"
width="910"
height="270"
srcset="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Wireshark_hu_95d51d30a541fd84.png 480w, https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Wireshark_hu_8d0a0ab334d5a545.png 1024w"
loading="lazy"
alt="å·¦é‚Šç‚º local ç«¯ï¼Œå³é‚Šç‚º Server B"
class="gallery-image"
data-flex-grow="337"
data-flex-basis="808px"
>&lt;/p>
&lt;p>å¾ä¸Šé¢é€™å¼µæˆªåœ–çš„æ¯”è¼ƒå¯ä»¥çœ‹åˆ°ï¼Œå·¦é‚Š local ç«¯æœ‰å‡ºç¾ Client Hello å’Œ Server Helloï¼Œä½†å³é‚Š Server B å»åªå‡ºç¾äº† Client Helloã€‚ä½†é€™å…©å€‹äº’ç›¸èªªå“ˆå›‰çš„æ±è¥¿æ˜¯ä»€éº¼ï¼Ÿ&lt;/p>
&lt;h2 id="tls-äº¤æ¡">TLS äº¤æ¡
&lt;/h2>&lt;p>åœ¨ç¶²éš›ç¶²è·¯çš„äº‹ä»¶ä¸­ï¼Œæ‡‰è©²å¾ˆå¤šäººéƒ½è½èªªéä¸‰é …äº¤æ¡ï¼Œå…¨åæ‡‰è©²æ˜¯ TCP ä¸‰é …äº¤æ¡ï¼ˆTCP Three-Way Handshakeï¼‰ï¼Œé€éé€™å€‹éç¨‹å»ºç«‹é€£ç·šã€‚&lt;/p>
&lt;p>ä½†æ˜¯é€™å€‹é€£ç·šå»ºç«‹å¾Œæ˜¯æ²’æœ‰åŠ å¯†çš„ç‹€æ…‹ï¼Œå› æ­¤è¦é€é &lt;strong>TLS äº¤æ¡&lt;/strong> ä¾†ç¢ºä¿é›™æ–¹èƒ½å®‰å…¨åœ°äº¤æ›åŠ å¯†é‡‘é‘°ï¼Œä¸¦ç¢ºå®šåŠ å¯†çš„å”å®šç‰ˆæœ¬å’ŒåŠ å¯†ç®—æ³•ã€‚è©³ç´°çš„æ­¥é©Ÿæ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>å®¢æˆ¶ç«¯ç™¼é€ &lt;code>ClientHello&lt;/code> è¨Šæ¯ï¼Œå‘ŠçŸ¥ä¼ºæœå™¨å®¢æˆ¶ç«¯é€™é‚Šæ”¯æ´çš„ TLS ç‰ˆæœ¬ä»¥åŠå¯†ç¢¼å¥—ä»¶ã€‚&lt;/li>
&lt;li>ä¼ºæœå™¨å›æ‡‰ &lt;code>ServerHello&lt;/code> è¨Šæ¯ï¼Œé¸æ“‡ä½¿ç”¨çš„åŠ å¯†ç®—æ³•å’Œå”å®šç‰ˆæœ¬ï¼Œä¸¦å‚³é€ä¼ºæœå™¨è­‰æ›¸ç­‰è³‡è¨Šä¾†è­‰æ˜èº«ä»½ã€‚&lt;/li>
&lt;li>é›™æ–¹äº¤æ›åŠ å¯†é‡‘é‘°å’Œä¸€äº›å®‰å…¨åƒæ•¸ï¼Œå®ŒæˆåŠ å¯†é€šè¨Šçš„æº–å‚™ã€‚&lt;/li>
&lt;li>å®¢æˆ¶ç«¯å’Œä¼ºæœå™¨ç¢ºèªæ‰€æœ‰è¨Šæ¯äº¤æ›ç„¡èª¤å¾Œï¼ŒTLS æ¡æ‰‹çµæŸï¼Œé€šä¿¡é–‹å§‹é€²å…¥åŠ å¯†çš„æ•¸æ“šå‚³è¼¸éšæ®µã€‚&lt;/li>
&lt;/ol>
&lt;p>ç”±æ–¼ TLS çš„ç›®çš„å°±æ˜¯ç¢ºä¿è³‡æ–™åœ¨å‚³è¼¸éç¨‹ä¸­çš„æ©Ÿå¯†æ€§ã€å®Œæ•´æ€§åŠèº«ä»½é©—è­‰ï¼Œåªè¦æœ‰ä¸€å€‹æ­¥é©Ÿç¼ºå¤±å°±ä»£è¡¨ç„¡æ³•å»ºç«‹å®‰å…¨çš„é€£ç·šï¼Œå› æ­¤é€£ç·šå°±è¢«ä¸­æ–·ã€‚å¾å‰›å‰›çš„æˆªåœ–å¯ä»¥çœ‹åˆ° Server B ç¢ºå¯¦æ²’æœ‰ç­‰åˆ° &lt;code>ServerHello&lt;/code> çš„è¨Šæ¯ï¼Œç‚ºäº†ç¢ºå®šæ˜¯ä¸æ˜¯é€™å€‹å•é¡Œï¼Œæˆ‘æ±ºå®šè¦åˆ†åˆ¥çœ‹çœ‹é€™ä¸‰å° Server çš„ TLS ç‰ˆæœ¬ä»¥åŠå¯†ç¢¼å¥—ä»¶æœ‰å“ªäº›ã€‚&lt;/p>
&lt;h3 id="æª¢æŸ¥å…è¨±çš„å¯†ç¢¼å¥—ä»¶qualys-labs">æª¢æŸ¥å…è¨±çš„å¯†ç¢¼å¥—ä»¶ï¼šQualys Labs
&lt;/h3>&lt;p>Qualys Labs é€™å€‹ç¶²ç«™ä¸»è¦æ˜¯é‡å° SSL å®‰å…¨æ€§åšçš„æƒæï¼Œæƒæå‡ºçš„å…§å®¹å‰›å¥½åŒ…å«æˆ‘å€‘æ‰€éœ€è¦çš„å¯†ç¢¼å¥—ä»¶æ¸…å–®ã€‚æ“ä½œçš„æ–¹å¼ä¹Ÿå¾ˆç°¡å–®ï¼š&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps1.png"
width="1103"
height="833"
srcset="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps1_hu_68dfc2bd7a2dcb8e.png 480w, https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps1_hu_dc1797473200e3fb.png 1024w"
loading="lazy"
alt="1. é»é¸ Test your server"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="317px"
>&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps2.png"
width="1099"
height="788"
srcset="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps2_hu_3df450630311d5c0.png 480w, https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps2_hu_c0d62bb2162f1bd1.png 1024w"
loading="lazy"
alt="2. åœ¨ä¸­é–“çš„ Hostname è¼¸å…¥ä½ æƒ³æ¸¬è©¦çš„ç¶²ç«™"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="334px"
>&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps3.png"
width="1103"
height="639"
srcset="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps3_hu_90462bdf35f04fd4.png 480w, https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps3_hu_fb58499b3829eaff.png 1024w"
loading="lazy"
alt="3. é¸æ“‡å®ƒæƒæå¾Œçš„ä½ çš„ä¸»æ©Ÿ IPï¼Œé€²å»çœ‹å ±å‘Š"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="414px"
>&lt;/p>
&lt;p>&lt;img src="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps4.png"
width="962"
height="806"
srcset="https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps4_hu_976fef94f588ed77.png 480w, https://anthea-wu.github.io/post/%E4%B8%8D%E5%B8%B8%E8%A6%8B%E7%9A%84%E9%81%A0%E7%AB%AF%E4%B8%BB%E6%A9%9F%E5%B7%B2%E5%BC%B7%E5%88%B6%E9%97%9C%E9%96%89%E9%80%A3%E7%B7%9A/Steps4_hu_558cd966f292a70f.png 1024w"
loading="lazy"
alt="4. å¾€ä¸‹æ»‘ï¼Œæ‰¾åˆ° Cipher Suites çš„å€å¡Šï¼Œé€™é‚Šå°±æ˜¯é€™å° server å¯ç”¨çš„å¯†ç¢¼å¥—ä»¶æ¸…å–®"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="286px"
>&lt;/p>
&lt;p>é€éé€™å€‹ç¶²ç«™çš„æ¯”å°ï¼Œæˆ‘ç¢ºå®šäº†é€™æ¬¡ Server B é‡åˆ°çš„å•é¡Œï¼šç”±æ–¼é‚£é™£å­å‰›åšå®Œå¼±é»æƒæï¼ŒServer A è¢«æƒå‡ºäº† Weak SSL Protocol çš„å•é¡Œï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨ IIS Crypto æŠŠä¸€äº›ä¸å®‰å…¨çš„éæ™‚å”è­°é—œé–‰ï¼Œä½† Server B å¤ªéå¤è€ï¼Œæ²’è¾¦æ³•æ”¯æ´æ–°çš„å”è­°ï¼Œé€™å°±å°è‡´äº†é€™æ¬¡çš„å•é¡Œï¼ŒServer B åªèƒ½ä½¿ç”¨ä¸å®‰å…¨çš„å¯†ç¢¼å¥—ä»¶ï¼Œä½† Server A ä¸å…è¨±ä½¿ç”¨ï¼Œåœ¨æ²’è¾¦æ³•æŒ‘å‡ºå¯ç”¨å¥—ä»¶çš„æƒ…æ³ä¸‹ï¼Œè‡ªç„¶ä¹Ÿå°±æ²’è¾¦æ³•å›è¦† &lt;code>ServerHello&lt;/code> çš„è¨Šæ¯ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>åƒè€ƒè³‡æ–™&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cloudflare.com/zh-tw/learning/ssl/what-happens-in-a-tls-handshake/" target="_blank" rel="noopener"
>TLS æ¡æ‰‹ä¸­ç™¼ç”Ÿäº†ç”šéº¼äº‹ï¼Ÿ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://medium.com/@clu1022/%E9%82%A3%E4%BA%9B%E9%97%9C%E6%96%BCssl-tls%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B-%E4%B9%9D-ssl-communication-31a2a8a888a6" target="_blank" rel="noopener"
>é‚£äº›é—œæ–¼SSL/TLSçš„äºŒä¸‰äº‹&lt;/a>&lt;/li>
&lt;/ul>&lt;/p>&lt;/blockquote></description></item></channel></rss>